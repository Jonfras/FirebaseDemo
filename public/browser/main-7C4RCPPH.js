import{$ as le,$a as xn,A as po,Aa as xr,Ab as ce,B as jc,Ba as _t,Bb as ko,C as ln,Ca as At,Cb as xo,D as mi,Da as Gc,Db as rl,E as Nn,Ea as yp,Eb as Dp,F as lp,Fa as vi,Fb as Np,G as Bc,Ga as vp,Gb as Oo,H as un,Ha as Or,Hb as Mo,I as up,Ia as Mr,J as gi,Ja as Hc,K as hn,Ka as Ip,L as $c,La as wp,M as hp,Ma as Kc,N as dp,Na as Ii,Nb as kp,O as fp,Oa as wi,Ob as Vr,P as mo,Pa as Qc,Pb as Lo,Q as We,Qa as Yc,R as go,Ra as wo,S as de,Sa as Eo,T as ae,Ta as To,U as V,Ua as Le,Ub as xp,V as fe,Va as He,Vb as Fo,W as pp,Wa as Lr,X as B,Xa as Ei,Xb as Op,Y as zc,Ya as jt,Z as M,Za as Ke,_ as O,_a as Ti,a as x,aa as Dr,ab as Jc,ac as Mp,b as me,ba as Ve,bb as bo,c as HI,ca as pe,cb as Ao,d as on,da as Vt,db as dn,e as C,ea as Me,eb as Co,f as ip,fa as mp,fb as Xc,g as rp,ga as _i,gb as Zc,h as an,ha as ft,hb as el,i as Mc,ia as qc,ib as Ep,j as Lc,ja as pt,jb as Ue,k as Ft,ka as mt,kb as Fr,l as tt,la as Wc,lb as So,m as sp,ma as gt,mb as Ro,n as op,na as _o,nb as Tp,o as cn,oa as kn,ob as tl,p as Fc,pa as Z,pb as Po,q as Vc,qa as yo,qb as nl,r as Uc,ra as vo,rb as bp,s as qe,sa as Nr,sb as Ap,t as F,ta as Ut,tb as Do,u as Pr,ua as gp,ub as Cp,v as ap,va as Io,vb as No,w as cp,wa as _p,wb as Sp,x as z,xa as Ge,xb as il,y as pi,ya as yi,yb as Rp,z as nt,za as kr,zb as Pp}from"./chunk-FCECGEMV.js";var jr=class{},Br=class{},Bt=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),s=r.toLowerCase(),a=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(a):this.headers.set(s,[a])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let a=this.headers.get(t);if(!a)return;a=a.filter(c=>s.indexOf(c)===-1),a.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}break}}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var ol=class{encodeKey(e){return Lp(e)}encodeValue(e){return Lp(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function QI(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[a,c]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],u=t.get(a)||[];u.push(c),t.set(a,u)}),t}var YI=/%(\d[a-f0-9])/gi,JI={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Lp(n){return encodeURIComponent(n).replace(YI,(e,t)=>JI[t]??e)}function Vo(n){return`${n}`}var pn=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new ol,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=QI(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(Vo):[Vo(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Vo(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(Vo(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var al=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function XI(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Fp(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Vp(n){return typeof Blob<"u"&&n instanceof Blob}function Up(n){return typeof FormData<"u"&&n instanceof FormData}function ZI(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Ur=class n{constructor(e,t,i,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(XI(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Bt,this.context??=new al,!this.params)this.params=new pn,this.urlWithParams=t;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=t;else{let c=t.indexOf("?"),u=c===-1?"?":c<t.length-1?"&":"";this.urlWithParams=t+u+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Fp(this.body)||Vp(this.body)||Up(this.body)||ZI(this.body)?this.body:this.body instanceof pn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Up(this.body)?null:Vp(this.body)?this.body.type||null:Fp(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof pn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,a=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,d=e.headers||this.headers,p=e.params||this.params,m=e.context??this.context;return e.setHeaders!==void 0&&(d=Object.keys(e.setHeaders).reduce((b,R)=>b.set(R,e.setHeaders[R]),d)),e.setParams&&(p=Object.keys(e.setParams).reduce((b,R)=>b.set(R,e.setParams[R]),p)),new n(t,i,a,{params:p,headers:d,context:m,reportProgress:u,responseType:r,withCredentials:c,transferCache:s})}},mn=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(mn||{}),$r=class{constructor(e,t=200,i="OK"){this.headers=e.headers||new Bt,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Uo=class n extends $r{constructor(e={}){super(e),this.type=mn.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},zr=class n extends $r{constructor(e={}){super(e),this.type=mn.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},fn=class extends $r{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},zp=200,ew=204;function sl(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var tw=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Ur)s=t;else{let u;r.headers instanceof Bt?u=r.headers:u=new Bt(r.headers);let d;r.params&&(r.params instanceof pn?d=r.params:d=new pn({fromObject:r.params})),s=new Ur(t,i,r.body!==void 0?r.body:null,{headers:u,context:r.context,params:d,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let a=F(s).pipe(Nn(u=>this.handler.handle(u)));if(t instanceof Ur||r.observe==="events")return a;let c=a.pipe(ln(u=>u instanceof zr));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(z(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(z(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(z(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(z(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new pn().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,sl(r,i))}post(t,i,r={}){return this.request("POST",t,sl(r,i))}put(t,i,r={}){return this.request("PUT",t,sl(r,i))}static{this.\u0275fac=function(i){return new(i||n)(M(jr))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})(),nw=/^\)\]\}',?\n/,iw="X-Request-URL";function jp(n){if(n.url)return n.url;let e=iw.toLocaleLowerCase();return n.headers.get(e)}var cl=(()=>{class n{constructor(){this.fetchImpl=O(ll,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=O(Z)}handle(t){return new an(i=>{let r=new AbortController;return this.doRequest(t,r.signal,i).then(ul,s=>i.error(new fn({error:s}))),()=>r.abort()})}doRequest(t,i,r){return C(this,null,function*(){let s=this.createRequestInit(t),a;try{let R=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,x({signal:i},s)));rw(R),r.next({type:mn.Sent}),a=yield R}catch(R){r.error(new fn({error:R,status:R.status??0,statusText:R.statusText,url:t.urlWithParams,headers:R.headers}));return}let c=new Bt(a.headers),u=a.statusText,d=jp(a)??t.urlWithParams,p=a.status,m=null;if(t.reportProgress&&r.next(new Uo({headers:c,status:p,statusText:u,url:d})),a.body){let R=a.headers.get("content-length"),S=[],N=a.body.getReader(),D=0,Q,Y,L=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>C(this,null,function*(){for(;;){let{done:ke,value:ue}=yield N.read();if(ke)break;if(S.push(ue),D+=ue.length,t.reportProgress){Y=t.responseType==="text"?(Y??"")+(Q??=new TextDecoder).decode(ue,{stream:!0}):void 0;let w=()=>r.next({type:mn.DownloadProgress,total:R?+R:void 0,loaded:D,partialText:Y});L?L.run(w):w()}}}));let he=this.concatChunks(S,D);try{let ke=a.headers.get("Content-Type")??"";m=this.parseBody(t,he,ke)}catch(ke){r.error(new fn({error:ke,headers:new Bt(a.headers),status:a.status,statusText:a.statusText,url:jp(a)??t.urlWithParams}));return}}p===0&&(p=m?zp:0),p>=200&&p<300?(r.next(new zr({body:m,headers:c,status:p,statusText:u,url:d})),r.complete()):r.error(new fn({error:m,headers:c,status:p,statusText:u,url:d}))})}parseBody(t,i,r){switch(t.responseType){case"json":let s=new TextDecoder().decode(i).replace(nw,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(t){let i={},r=t.withCredentials?"include":void 0;if(t.headers.forEach((s,a)=>i[s]=a.join(",")),t.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let s=t.detectContentTypeHeader();s!==null&&(i["Content-Type"]=s)}return{body:t.serializeBody(),method:t.method,headers:i,credentials:r}}concatChunks(t,i){let r=new Uint8Array(i),s=0;for(let a of t)r.set(a,s),s+=a.length;return r}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})(),ll=class{};function ul(){}function rw(n){n.then(ul,ul)}function sw(n,e){return e(n)}function ow(n,e,t){return(i,r)=>ft(t,()=>e(i,s=>n(s,r)))}var qp=new B(""),aw=new B(""),cw=new B("",{providedIn:"root",factory:()=>!0});var Bp=(()=>{class n extends jr{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=O(_o),this.contributeToStability=O(cw)}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(qp),...this.injector.get(aw,[])]));this.chain=i.reduceRight((r,s)=>ow(r,s,this.injector),sw)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(gi(()=>this.pendingTasks.remove(i)))}else return this.chain(t,i=>this.backend.handle(i))}static{this.\u0275fac=function(i){return new(i||n)(M(Br),M(_i))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})();var lw=/^\)\]\}',?\n/;function uw(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var $p=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new ae(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?qe(i.\u0275loadImpl()):F(null)).pipe(We(()=>new an(s=>{let a=i.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((N,D)=>a.setRequestHeader(N,D.join(","))),t.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let N=t.detectContentTypeHeader();N!==null&&a.setRequestHeader("Content-Type",N)}if(t.responseType){let N=t.responseType.toLowerCase();a.responseType=N!=="json"?N:"text"}let c=t.serializeBody(),u=null,d=()=>{if(u!==null)return u;let N=a.statusText||"OK",D=new Bt(a.getAllResponseHeaders()),Q=uw(a)||t.url;return u=new Uo({headers:D,status:a.status,statusText:N,url:Q}),u},p=()=>{let{headers:N,status:D,statusText:Q,url:Y}=d(),L=null;D!==ew&&(L=typeof a.response>"u"?a.responseText:a.response),D===0&&(D=L?zp:0);let he=D>=200&&D<300;if(t.responseType==="json"&&typeof L=="string"){let ke=L;L=L.replace(lw,"");try{L=L!==""?JSON.parse(L):null}catch(ue){L=ke,he&&(he=!1,L={error:ue,text:L})}}he?(s.next(new zr({body:L,headers:N,status:D,statusText:Q,url:Y||void 0})),s.complete()):s.error(new fn({error:L,headers:N,status:D,statusText:Q,url:Y||void 0}))},m=N=>{let{url:D}=d(),Q=new fn({error:N,status:a.status||0,statusText:a.statusText||"Unknown Error",url:D||void 0});s.error(Q)},b=!1,R=N=>{b||(s.next(d()),b=!0);let D={type:mn.DownloadProgress,loaded:N.loaded};N.lengthComputable&&(D.total=N.total),t.responseType==="text"&&a.responseText&&(D.partialText=a.responseText),s.next(D)},S=N=>{let D={type:mn.UploadProgress,loaded:N.loaded};N.lengthComputable&&(D.total=N.total),s.next(D)};return a.addEventListener("load",p),a.addEventListener("error",m),a.addEventListener("timeout",m),a.addEventListener("abort",m),t.reportProgress&&(a.addEventListener("progress",R),c!==null&&a.upload&&a.upload.addEventListener("progress",S)),a.send(c),s.next({type:mn.Sent}),()=>{a.removeEventListener("error",m),a.removeEventListener("abort",m),a.removeEventListener("load",p),a.removeEventListener("timeout",m),t.reportProgress&&(a.removeEventListener("progress",R),c!==null&&a.upload&&a.upload.removeEventListener("progress",S)),a.readyState!==a.DONE&&a.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)(M(Mo))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})(),Wp=new B(""),hw="XSRF-TOKEN",dw=new B("",{providedIn:"root",factory:()=>hw}),fw="X-XSRF-TOKEN",pw=new B("",{providedIn:"root",factory:()=>fw}),jo=class{},mw=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=xo(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)(M(ce),M(Ge),M(dw))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})();function gw(n,e){let t=n.url.toLowerCase();if(!O(Wp)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=O(jo).getToken(),r=O(pw);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var Gp=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Gp||{});function _w(n,e){return{\u0275kind:n,\u0275providers:e}}function Hp(...n){let e=[tw,$p,Bp,{provide:jr,useExisting:Bp},{provide:Br,useFactory:()=>O(cl,{optional:!0})??O($p)},{provide:qp,useValue:gw,multi:!0},{provide:Wp,useValue:!0},{provide:jo,useClass:mw}];for(let t of n)e.push(...t.\u0275providers);return Me(e)}function Kp(){return _w(Gp.Fetch,[cl,{provide:Br,useExisting:cl}])}var fl=class extends Pp{constructor(){super(...arguments),this.supportsDOMEvents=!0}},pl=class n extends fl{static makeCurrent(){Rp(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=vw();return t==null?null:Iw(t)}resetBaseElement(){qr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return xo(document.cookie,e)}},qr=null;function vw(){return qr=qr||document.querySelector("base"),qr?qr.getAttribute("href"):null}function Iw(n){return new URL(n,document.baseURI).pathname}var ww=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})(),ml=new B(""),Jp=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new ae(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(M(ml),M(Z))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})(),Bo=class{constructor(e){this._doc=e}},hl="ng-app-id",Xp=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Oo(s),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${hl}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){let r=this.styleRef;if(r.has(t)){let s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(hl),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(hl,this.appId),t.appendChild(a),a}}addStyleToHost(t,i){let r=this.getStyleElement(t,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(M(ce),M(Io),M(kr,8),M(Ge))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})(),dl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},_l=/%COMP%/g,Zp="%COMP%",Ew=`_nghost-${Zp}`,Tw=`_ngcontent-${Zp}`,bw=!0,Aw=new B("",{providedIn:"root",factory:()=>bw});function Cw(n){return Tw.replace(_l,n)}function Sw(n){return Ew.replace(_l,n)}function em(n,e){return e.map(t=>t.replace(_l,n))}var bi=(()=>{class n{constructor(t,i,r,s,a,c,u,d=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Oo(c),this.defaultRenderer=new Wr(t,a,u,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Dr.ShadowDom&&(i=me(x({},i),{encapsulation:Dr.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof $o?r.applyToHost(t):r instanceof Gr&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case Dr.Emulated:s=new $o(u,d,i,this.appId,p,a,c,m);break;case Dr.ShadowDom:return new gl(u,d,t,i,a,c,this.nonce,m);default:s=new Gr(u,d,i,p,a,c,m);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(M(Jp),M(Xp),M(Io),M(Aw),M(ce),M(Ge),M(Z),M(kr))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})(),Wr=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(dl[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Qp(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(Qp(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new ae(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=dl[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=dl[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(xr.DashCase|xr.Important)?e.style.setProperty(t,i,r&xr.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&xr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=il().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Qp(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var gl=class extends Wr{constructor(e,t,i,r,s,a,c,u){super(e,s,a,u),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=em(r.id,r.styles);for(let p of d){let m=document.createElement("style");c&&m.setAttribute("nonce",c),m.textContent=p,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Gr=class extends Wr{constructor(e,t,i,r,s,a,c,u){super(e,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=u?em(u,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},$o=class extends Gr{constructor(e,t,i,r,s,a,c,u){let d=r+"-"+i.id;super(e,t,i,s,a,c,u,d),this.contentAttr=Cw(d),this.hostAttr=Sw(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},Rw=(()=>{class n extends Bo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(M(ce))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})(),Yp=["alt","control","meta","shift"],Pw={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Dw={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Nw=(()=>{class n extends Bo{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r){let s=n.parseEventName(i),a=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>il().onAndCancel(t,s.domEventName,a))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),Yp.forEach(d=>{let p=i.indexOf(d);p>-1&&(i.splice(p,1),a+=d+".")}),a+=s,i.length!=0||s.length===0)return null;let u={};return u.domEventName=r,u.fullKey=a,u}static matchEventFullKeyCode(t,i){let r=Pw[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),Yp.forEach(a=>{if(a!==r){let c=Dw[a];c(t)&&(s+=a+".")}}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(M(ce))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})();function tm(n,e){return Cp(x({rootComponent:n},kw(e)))}function kw(n){return{appProviders:[...Fw,...n?.providers??[]],platformProviders:Lw}}function xw(){pl.makeCurrent()}function Ow(){return new yo}function Mw(){return gp(document),document}var Lw=[{provide:Ge,useValue:Dp},{provide:_p,useValue:xw,multi:!0},{provide:ce,useFactory:Mw,deps:[]}];var Fw=[{provide:mp,useValue:"root"},{provide:yo,useFactory:Ow,deps:[]},{provide:ml,useClass:Rw,multi:!0,deps:[ce,Z,Ge]},{provide:ml,useClass:Nw,multi:!0,deps:[ce]},bi,Xp,Jp,{provide:vi,useExisting:bi},{provide:Mo,useClass:ww,deps:[]},[]];var nm=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)(M(ce))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var j="primary",ls=Symbol("RouteTitle"),El=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Di(n){return new El(n)}function Bw(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let a=i[s],c=n[s];if(a[0]===":")r[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function $w(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ct(n[t],e[t]))return!1;return!0}function Ct(n,e){let t=n?Tl(n):void 0,i=e?Tl(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!dm(n[r],e[r]))return!1;return!0}function Tl(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function dm(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function fm(n){return n.length>0?n[n.length-1]:null}function gn(n){return ap(n)?n:Tp(n)?qe(Promise.resolve(n)):F(n)}var zw={exact:mm,subset:gm},pm={exact:qw,subset:Ww,ignored:()=>!0};function im(n,e,t){return zw[t.paths](n.root,e.root,t.matrixParams)&&pm[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function qw(n,e){return Ct(n,e)}function mm(n,e,t){if(!Mn(n.segments,e.segments)||!Wo(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!mm(n.children[i],e.children[i],t))return!1;return!0}function Ww(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>dm(n[t],e[t]))}function gm(n,e,t){return _m(n,e,e.segments,t)}function _m(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Mn(r,t)||e.hasChildren()||!Wo(r,t,i))}else if(n.segments.length===t.length){if(!Mn(n.segments,t)||!Wo(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!gm(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Mn(n.segments,r)||!Wo(n.segments,r,i)||!n.children[j]?!1:_m(n.children[j],e,s,i)}}function Wo(n,e,t){return e.every((i,r)=>pm[t](n[r].parameters,i.parameters))}var zt=class{constructor(e=new J([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Di(this.queryParams),this._queryParamMap}toString(){return Kw.serialize(this)}},J=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Go(this)}},On=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Di(this.parameters),this._parameterMap}toString(){return vm(this)}};function Gw(n,e){return Mn(n,e)&&n.every((t,i)=>Ct(t.parameters,e[i].parameters))}function Mn(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function Hw(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===j&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==j&&(t=t.concat(e(r,i)))}),t}var Jl=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:()=>new Zr,providedIn:"root"})}}return n})(),Zr=class{parse(e){let t=new Al(e);return new zt(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Hr(e.root,!0)}`,i=Jw(e.queryParams),r=typeof e.fragment=="string"?`#${Qw(e.fragment)}`:"";return`${t}${i}${r}`}},Kw=new Zr;function Go(n){return n.segments.map(e=>vm(e)).join("/")}function Hr(n,e){if(!n.hasChildren())return Go(n);if(e){let t=n.children[j]?Hr(n.children[j],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==j&&i.push(`${r}:${Hr(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=Hw(n,(i,r)=>r===j?[Hr(n.children[j],!1)]:[`${r}:${Hr(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[j]!=null?`${Go(n)}/${t[0]}`:`${Go(n)}/(${t.join("//")})`}}function ym(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function zo(n){return ym(n).replace(/%3B/gi,";")}function Qw(n){return encodeURI(n)}function bl(n){return ym(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ho(n){return decodeURIComponent(n)}function rm(n){return Ho(n.replace(/\+/g,"%20"))}function vm(n){return`${bl(n.path)}${Yw(n.parameters)}`}function Yw(n){return Object.entries(n).map(([e,t])=>`;${bl(e)}=${bl(t)}`).join("")}function Jw(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${zo(t)}=${zo(r)}`).join("&"):`${zo(t)}=${zo(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Xw=/^[^\/()?;#]+/;function yl(n){let e=n.match(Xw);return e?e[0]:""}var Zw=/^[^\/()?;=#]+/;function eE(n){let e=n.match(Zw);return e?e[0]:""}var tE=/^[^=?&#]+/;function nE(n){let e=n.match(tE);return e?e[0]:""}var iE=/^[^&#]+/;function rE(n){let e=n.match(iE);return e?e[0]:""}var Al=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new J([],{}):new J([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[j]=new J(e,t)),i}parseSegment(){let e=yl(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ae(4009,!1);return this.capture(e),new On(Ho(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=eE(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=yl(this.remaining);r&&(i=r,this.capture(i))}e[Ho(t)]=Ho(i)}parseQueryParam(e){let t=nE(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let a=rE(this.remaining);a&&(i=a,this.capture(i))}let r=rm(t),s=rm(i);if(e.hasOwnProperty(r)){let a=e[r];Array.isArray(a)||(a=[a],e[r]=a),a.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=yl(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new ae(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=j);let a=this.parseChildren();t[s]=Object.keys(a).length===1?a[j]:new J([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ae(4011,!1)}};function Im(n){return n.segments.length>0?new J([],{[j]:n}):n}function wm(n){let e={};for(let[i,r]of Object.entries(n.children)){let s=wm(r);if(i===j&&s.segments.length===0&&s.hasChildren())for(let[a,c]of Object.entries(s.children))e[a]=c;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new J(n.segments,e);return sE(t)}function sE(n){if(n.numberOfChildren===1&&n.children[j]){let e=n.children[j];return new J(n.segments.concat(e.segments),e.children)}return n}function es(n){return n instanceof zt}function oE(n,e,t=null,i=null){let r=Em(n);return Tm(r,e,t,i)}function Em(n){let e;function t(s){let a={};for(let u of s.children){let d=t(u);a[u.outlet]=d}let c=new J(s.url,a);return s===n&&(e=c),c}let i=t(n.root),r=Im(i);return e??r}function Tm(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return vl(r,r,r,t,i);let s=aE(e);if(s.toRoot())return vl(r,r,new J([],{}),t,i);let a=cE(s,r,n),c=a.processChildren?Yr(a.segmentGroup,a.index,s.commands):Am(a.segmentGroup,a.index,s.commands);return vl(r,a.segmentGroup,c,t,i)}function Ko(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ts(n){return typeof n=="object"&&n!=null&&n.outlets}function vl(n,e,t,i,r){let s={};i&&Object.entries(i).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`});let a;n===e?a=t:a=bm(n,e,t);let c=Im(wm(a));return new zt(c,s,r)}function bm(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=bm(s,e,t)}),new J(n.segments,i)}var Qo=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Ko(i[0]))throw new ae(4003,!1);let r=i.find(ts);if(r&&r!==fm(i))throw new ae(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function aE(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Qo(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,a)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([u,d])=>{c[u]=typeof d=="string"?d.split("/"):d}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:a===0?(s.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?t=!0:c===".."?e++:c!=""&&r.push(c))}),r):[...r,s]},[]);return new Qo(t,e,i)}var Si=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function cE(n,e,t){if(n.isAbsolute)return new Si(e,!0,0);if(!t)return new Si(e,!1,NaN);if(t.parent===null)return new Si(t,!0,0);let i=Ko(n.commands[0])?0:1,r=t.segments.length-1+i;return lE(t,r,n.numberOfDoubleDots)}function lE(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new ae(4005,!1);r=i.segments.length}return new Si(i,!1,r-s)}function uE(n){return ts(n[0])?n[0].outlets:{[j]:n}}function Am(n,e,t){if(n??=new J([],{}),n.segments.length===0&&n.hasChildren())return Yr(n,e,t);let i=hE(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new J(n.segments.slice(0,i.pathIndex),{});return s.children[j]=new J(n.segments.slice(i.pathIndex),n.children),Yr(s,0,r)}else return i.match&&r.length===0?new J(n.segments,{}):i.match&&!n.hasChildren()?Cl(n,e,t):i.match?Yr(n,0,r):Cl(n,e,t)}function Yr(n,e,t){if(t.length===0)return new J(n.segments,{});{let i=uE(t),r={};if(Object.keys(i).some(s=>s!==j)&&n.children[j]&&n.numberOfChildren===1&&n.children[j].segments.length===0){let s=Yr(n.children[j],e,t);return new J(n.segments,s.children)}return Object.entries(i).forEach(([s,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[s]=Am(n.children[s],e,a))}),Object.entries(n.children).forEach(([s,a])=>{i[s]===void 0&&(r[s]=a)}),new J(n.segments,r)}}function hE(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let a=n.segments[r],c=t[i];if(ts(c))break;let u=`${c}`,d=i<t.length-1?t[i+1]:null;if(r>0&&u===void 0)break;if(u&&d&&typeof d=="object"&&d.outlets===void 0){if(!om(u,d,a))return s;i+=2}else{if(!om(u,{},a))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Cl(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(ts(s)){let u=dE(s.outlets);return new J(i,u)}if(r===0&&Ko(t[0])){let u=n.segments[e];i.push(new On(u.path,sm(t[0]))),r++;continue}let a=ts(s)?s.outlets[j]:`${s}`,c=r<t.length-1?t[r+1]:null;a&&c&&Ko(c)?(i.push(new On(a,sm(c))),r+=2):(i.push(new On(a,{})),r++)}return new J(i,{})}function dE(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=Cl(new J([],{}),0,i))}),e}function sm(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function om(n,e,t){return n==t.path&&Ct(e,t.parameters)}var Jr="imperative",Ie=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ie||{}),it=class{constructor(e,t){this.id=e,this.url=t}},ns=class extends it{constructor(e,t,i="imperative",r=null){super(e,t),this.type=Ie.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ln=class extends it{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=Ie.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ye=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ye||{}),Sl=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Sl||{}),$t=class extends it{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=Ie.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Fn=class extends it{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=Ie.NavigationSkipped}},is=class extends it{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=Ie.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Yo=class extends it{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Ie.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rl=class extends it{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Ie.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pl=class extends it{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=Ie.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Dl=class extends it{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Ie.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nl=class extends it{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Ie.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kl=class{constructor(e){this.route=e,this.type=Ie.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},xl=class{constructor(e){this.route=e,this.type=Ie.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ol=class{constructor(e){this.snapshot=e,this.type=Ie.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ml=class{constructor(e){this.snapshot=e,this.type=Ie.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ll=class{constructor(e){this.snapshot=e,this.type=Ie.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fl=class{constructor(e){this.snapshot=e,this.type=Ie.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var rs=class{},Ni=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function fE(n,e){return n.providers&&!n._injector&&(n._injector=wp(n.providers,e,`Route: ${n.path}`)),n._injector??e}function yt(n){return n.outlet||j}function pE(n,e){let t=n.filter(i=>yt(i)===e);return t.push(...n.filter(i=>yt(i)!==e)),t}function us(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Vl=class{get injector(){return us(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new ia(this.rootInjector),this.attachRef=null}},ia=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Vl(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)(M(_i))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Jo=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Ul(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=Ul(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=jl(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return jl(e,this._root).map(t=>t.value)}};function Ul(n,e){if(n===e.value)return e;for(let t of e.children){let i=Ul(n,t);if(i)return i}return null}function jl(n,e){if(n===e.value)return[e];for(let t of e.children){let i=jl(n,t);if(i.length)return i.unshift(e),i}return[]}var Qe=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ci(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Xo=class extends Jo{constructor(e,t){super(e),this.snapshot=t,Xl(this,e)}toString(){return this.snapshot.toString()}};function Cm(n){let e=mE(n),t=new tt([new On("",{})]),i=new tt({}),r=new tt({}),s=new tt({}),a=new tt(""),c=new ki(t,i,s,a,r,j,n,e.root);return c.snapshot=e.root,new Xo(new Qe(c,[]),e)}function mE(n){let e={},t={},i={},r="",s=new Ri([],e,i,r,t,j,n,null,{});return new ea("",new Qe(s,[]))}var ki=class{constructor(e,t,i,r,s,a,c,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=a,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(z(d=>d[ls]))??F(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(z(e=>Di(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(z(e=>Di(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Zo(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:x(x({},e.params),n.params),data:x(x({},e.data),n.data),resolve:x(x(x(x({},n.data),e.data),r?.data),n._resolvedData)}:i={params:x({},n.params),data:x({},n.data),resolve:x(x({},n.data),n._resolvedData??{})},r&&Rm(r)&&(i.resolve[ls]=r.title),i}var Ri=class{get title(){return this.data?.[ls]}constructor(e,t,i,r,s,a,c,u,d){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=a,this.component=c,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Di(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Di(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},ea=class extends Jo{constructor(e,t){super(t),this.url=e,Xl(this,t)}toString(){return Sm(this._root)}};function Xl(n,e){e.value._routerState=n,e.children.forEach(t=>Xl(n,t))}function Sm(n){let e=n.children.length>0?` { ${n.children.map(Sm).join(", ")} } `:"";return`${n.value}${e}`}function Il(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ct(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ct(e.params,t.params)||n.paramsSubject.next(t.params),$w(e.url,t.url)||n.urlSubject.next(t.url),Ct(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Bl(n,e){let t=Ct(n.params,e.params)&&Gw(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||Bl(n.parent,e.parent))}function Rm(n){return typeof n.title=="string"||n.title===null}var gE=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=j,this.activateEvents=new kn,this.deactivateEvents=new kn,this.attachEvents=new kn,this.detachEvents=new kn,this.parentContexts=O(ia),this.location=O(vp),this.changeDetector=O(Do),this.inputBinder=O(ra,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ae(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ae(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ae(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new ae(4013,!1);this._activatedRoute=t;let r=this.location,a=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new $l(t,c,r.injector);this.activated=r.createComponent(a,{index:r.length,injector:u,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Vt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[qc]})}}return n})(),$l=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===ki?this.route:e===ia?this.childContexts:this.parent.get(e,t)}},ra=new B(""),am=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,r=pi([i.queryParams,i.params,i.data]).pipe(We(([s,a,c],u)=>(c=x(x(x({},s),a),c),u===0?F(c):Promise.resolve(c)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let a=Sp(i.component);if(!a){this.unsubscribeFromRouteData(t);return}for(let{templateName:c}of a.inputs)t.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(t,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})();function _E(n,e,t){let i=ss(n,e._root,t?t._root:void 0);return new Xo(i,e)}function ss(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=yE(n,e,t);return new Qe(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let a=s.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(c=>ss(n,c)),a}}let i=vE(e.value),r=e.children.map(s=>ss(n,s));return new Qe(i,r)}}function yE(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return ss(n,i,r);return ss(n,i)})}function vE(n){return new ki(new tt(n.url),new tt(n.params),new tt(n.queryParams),new tt(n.fragment),new tt(n.data),n.outlet,n.component,n)}var os=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Pm="ngNavigationCancelingError";function ta(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=es(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Dm(!1,Ye.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function Dm(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Pm]=!0,t.cancellationCode=e,t}function IE(n){return Nm(n)&&es(n.url)}function Nm(n){return!!n&&n[Pm]}var wE=(n,e,t,i)=>z(r=>(new zl(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),zl=class{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Il(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Ci(t);e.children.forEach(s=>{let a=s.value.outlet;this.deactivateRoutes(s,r[a],i),delete r[a]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ci(e);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,r);if(i&&i.outlet){let a=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ci(e);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Ci(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Fl(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Ml(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(Il(r),r===s)if(r.component){let a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),Il(c.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=r,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,i)}},na=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Pi=class{constructor(e,t){this.component=e,this.route=t}};function EE(n,e,t){let i=n._root,r=e?e._root:null;return Kr(i,r,t,[i.value])}function TE(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Oi(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!pp(n)?n:e.get(n):i}function Kr(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ci(e);return n.children.forEach(a=>{bE(a,s[a.value.outlet],t,i.concat([a.value]),r),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,c])=>Xr(c,t.getContext(a),r)),r}function bE(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,a=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){let u=AE(a,s,s.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new na(i)):(s.data=a.data,s._resolvedData=a._resolvedData),s.component?Kr(n,e,c?c.children:null,i,r):Kr(n,e,t,i,r),u&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new Pi(c.outlet.component,a))}else a&&Xr(e,c,r),r.canActivateChecks.push(new na(i)),s.component?Kr(n,null,c?c.children:null,i,r):Kr(n,null,t,i,r);return r}function AE(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Mn(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Mn(n.url,e.url)||!Ct(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bl(n,e)||!Ct(n.queryParams,e.queryParams);case"paramsChange":default:return!Bl(n,e)}}function Xr(n,e,t){let i=Ci(n),r=n.value;Object.entries(i).forEach(([s,a])=>{r.component?e?Xr(a,e.children.getContext(s),t):Xr(a,null,t):Xr(a,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Pi(e.outlet.component,r)):t.canDeactivateChecks.push(new Pi(null,r)):t.canDeactivateChecks.push(new Pi(null,r))}function hs(n){return typeof n=="function"}function CE(n){return typeof n=="boolean"}function SE(n){return n&&hs(n.canLoad)}function RE(n){return n&&hs(n.canActivate)}function PE(n){return n&&hs(n.canActivateChild)}function DE(n){return n&&hs(n.canDeactivate)}function NE(n){return n&&hs(n.canMatch)}function km(n){return n instanceof cp||n?.name==="EmptyError"}var qo=Symbol("INITIAL_VALUE");function xi(){return We(n=>pi(n.map(e=>e.pipe(un(1),mo(qo)))).pipe(z(e=>{for(let t of e)if(t!==!0){if(t===qo)return qo;if(t===!1||kE(t))return t}return!0}),ln(e=>e!==qo),un(1)))}function kE(n){return es(n)||n instanceof os}function xE(n,e){return nt(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:a}}=t;return a.length===0&&s.length===0?F(me(x({},t),{guardsResult:!0})):OE(a,i,r,n).pipe(nt(c=>c&&CE(c)?ME(i,s,n,e):F(c)),z(c=>me(x({},t),{guardsResult:c})))})}function OE(n,e,t,i){return qe(n).pipe(nt(r=>jE(r.component,r.route,t,e,i)),hn(r=>r!==!0,!0))}function ME(n,e,t,i){return qe(e).pipe(Nn(r=>po(FE(r.route.parent,i),LE(r.route,i),UE(n,r.path,t),VE(n,r.route,t))),hn(r=>r!==!0,!0))}function LE(n,e){return n!==null&&e&&e(new Ll(n)),F(!0)}function FE(n,e){return n!==null&&e&&e(new Ol(n)),F(!0)}function VE(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return F(!0);let r=i.map(s=>jc(()=>{let a=us(e)??t,c=Oi(s,a),u=RE(c)?c.canActivate(e,n):ft(a,()=>c(e,n));return gn(u).pipe(hn())}));return F(r).pipe(xi())}function UE(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(a=>TE(a)).filter(a=>a!==null).map(a=>jc(()=>{let c=a.guards.map(u=>{let d=us(a.node)??t,p=Oi(u,d),m=PE(p)?p.canActivateChild(i,n):ft(d,()=>p(i,n));return gn(m).pipe(hn())});return F(c).pipe(xi())}));return F(s).pipe(xi())}function jE(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return F(!0);let a=s.map(c=>{let u=us(e)??r,d=Oi(c,u),p=DE(d)?d.canDeactivate(n,e,t,i):ft(u,()=>d(n,e,t,i));return gn(p).pipe(hn())});return F(a).pipe(xi())}function BE(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return F(!0);let s=r.map(a=>{let c=Oi(a,n),u=SE(c)?c.canLoad(e,t):ft(n,()=>c(e,t));return gn(u)});return F(s).pipe(xi(),xm(i))}function xm(n){return rp(de(e=>{if(typeof e!="boolean")throw ta(n,e)}),z(e=>e===!0))}function $E(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return F(!0);let s=r.map(a=>{let c=Oi(a,n),u=NE(c)?c.canMatch(e,t):ft(n,()=>c(e,t));return gn(u)});return F(s).pipe(xi(),xm(i))}var as=class{constructor(e){this.segmentGroup=e||null}},cs=class extends Error{constructor(e){super(),this.urlTree=e}};function Ai(n){return Pr(new as(n))}function zE(n){return Pr(new ae(4e3,!1))}function qE(n){return Pr(Dm(!1,Ye.GuardRejected))}var ql=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return F(i);if(r.numberOfChildren>1||!r.children[j])return zE(`${e.redirectTo}`);r=r.children[j]}}applyRedirectCommands(e,t,i,r,s){if(typeof t!="string"){let c=t,{queryParams:u,fragment:d,routeConfig:p,url:m,outlet:b,params:R,data:S,title:N}=r,D=ft(s,()=>c({params:R,data:S,queryParams:u,fragment:d,routeConfig:p,url:m,outlet:b,title:N}));if(D instanceof zt)throw new cs(D);t=D}let a=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new cs(a);return a}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new zt(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);i[r]=t[c]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),a={};return Object.entries(t.children).forEach(([c,u])=>{a[c]=this.createSegmentGroup(e,u,i,r)}),new J(s,a)}createSegments(e,t,i,r){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new ae(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},Wl={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function WE(n,e,t,i,r){let s=Om(n,e,t);return s.matched?(i=fE(e,i),$E(i,e,t,r).pipe(z(a=>a===!0?s:x({},Wl)))):F(s)}function Om(n,e,t){if(e.path==="**")return GE(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?x({},Wl):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||Bw)(t,n,e);if(!r)return x({},Wl);let s={};Object.entries(r.posParams??{}).forEach(([c,u])=>{s[c]=u.path});let a=r.consumed.length>0?x(x({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function GE(n){return{matched:!0,parameters:n.length>0?fm(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function cm(n,e,t,i){return t.length>0&&QE(n,t,i)?{segmentGroup:new J(e,KE(i,new J(t,n.children))),slicedSegments:[]}:t.length===0&&YE(n,t,i)?{segmentGroup:new J(n.segments,HE(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new J(n.segments,n.children),slicedSegments:t}}function HE(n,e,t,i){let r={};for(let s of t)if(sa(n,e,s)&&!i[yt(s)]){let a=new J([],{});r[yt(s)]=a}return x(x({},i),r)}function KE(n,e){let t={};t[j]=e;for(let i of n)if(i.path===""&&yt(i)!==j){let r=new J([],{});t[yt(i)]=r}return t}function QE(n,e,t){return t.some(i=>sa(n,e,i)&&yt(i)!==j)}function YE(n,e,t){return t.some(i=>sa(n,e,i))}function sa(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function JE(n,e,t){return e.length===0&&!n.children[t]}var Gl=class{};function XE(n,e,t,i,r,s,a="emptyOnly"){return new Hl(n,e,t,i,r,a,s).recognize()}var ZE=31,Hl=class{constructor(e,t,i,r,s,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.applyRedirects=new ql(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ae(4002,`'${e.segmentGroup}'`)}recognize(){let e=cm(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(z(({children:t,rootSnapshot:i})=>{let r=new Qe(i,t),s=new ea("",r),a=oE(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),{state:s,tree:a}}))}match(e){let t=new Ri([],Object.freeze({}),Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),j,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,j,t).pipe(z(i=>({children:i,rootSnapshot:t})),mi(i=>{if(i instanceof cs)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof as?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,s):this.processSegment(e,t,i,i.segments,r,!0,s).pipe(z(a=>a instanceof Qe?[a]:[]))}processChildren(e,t,i,r){let s=[];for(let a of Object.keys(i.children))a==="primary"?s.unshift(a):s.push(a);return qe(s).pipe(Nn(a=>{let c=i.children[a],u=pE(t,a);return this.processSegmentGroup(e,u,c,a,r)}),dp((a,c)=>(a.push(...c),a)),Bc(null),hp(),nt(a=>{if(a===null)return Ai(i);let c=Mm(a);return eT(c),F(c)}))}processSegment(e,t,i,r,s,a,c){return qe(t).pipe(Nn(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,i,r,s,a,c).pipe(mi(d=>{if(d instanceof as)return F(null);throw d}))),hn(u=>!!u),mi(u=>{if(km(u))return JE(i,r,s)?F(new Gl):Ai(i);throw u}))}processSegmentAgainstRoute(e,t,i,r,s,a,c,u){return yt(i)!==a&&(a===j||!sa(r,s,i))?Ai(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,a,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,a,u):Ai(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,a,c){let{matched:u,parameters:d,consumedSegments:p,positionalParamSegments:m,remainingSegments:b}=Om(t,r,s);if(!u)return Ai(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>ZE&&(this.allowRedirects=!1));let R=new Ri(s,d,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,lm(r),yt(r),r.component??r._loadedComponent??null,r,um(r)),S=Zo(R,c,this.paramsInheritanceStrategy);R.params=Object.freeze(S.params),R.data=Object.freeze(S.data);let N=this.applyRedirects.applyRedirectCommands(p,r.redirectTo,m,R,e);return this.applyRedirects.lineralizeSegments(r,N).pipe(nt(D=>this.processSegment(e,i,t,D.concat(b),a,!1,c)))}matchSegmentAgainstRoute(e,t,i,r,s,a){let c=WE(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),c.pipe(We(u=>u.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(We(({routes:d})=>{let p=i._loadedInjector??e,{parameters:m,consumedSegments:b,remainingSegments:R}=u,S=new Ri(b,m,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,lm(i),yt(i),i.component??i._loadedComponent??null,i,um(i)),N=Zo(S,a,this.paramsInheritanceStrategy);S.params=Object.freeze(N.params),S.data=Object.freeze(N.data);let{segmentGroup:D,slicedSegments:Q}=cm(t,b,R,d);if(Q.length===0&&D.hasChildren())return this.processChildren(p,d,D,S).pipe(z(L=>new Qe(S,L)));if(d.length===0&&Q.length===0)return F(new Qe(S,[]));let Y=yt(i)===s;return this.processSegment(p,d,D,Q,Y?j:s,!0,S).pipe(z(L=>new Qe(S,L instanceof Qe?[L]:[])))}))):Ai(t)))}getChildConfig(e,t,i){return t.children?F({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?F({routes:t._loadedRoutes,injector:t._loadedInjector}):BE(e,t,i,this.urlSerializer).pipe(nt(r=>r?this.configLoader.loadChildren(e,t).pipe(de(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):qE(t))):F({routes:[],injector:e})}};function eT(n){n.sort((e,t)=>e.value.outlet===j?-1:t.value.outlet===j?1:e.value.outlet.localeCompare(t.value.outlet))}function tT(n){let e=n.value.routeConfig;return e&&e.path===""}function Mm(n){let e=[],t=new Set;for(let i of n){if(!tT(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=Mm(i.children);e.push(new Qe(i.value,r))}return e.filter(i=>!t.has(i))}function lm(n){return n.data||{}}function um(n){return n.resolve||{}}function nT(n,e,t,i,r,s){return nt(a=>XE(n,e,t,i,a.extractedUrl,r,s).pipe(z(({state:c,tree:u})=>me(x({},a),{targetSnapshot:c,urlAfterRedirects:u}))))}function iT(n,e){return nt(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return F(t);let s=new Set(r.map(u=>u.route)),a=new Set;for(let u of s)if(!a.has(u))for(let d of Lm(u))a.add(d);let c=0;return qe(a).pipe(Nn(u=>s.has(u)?rT(u,i,n,e):(u.data=Zo(u,u.parent,n).resolve,F(void 0))),de(()=>c++),$c(1),nt(u=>c===a.size?F(t):cn))})}function Lm(n){let e=n.children.map(t=>Lm(t)).flat();return[n,...e]}function rT(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!Rm(r)&&(s[ls]=r.title),sT(s,n,e,i).pipe(z(a=>(n._resolvedData=a,n.data=Zo(n,n.parent,t).resolve,null)))}function sT(n,e,t,i){let r=Tl(n);if(r.length===0)return F({});let s={};return qe(r).pipe(nt(a=>oT(n[a],e,t,i).pipe(hn(),de(c=>{if(c instanceof os)throw ta(new Zr,c);s[a]=c}))),$c(1),up(s),mi(a=>km(a)?cn:Pr(a)))}function oT(n,e,t,i){let r=us(e)??i,s=Oi(n,r),a=s.resolve?s.resolve(e,t):ft(r,()=>s(e,t));return gn(a)}function wl(n){return We(e=>{let t=n(e);return t?qe(t).pipe(z(()=>e)):F(e)})}var Fm=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===j);return i}getResolvedTitleForRoute(t){return t.data[ls]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:()=>O(aT),providedIn:"root"})}}return n})(),aT=(()=>{class n extends Fm{constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(M(nm))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Zl=new B("",{providedIn:"root",factory:()=>({})}),cT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Ve({type:n,selectors:[["ng-component"]],standalone:!0,features:[Ue],decls:1,vars:0,template:function(i,r){i&1&&Lr(0,"router-outlet")},dependencies:[gE],encapsulation:2})}}return n})();function eu(n){let e=n.children&&n.children.map(eu),t=e?me(x({},n),{children:e}):x({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==j&&(t.component=cT),t}var tu=new B(""),lT=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=O(nl)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return F(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=gn(t.loadComponent()).pipe(z(Vm),de(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),gi(()=>{this.componentLoaders.delete(t)})),r=new Lc(i,()=>new Ft).pipe(Mc());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return F({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=uT(i,this.compiler,t,this.onLoadEndListener).pipe(gi(()=>{this.childrenLoaders.delete(i)})),a=new Lc(s,()=>new Ft).pipe(Mc());return this.childrenLoaders.set(i,a),a}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function uT(n,e,t,i){return gn(n.loadChildren()).pipe(z(Vm),nt(r=>r instanceof Ip||Array.isArray(r)?F(r):qe(e.compileModuleAsync(r))),z(r=>{i&&i(n);let s,a,c=!1;return Array.isArray(r)?(a=r,c=!0):(s=r.create(t).injector,a=s.get(tu,[],{optional:!0,self:!0}).flat()),{routes:a.map(eu),injector:s}}))}function hT(n){return n&&typeof n=="object"&&"default"in n}function Vm(n){return hT(n)?n.default:n}var nu=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:()=>O(dT),providedIn:"root"})}}return n})(),dT=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),fT=new B("");var pT=new B(""),mT=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ft,this.transitionAbortSubject=new Ft,this.configLoader=O(lT),this.environmentInjector=O(_i),this.urlSerializer=O(Jl),this.rootContexts=O(ia),this.location=O(ko),this.inputBindingEnabled=O(ra,{optional:!0})!==null,this.titleStrategy=O(Fm),this.options=O(Zl,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=O(nu),this.createViewTransition=O(fT,{optional:!0}),this.navigationErrorHandler=O(pT,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>F(void 0),this.rootComponentType=null;let t=r=>this.events.next(new kl(r)),i=r=>this.events.next(new xl(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(me(x(x({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,r){return this.transitions=new tt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Jr,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ln(s=>s.id!==0),z(s=>me(x({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),We(s=>{let a=!1,c=!1;return F(s).pipe(We(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ye.SupersededByNewNavigation),cn;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?me(x({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&p!=="reload"){let m="";return this.events.next(new Fn(u.id,this.urlSerializer.serialize(u.rawUrl),m,Sl.IgnoredSameUrlNavigation)),u.resolve(!1),cn}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return F(u).pipe(We(m=>{let b=this.transitions?.getValue();return this.events.next(new ns(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),b!==this.transitions?.getValue()?cn:Promise.resolve(m)}),nT(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),de(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=me(x({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let b=new Yo(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(b)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:m,extractedUrl:b,source:R,restoredState:S,extras:N}=u,D=new ns(m,this.urlSerializer.serialize(b),R,S);this.events.next(D);let Q=Cm(this.rootComponentType).snapshot;return this.currentTransition=s=me(x({},u),{targetSnapshot:Q,urlAfterRedirects:b,extras:me(x({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=b,F(s)}else{let m="";return this.events.next(new Fn(u.id,this.urlSerializer.serialize(u.extractedUrl),m,Sl.IgnoredByUrlHandlingStrategy)),u.resolve(!1),cn}}),de(u=>{let d=new Rl(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),z(u=>(this.currentTransition=s=me(x({},u),{guards:EE(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),xE(this.environmentInjector,u=>this.events.next(u)),de(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw ta(this.urlSerializer,u.guardsResult);let d=new Pl(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),ln(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Ye.GuardRejected),!1)),wl(u=>{if(u.guards.canActivateChecks.length)return F(u).pipe(de(d=>{let p=new Dl(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}),We(d=>{let p=!1;return F(d).pipe(iT(this.paramsInheritanceStrategy,this.environmentInjector),de({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(d,"",Ye.NoDataFromResolver)}}))}),de(d=>{let p=new Nl(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}))}),wl(u=>{let d=p=>{let m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(de(b=>{p.component=b}),z(()=>{})));for(let b of p.children)m.push(...d(b));return m};return pi(d(u.targetSnapshot.root)).pipe(Bc(null),un(1))}),wl(()=>this.afterPreactivation()),We(()=>{let{currentSnapshot:u,targetSnapshot:d}=s,p=this.createViewTransition?.(this.environmentInjector,u.root,d.root);return p?qe(p).pipe(z(()=>s)):F(s)}),z(u=>{let d=_E(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=me(x({},u),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),de(()=>{this.events.next(new rs)}),wE(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),un(1),de({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ln(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),go(this.transitionAbortSubject.pipe(de(u=>{throw u}))),gi(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",Ye.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),mi(u=>{if(c=!0,Nm(u))this.events.next(new $t(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),IE(u)?this.events.next(new Ni(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let d=new is(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let p=ft(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(p instanceof os){let{message:m,cancellationCode:b}=ta(this.urlSerializer,p);this.events.next(new $t(s.id,this.urlSerializer.serialize(s.extractedUrl),m,b)),this.events.next(new Ni(p.redirectTo,p.navigationBehaviorOptions))}else{this.events.next(d);let m=t.errorHandler(u);s.resolve(!!m)}}catch(p){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(p)}}return cn}))}))}cancelNavigationTransition(t,i,r){let s=new $t(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function gT(n){return n!==Jr}var _T=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:()=>O(yT),providedIn:"root"})}}return n})(),Kl=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},yT=(()=>{class n extends Kl{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Wc(n)))(r||n)}})()}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Um=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:()=>O(vT),providedIn:"root"})}}return n})(),vT=(()=>{class n extends Um{constructor(){super(...arguments),this.location=O(ko),this.urlSerializer=O(Jl),this.options=O(Zl,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=O(nu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new zt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Cm(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof ns)this.stateMemento=this.createStateMemento();else if(t instanceof Fn)this.rawUrlTree=i.initialUrl;else if(t instanceof Yo){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else t instanceof rs?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof $t&&(t.code===Ye.GuardRejected||t.code===Ye.NoDataFromResolver)?this.restoreHistory(i):t instanceof is?this.restoreHistory(i,!0):t instanceof Ln&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let r=t instanceof zt?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let s=this.browserPageId,a=x(x({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(r,"",a)}else{let s=x(x({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",s)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Wc(n)))(r||n)}})()}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Qr=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Qr||{});function IT(n,e){n.events.pipe(ln(t=>t instanceof Ln||t instanceof $t||t instanceof is||t instanceof Fn),z(t=>t instanceof Ln||t instanceof Fn?Qr.COMPLETE:(t instanceof $t?t.code===Ye.Redirect||t.code===Ye.SupersededByNewNavigation:!1)?Qr.REDIRECTING:Qr.FAILED),ln(t=>t!==Qr.REDIRECTING),un(1)).subscribe(()=>{e()})}function wT(n){throw n}var ET={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},jm=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=O(Ro),this.stateManager=O(Um),this.options=O(Zl,{optional:!0})||{},this.pendingTasks=O(_o),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=O(mT),this.urlSerializer=O(Jl),this.location=O(ko),this.urlHandlingStrategy=O(nu),this._events=new Ft,this.errorHandler=this.options.errorHandler||wT,this.navigated=!1,this.routeReuseStrategy=O(_T),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=O(tu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!O(ra,{optional:!0}),this.eventsSubscription=new ip,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof $t&&i.code!==Ye.Redirect&&i.code!==Ye.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ln)this.navigated=!0;else if(i instanceof Ni){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),u=x({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||gT(r.source)},a);this.scheduleNavigation(c,Jr,null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}AT(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Jr,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,r){let s={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let u=x({},r);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(t);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(eu),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,d=u?this.currentUrlTree.fragment:a,p=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":p=x(x({},this.currentUrlTree.queryParams),s);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let b=r?r.snapshot:this.routerState.snapshot.root;m=Em(b)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),m=this.currentUrlTree.root}return Tm(m,t,p,d??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=es(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Jr,null,i)}navigate(t,i={skipLocationChange:!1}){return bT(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=x({},ET):i===!1?r=x({},TT):r=i,es(t))return im(this.currentUrlTree,t,r);let s=this.parseUrl(t);return im(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(t,i,r,s,a){if(this.disposed)return Promise.resolve(!1);let c,u,d;a?(c=a.resolve,u=a.reject,d=a.promise):d=new Promise((m,b)=>{c=m,u=b});let p=this.pendingTasks.add();return IT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function bT(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ae(4008,!1)}function AT(n){return!(n instanceof rs)&&!(n instanceof Ni)}var CT=new B("");function Bm(n,...e){return Me([{provide:tu,multi:!0,useValue:n},[],{provide:ki,useFactory:ST,deps:[jm]},{provide:tl,multi:!0,useFactory:PT},e.map(t=>t.\u0275providers)])}function ST(n){return n.routerState.root}function RT(n,e){return{\u0275kind:n,\u0275providers:e}}function PT(){let n=O(gt);return e=>{let t=n.get(Po);if(e!==t.components[0])return;let i=n.get(jm),r=n.get(DT);n.get(NT)===1&&i.initialNavigation(),n.get(kT,null,zc.Optional)?.setUpPreloading(),n.get(CT,null,zc.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var DT=new B("",{factory:()=>new Ft}),NT=new B("",{providedIn:"root",factory:()=>1});var kT=new B("");function $m(){return RT(8,[am,{provide:ra,useExisting:am}])}var zm=[];var iu=new B("basePath");var Wm={apiRoot:"http://localhost:5000",firebaseConfig:{apiKey:"AIzaSyBj7JNt2Mv68ItGqnQXgK5I0RFvcklzteI",authDomain:"fir-demo-9327e.firebaseapp.com",projectId:"fir-demo-9327e",storageBucket:"fir-demo-9327e.firebasestorage.app",messagingSenderId:"560572989170",appId:"1:560572989170:web:476a7e61b14503a1c61a6b",measurementId:"G-MP9JS8CWPG"}};var OT=(()=>{class n extends Fo{constructor(t,i,r){super(t,i,r)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(i){return new(i||n)(M(ce),M(Vr),M(Lo))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})();function MT(){return new xp}function LT(n,e,t){return new Mp(n,e,t)}var Gm=[{provide:Lo,useFactory:MT},{provide:Fo,useClass:OT},{provide:vi,useFactory:LT,deps:[bi,Fo,Z]}],FT=[{provide:Vr,useFactory:()=>new Op},{provide:yi,useValue:"BrowserAnimations"},...Gm],ek=[{provide:Vr,useClass:kp},{provide:yi,useValue:"NoopAnimations"},...Gm];function Hm(){return Or("NgEagerAnimations"),[...FT]}var Km="18.5.5",Qm="2024-11-16";var VT="@",UT=(()=>{class n{constructor(t,i,r,s,a){this.doc=t,this.delegate=i,this.zone=r,this.animationType=s,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=O(yp,{optional:!0}),this.loadingSchedulerFn=O(jT,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-KD2VNDP6.js").then(r=>r),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(t):i=t(),i.catch(r=>{throw new ae(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc);let a=new s(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(t,i){let r=this.delegate.createRenderer(t,i);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let s=new ru(r);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let c=a.createRenderer(t,i);s.use(c),this.scheduler?.notify(10)}).catch(a=>{s.use(r)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(i){Gc()}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})(),ru=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,i,r){this.delegate.insertBefore(e,t,i,r)}removeChild(e,t,i){this.delegate.removeChild(e,t,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(e,t,i)),this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.shouldReplay(t)&&this.replay.push(r=>r.listen(e,t,i)),this.delegate.listen(e,t,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(VT)}},jT=new B("");function Ym(n="animations"){return Or("NgAsyncAnimations"),Me([{provide:vi,useFactory:(e,t,i)=>new UT(e,t,i,n),deps:[ce,bi,Z]},{provide:yi,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Du={};HI(Du,{FirebaseError:()=>je,SDK_VERSION:()=>Ze,_DEFAULT_ENTRY_NAME:()=>Pt,_addComponent:()=>ji,_addOrOverwriteComponent:()=>Pu,_apps:()=>_n,_clearComponents:()=>Ub,_components:()=>Ui,_getProvider:()=>Wt,_isFirebaseApp:()=>bg,_isFirebaseServerApp:()=>Dt,_registerComponent:()=>Xe,_removeServiceInstance:()=>Tg,_serverApps:()=>Vi,deleteApp:()=>Is,getApp:()=>Gt,getApps:()=>vs,initializeApp:()=>Bi,initializeServerApp:()=>Ag,onLog:()=>ga,registerVersion:()=>X,setLogLevel:()=>_a});var ou={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var k=function(n,e){if(!n)throw Un(e)},Un=function(n){return new Error("Firebase Database ("+ou.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var Xm=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},BT=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],a=n[t++],c=n[t++],u=((r&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],a=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},aa={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],a=r+1<n.length,c=a?n[r+1]:0,u=r+2<n.length,d=u?n[r+2]:0,p=s>>2,m=(s&3)<<4|c>>4,b=(c&15)<<2|d>>6,R=d&63;u||(R=64,a||(b=64)),i.push(t[p],t[m],t[b],t[R])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Xm(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):BT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;let d=r<n.length?t[n.charAt(r)]:64;++r;let m=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||c==null||d==null||m==null)throw new au;let b=s<<2|c>>4;if(i.push(b),d!==64){let R=c<<4&240|d>>2;if(i.push(R),m!==64){let S=d<<6&192|m;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},au=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},lu=function(n){let e=Xm(n);return aa.encodeByteArray(e,!0)},ds=function(n){return lu(n).replace(/\./g,"")},fs=function(n){try{return aa.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Zm(n){return Li(void 0,n)}function Li(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!$T(t)||(n[t]=Li(n[t],e[t]));return n}function $T(n){return n!=="__proto__"}function uu(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var zT=()=>uu().__FIREBASE_DEFAULTS__,qT=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},WT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&fs(n[1]);return e&&JSON.parse(e)},hu=()=>{try{return zT()||qT()||WT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},du=n=>{var e,t;return(t=(e=hu())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},ca=n=>{let e=du(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},fu=()=>{var n;return(n=hu())===null||n===void 0?void 0:n.config},pu=n=>{var e;return(e=hu())===null||e===void 0?void 0:e[`_${n}`]};var Vn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function la(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ds(JSON.stringify(t)),ds(JSON.stringify(a)),""].join(".")}function we(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ps(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(we())}function eg(){return typeof window<"u"||mu()}function mu(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function tg(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ng(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ua(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ig(){let n=we();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function St(){return ou.NODE_CLIENT===!0||ou.NODE_ADMIN===!0}function gu(){try{return typeof indexedDB=="object"}catch{return!1}}function rg(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var GT="FirebaseError",je=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=GT,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rt.prototype.create)}},rt=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?HT(s,i):"Error",c=`${this.serviceName}: ${a} (${r}).`;return new je(r,c,i)}};function HT(n,e){return n.replace(KT,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var KT=/\{\$([^}]+)}/g;function Mi(n){return JSON.parse(n)}function ge(n){return JSON.stringify(n)}var sg=function(n){let e={},t={},i={},r="";try{let s=n.split(".");e=Mi(fs(s[0])||""),t=Mi(fs(s[1])||""),r=s[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:r}};var og=function(n){let e=sg(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},ag=function(n){let e=sg(n).claims;return typeof e=="object"&&e.admin===!0};function Je(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function jn(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function ms(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function gs(n,e,t){let i={};for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=e.call(t,n[r],r,n));return i}function Bn(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],a=e[r];if(Jm(s)&&Jm(a)){if(!Bn(s,a))return!1}else if(s!==a)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function Jm(n){return n!==null&&typeof n=="object"}function $n(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}var oa=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);let i=this.W_;if(typeof e=="string")for(let m=0;m<16;m++)i[m]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let m=0;m<16;m++)i[m]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let m=16;m<80;m++){let b=i[m-3]^i[m-8]^i[m-14]^i[m-16];i[m]=(b<<1|b>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],a=this.chain_[2],c=this.chain_[3],u=this.chain_[4],d,p;for(let m=0;m<80;m++){m<40?m<20?(d=c^s&(a^c),p=1518500249):(d=s^a^c,p=1859775393):m<60?(d=s&a|c&(s|a),p=2400959708):(d=s^a^c,p=3395469782);let b=(r<<5|r>>>27)+d+u+p+i[m]&4294967295;u=c,c=a,a=(s<<30|s>>>2)&4294967295,s=r,r=b}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let i=t-this.blockSize,r=0,s=this.buf_,a=this.inbuf_;for(;r<t;){if(a===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<t;)if(s[a]=e.charCodeAt(r),++a,++r,a===this.blockSize){this.compress_(s),a=0;break}}else for(;r<t;)if(s[a]=e[r],++a,++r,a===this.blockSize){this.compress_(s),a=0;break}}this.inbuf_=a,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}};function ha(n,e){let t=new cu(n,e);return t.subscribe.bind(t)}var cu=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");QT(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=su),r.error===void 0&&(r.error=su),r.complete===void 0&&(r.complete=su);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function QT(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function su(){}function cg(n,e){return`${n} failed: ${e} argument `}var lg=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);if(r>=55296&&r<=56319){let s=r-55296;i++,k(i<n.length,"Surrogate pair missing trail surrogate.");let a=n.charCodeAt(i)-56320;r=65536+(s<<10)+a}r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):r<65536?(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},_s=function(n){let e=0;for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};var ck=4*60*60*1e3;function vt(n){return n&&n._delegate?n._delegate:n}var Re=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var zn="[DEFAULT]";var da=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new Vn;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JT(e))try{this.getOrInitializeService({instanceIdentifier:zn})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=zn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return C(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=zn){return this.instances.has(e)}getOptions(e=zn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,a]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);i===c&&a.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:YT(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=zn){return this.component?this.component.multipleInstances?e:zn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function YT(n){return n===zn?void 0:n}function JT(n){return n.instantiationMode==="EAGER"}var Fi=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new da(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var _u=[],q=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(q||{}),ug={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},XT=q.INFO,ZT={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},eb=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=ZT[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},st=class{constructor(e){this.name=e,this._logLevel=XT,this._logHandler=eb,this._userLogHandler=null,_u.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in q))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ug[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...e),this._logHandler(this,q.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...e),this._logHandler(this,q.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,q.INFO,...e),this._logHandler(this,q.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,q.WARN,...e),this._logHandler(this,q.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...e),this._logHandler(this,q.ERROR,...e)}};function hg(n){_u.forEach(e=>{e.setLogLevel(n)})}function dg(n,e){for(let t of _u){let i=null;e&&e.level&&(i=ug[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(r,s,...a)=>{let c=a.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch{return null}}).filter(u=>u).join(" ");s>=(i??r.logLevel)&&n({level:q[s].toLowerCase(),message:c,args:a,type:r.name})}}}var tb=(n,e)=>e.some(t=>n instanceof t),fg,pg;function nb(){return fg||(fg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ib(){return pg||(pg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var mg=new WeakMap,vu=new WeakMap,gg=new WeakMap,yu=new WeakMap,wu=new WeakMap;function rb(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Rt(n.result)),r()},a=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&mg.set(t,n)}).catch(()=>{}),wu.set(e,n),e}function sb(n){if(vu.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),r()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});vu.set(n,e)}var Iu={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return vu.get(n);if(e==="objectStoreNames")return n.objectStoreNames||gg.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Rt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function _g(n){Iu=n(Iu)}function ob(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(fa(this),e,...t);return gg.set(i,e.sort?e.sort():[e]),Rt(i)}:ib().includes(n)?function(...e){return n.apply(fa(this),e),Rt(mg.get(this))}:function(...e){return Rt(n.apply(fa(this),e))}}function ab(n){return typeof n=="function"?ob(n):(n instanceof IDBTransaction&&sb(n),tb(n,nb())?new Proxy(n,Iu):n)}function Rt(n){if(n instanceof IDBRequest)return rb(n);if(yu.has(n))return yu.get(n);let e=ab(n);return e!==n&&(yu.set(n,e),wu.set(e,n)),e}var fa=n=>wu.get(n);function vg(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let a=indexedDB.open(n,e),c=Rt(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Rt(a.result),u.oldVersion,u.newVersion,Rt(a.transaction),u)}),t&&a.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var cb=["get","getKey","getAll","getAllKeys","count"],lb=["put","add","delete","clear"],Eu=new Map;function yg(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Eu.get(e))return Eu.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=lb.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||cb.includes(t)))return;let s=function(a,...c){return C(this,null,function*(){let u=this.transaction(a,r?"readwrite":"readonly"),d=u.store;return i&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),r&&u.done]))[0]})};return Eu.set(e,s),s}_g(n=>me(x({},n),{get:(e,t,i)=>yg(e,t)||n.get(e,t,i),has:(e,t)=>!!yg(e,t)||n.has(e,t)}));var bu=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ub(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function ub(n){let e=n.getComponent();return e?.type==="VERSION"}var pa="@firebase/app",Au="0.10.13";var qt=new st("@firebase/app"),hb="@firebase/app-compat",db="@firebase/analytics-compat",fb="@firebase/analytics",pb="@firebase/app-check-compat",mb="@firebase/app-check",gb="@firebase/auth",_b="@firebase/auth-compat",yb="@firebase/database",vb="@firebase/data-connect",Ib="@firebase/database-compat",wb="@firebase/functions",Eb="@firebase/functions-compat",Tb="@firebase/installations",bb="@firebase/installations-compat",Ab="@firebase/messaging",Cb="@firebase/messaging-compat",Sb="@firebase/performance",Rb="@firebase/performance-compat",Pb="@firebase/remote-config",Db="@firebase/remote-config-compat",Nb="@firebase/storage",kb="@firebase/storage-compat",xb="@firebase/firestore",Ob="@firebase/vertexai-preview",Mb="@firebase/firestore-compat",Lb="firebase",Fb="10.14.1";var Pt="[DEFAULT]",Vb={[pa]:"fire-core",[hb]:"fire-core-compat",[fb]:"fire-analytics",[db]:"fire-analytics-compat",[mb]:"fire-app-check",[pb]:"fire-app-check-compat",[gb]:"fire-auth",[_b]:"fire-auth-compat",[yb]:"fire-rtdb",[vb]:"fire-data-connect",[Ib]:"fire-rtdb-compat",[wb]:"fire-fn",[Eb]:"fire-fn-compat",[Tb]:"fire-iid",[bb]:"fire-iid-compat",[Ab]:"fire-fcm",[Cb]:"fire-fcm-compat",[Sb]:"fire-perf",[Rb]:"fire-perf-compat",[Pb]:"fire-rc",[Db]:"fire-rc-compat",[Nb]:"fire-gcs",[kb]:"fire-gcs-compat",[xb]:"fire-fst",[Mb]:"fire-fst-compat",[Ob]:"fire-vertex","fire-js":"fire-js",[Lb]:"fire-js-all"};var _n=new Map,Vi=new Map,Ui=new Map;function ji(n,e){try{n.container.addComponent(e)}catch(t){qt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Pu(n,e){n.container.addOrOverwriteComponent(e)}function Xe(n){let e=n.name;if(Ui.has(e))return qt.debug(`There were multiple attempts to register component ${e}.`),!1;Ui.set(e,n);for(let t of _n.values())ji(t,n);for(let t of Vi.values())ji(t,n);return!0}function Wt(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Tg(n,e,t=Pt){Wt(n,e).clearInstance(t)}function bg(n){return n.options!==void 0}function Dt(n){return n.settings!==void 0}function Ub(){Ui.clear()}var jb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ot=new rt("app","Firebase",jb);var ma=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Re("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ot.create("app-deleted",{appName:this._name})}};var Cu=class extends ma{constructor(e,t,i,r){let s=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,a={name:i,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,a,r);else{let c=e;super(c.options,a,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},t),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,X(pa,Au,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Is(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw ot.create("server-app-deleted")}};var Ze=Fb;function Bi(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:Pt,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw ot.create("bad-app-name",{appName:String(r)});if(t||(t=fu()),!t)throw ot.create("no-options");let s=_n.get(r);if(s){if(Bn(t,s.options)&&Bn(i,s.config))return s;throw ot.create("duplicate-app",{appName:r})}let a=new Fi(r);for(let u of Ui.values())a.addComponent(u);let c=new ma(t,i,a);return _n.set(r,c),c}function Ag(n,e){if(eg()&&!mu())throw ot.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;bg(n)?t=n.options:t=n;let i=Object.assign(Object.assign({},e),t);i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;let r=d=>[...d].reduce((p,m)=>Math.imul(31,p)+m.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw ot.create("finalization-registry-not-supported",{});let s=""+r(JSON.stringify(i)),a=Vi.get(s);if(a)return a.incRefCount(e.releaseOnDeref),a;let c=new Fi(s);for(let d of Ui.values())c.addComponent(d);let u=new Cu(t,e,s,c);return Vi.set(s,u),u}function Gt(n=Pt){let e=_n.get(n);if(!e&&n===Pt&&fu())return Bi();if(!e)throw ot.create("no-app",{appName:n});return e}function vs(){return Array.from(_n.values())}function Is(n){return C(this,null,function*(){let e=!1,t=n.name;_n.has(t)?(e=!0,_n.delete(t)):Vi.has(t)&&n.decRefCount()<=0&&(Vi.delete(t),e=!0),e&&(yield Promise.all(n.container.getProviders().map(i=>i.delete())),n.isDeleted=!0)})}function X(n,e,t){var i;let r=(i=Vb[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){let c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qt.warn(c.join(" "));return}Xe(new Re(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function ga(n,e){if(n!==null&&typeof n!="function")throw ot.create("invalid-log-argument");dg(n,e)}function _a(n){hg(n)}var Bb="firebase-heartbeat-database",$b=1,ys="firebase-heartbeat-store",Tu=null;function Cg(){return Tu||(Tu=vg(Bb,$b,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ys)}catch(t){console.warn(t)}}}}).catch(n=>{throw ot.create("idb-open",{originalErrorMessage:n.message})})),Tu}function zb(n){return C(this,null,function*(){try{let t=(yield Cg()).transaction(ys),i=yield t.objectStore(ys).get(Sg(n));return yield t.done,i}catch(e){if(e instanceof je)qt.warn(e.message);else{let t=ot.create("idb-get",{originalErrorMessage:e?.message});qt.warn(t.message)}}})}function Ig(n,e){return C(this,null,function*(){try{let i=(yield Cg()).transaction(ys,"readwrite");yield i.objectStore(ys).put(e,Sg(n)),yield i.done}catch(t){if(t instanceof je)qt.warn(t.message);else{let i=ot.create("idb-set",{originalErrorMessage:t?.message});qt.warn(i.message)}}})}function Sg(n){return`${n.name}!${n.options.appId}`}var qb=1024,Wb=30*24*60*60*1e3,Su=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Ru(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return C(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=wg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let c=new Date(a.date).valueOf();return Date.now()-c<=Wb}),this._storage.overwrite(this._heartbeatsCache))}catch(i){qt.warn(i)}})}getHeartbeatsHeader(){return C(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=wg(),{heartbeatsToSend:i,unsentEntries:r}=Gb(this._heartbeatsCache.heartbeats),s=ds(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return qt.warn(t),""}})}};function wg(){return new Date().toISOString().substring(0,10)}function Gb(n,e=qb){let t=[],i=n.slice();for(let r of n){let s=t.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),Eg(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),Eg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var Ru=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return C(this,null,function*(){return gu()?rg().then(()=>!0).catch(()=>!1):!1})}read(){return C(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield zb(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return C(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Ig(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return C(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Ig(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function Eg(n){return ds(JSON.stringify({version:2,heartbeats:n})).length}function Hb(n){Xe(new Re("platform-logger",e=>new bu(e),"PRIVATE")),Xe(new Re("heartbeat",e=>new Su(e),"PRIVATE")),X(pa,Au,n),X(pa,Au,"esm2017"),X("fire-js","")}Hb("");var Kb="firebase",Qb="10.14.1";X(Kb,Qb,"app");var at=new Fr("ANGULARFIRE2_VERSION");function zi(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(a=>a.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Wn=(n,e)=>{let t=e?[e]:vs(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(a=>{i.includes(a)||i.push(a)})}),i},yn=class{constructor(){return Wn(Yb)}},Yb="app-check";function $i(){}var ya=class{zone;delegate;constructor(e,t=op){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,s=function(a){r.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(s,t,i)}},Nu=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",$i,{},$i,$i)),t.pipe(de({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},vn=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new ya(Zone.current)),this.insideAngular=t.run(()=>new ya(Zone.current,sp)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(M(Z))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function va(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Jb(n){return va().ngZone.runOutsideAngular(()=>n())}function qn(n){return va().ngZone.run(()=>n())}function Xb(n){return Zb(va())(n)}function Zb(n){return function(t){return t=t.lift(new Nu(n.ngZone)),t.pipe(Uc(n.outsideAngular),Vc(n.insideAngular))}}var eA=(n,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),qn(()=>n.apply(void 0,i))},In=(n,e)=>function(){let t,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(e&&(t||=qn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",$i,{},$i,$i))),i[s]=eA(i[s],t));let r=Jb(()=>n.apply(this,i));if(!e)if(r instanceof an){let s=va();return r.pipe(Uc(s.outsideAngular),Vc(s.insideAngular))}else return qn(()=>r);return r instanceof an?r.pipe(Xb):r instanceof Promise?qn(()=>new Promise((s,a)=>r.then(c=>qn(()=>s(c)),c=>qn(()=>a(c))))):typeof r=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),r.apply(this,arguments)}:qn(()=>r)};var It=class{constructor(e){return e}},Ht=class{constructor(){return vs()}};function tA(n){return n&&n.length===1?n[0]:new It(Gt())}var ku=new B("angularfire2._apps"),nA={provide:It,useFactory:tA,deps:[[new le,ku]]},iA={provide:Ht,deps:[[new le,ku]]};function rA(n){return(e,t)=>{let i=t.get(Ge);X("angularfire",at.full,"core"),X("angularfire",at.full,"app"),X("angular",So.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new It(r)}}function Rg(n,...e){return Me([nA,iA,{provide:ku,useFactory:rA(n),multi:!0,deps:[Z,gt,vn,...e]}])}var Pg=In(Bi,!0);function qg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Wg=qg,Gg=new rt("auth","Firebase",qg());var Aa=new st("@firebase/auth");function sA(n,...e){Aa.logLevel<=q.WARN&&Aa.warn(`Auth (${Ze}): ${n}`,...e)}function wa(n,...e){Aa.logLevel<=q.ERROR&&Aa.error(`Auth (${Ze}): ${n}`,...e)}function En(n,...e){throw Xu(n,...e)}function Hn(n,...e){return Xu(n,...e)}function Hg(n,e,t){let i=Object.assign(Object.assign({},Wg()),{[e]:t});return new rt("auth","Firebase",i).create(e,{appName:n.name})}function Gn(n){return Hg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xu(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return Gg.create(n,...e)}function U(n,e,...t){if(!n)throw Xu(e,...t)}function Kt(n){let e="INTERNAL ASSERTION FAILED: "+n;throw wa(e),new Error(e)}function Tn(n,e){n||Kt(e)}function Lu(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function oA(){return Dg()==="http:"||Dg()==="https:"}function Dg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function aA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oA()||ng()||"connection"in navigator)?navigator.onLine:!0}function cA(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Kn=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Tn(t>e,"Short delay should be less than long delay!"),this.isMobile=ps()||ua()}get(){return aA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Zu(n,e){Tn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Ca=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var lA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var uA=new Kn(3e4,6e4);function eh(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Wi(s,a,c,u){return C(this,arguments,function*(n,e,t,i,r={}){return Kg(n,r,()=>C(this,null,function*(){let d={},p={};i&&(e==="GET"?p=i:d={body:JSON.stringify(i)});let m=$n(Object.assign({key:n.config.apiKey},p)).slice(1),b=yield n._getAdditionalHeaders();b["Content-Type"]="application/json",n.languageCode&&(b["X-Firebase-Locale"]=n.languageCode);let R=Object.assign({method:e,headers:b},d);return tg()||(R.referrerPolicy="no-referrer"),Ca.fetch()(Qg(n,n.config.apiHost,t,m),R)}))})}function Kg(n,e,t){return C(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},lA),e);try{let r=new Fu(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let a=yield s.json();if("needConfirmation"in a)throw Ia(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{let c=s.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ia(n,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Ia(n,"email-already-in-use",a);if(u==="USER_DISABLED")throw Ia(n,"user-disabled",a);let p=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Hg(n,p,d);En(n,p)}}catch(r){if(r instanceof je)throw r;En(n,"network-request-failed",{message:String(r)})}})}function hA(s,a,c,u){return C(this,arguments,function*(n,e,t,i,r={}){let d=yield Wi(n,e,t,i,r);return"mfaPendingCredential"in d&&En(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function Qg(n,e,t,i){let r=`${e}${t}?${i}`;return n.config.emulator?Zu(n.config,r):`${n.config.apiScheme}://${r}`}var Fu=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Hn(this.auth,"network-request-failed")),uA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ia(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=Hn(n,e,i);return r.customData._tokenResponse=t,r}function dA(n,e){return C(this,null,function*(){return Wi(n,"POST","/v1/accounts:delete",e)})}function Yg(n,e){return C(this,null,function*(){return Wi(n,"POST","/v1/accounts:lookup",e)})}function ws(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function th(n,e=!1){return C(this,null,function*(){let t=vt(n),i=yield t.getIdToken(e),r=nh(i);U(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,a=s?.sign_in_provider;return{claims:r,token:i,authTime:ws(xu(r.auth_time)),issuedAtTime:ws(xu(r.iat)),expirationTime:ws(xu(r.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function xu(n){return Number(n)*1e3}function nh(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return wa("JWT malformed, contained fewer than 3 sections"),null;try{let r=fs(t);return r?JSON.parse(r):(wa("Failed to decode base64 JWT payload"),null)}catch(r){return wa("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Ng(n){let e=nh(n);return U(e,"internal-error"),U(typeof e.exp<"u","internal-error"),U(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ts(n,e,t=!1){return C(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof je&&fA(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function fA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Vu=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>C(this,null,function*(){yield this.iteration()}),t)}iteration(){return C(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var bs=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ws(this.lastLoginAt),this.creationTime=ws(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Sa(n){return C(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield Ts(n,Yg(t,{idToken:i}));U(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Jg(s.providerUserInfo):[],c=pA(n.providerData,a),u=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!c?.length,p=u?d:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new bs(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,m)})}function ih(n){return C(this,null,function*(){let e=vt(n);yield Sa(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function pA(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function Jg(n){return n.map(e=>{var{providerId:t}=e,i=Fc(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function mA(n,e){return C(this,null,function*(){let t=yield Kg(n,{},()=>C(this,null,function*(){let i=$n({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,a=Qg(n,r,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Ca.fetch()(a,{method:"POST",headers:c,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function gA(n,e){return C(this,null,function*(){return Wi(n,"POST","/v2/accounts:revokeToken",eh(n,e))})}var Es=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){U(e.idToken,"internal-error"),U(typeof e.idToken<"u","internal-error"),U(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ng(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){U(e.length!==0,"internal-error");let t=Ng(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return C(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(U(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return C(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield mA(e,t);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,a=new n;return i&&(U(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(U(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(U(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Kt("not implemented")}};function wn(n,e){U(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var qi=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=Fc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new bs(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return C(this,null,function*(){let t=yield Ts(this,this.stsTokenManager.getToken(this.auth,e));return U(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return th(this,e)}reload(){return ih(this)}_assign(e){this!==e&&(U(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return C(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Sa(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return C(this,null,function*(){if(Dt(this.auth.app))return Promise.reject(Gn(this.auth));let e=yield this.getIdToken();return yield Ts(this,dA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,a,c,u,d,p;let m=(i=t.displayName)!==null&&i!==void 0?i:void 0,b=(r=t.email)!==null&&r!==void 0?r:void 0,R=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,S=(a=t.photoURL)!==null&&a!==void 0?a:void 0,N=(c=t.tenantId)!==null&&c!==void 0?c:void 0,D=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,Q=(d=t.createdAt)!==null&&d!==void 0?d:void 0,Y=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:L,emailVerified:he,isAnonymous:ke,providerData:ue,stsTokenManager:w}=t;U(L&&w,e,"internal-error");let g=Es.fromJSON(this.name,w);U(typeof L=="string",e,"internal-error"),wn(m,e.name),wn(b,e.name),U(typeof he=="boolean",e,"internal-error"),U(typeof ke=="boolean",e,"internal-error"),wn(R,e.name),wn(S,e.name),wn(N,e.name),wn(D,e.name),wn(Q,e.name),wn(Y,e.name);let y=new n({uid:L,auth:e,email:b,emailVerified:he,displayName:m,isAnonymous:ke,photoURL:S,phoneNumber:R,tenantId:N,stsTokenManager:g,createdAt:Q,lastLoginAt:Y});return ue&&Array.isArray(ue)&&(y.providerData=ue.map(v=>Object.assign({},v))),D&&(y._redirectEventId=D),y}static _fromIdTokenResponse(e,t,i=!1){return C(this,null,function*(){let r=new Es;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Sa(s),s})}static _fromGetAccountInfoResponse(e,t,i){return C(this,null,function*(){let r=t.users[0];U(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?Jg(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!s?.length,c=new Es;c.updateFromIdToken(i);let u=new n({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new bs(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(u,d),u})}};var kg=new Map;function Qt(n){Tn(n instanceof Function,"Expected a class definition");let e=kg.get(n);return e?(Tn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,kg.set(n,e),e)}var _A=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return C(this,null,function*(){return!0})}_set(t,i){return C(this,null,function*(){this.storage[t]=i})}_get(t){return C(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return C(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),Uu=_A;function Ea(n,e,t){return`firebase:${n}:${e}:${t}`}var Ra=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Ea(this.userKey,r.apiKey,s),this.fullPersistenceKey=Ea("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return C(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?qi._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return C(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return C(this,null,function*(){if(!t.length)return new n(Qt(Uu),e,i);let r=(yield Promise.all(t.map(d=>C(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=r[0]||Qt(Uu),a=Ea(i,e.config.apiKey,e.name),c=null;for(let d of t)try{let p=yield d._get(a);if(p){let m=qi._fromJSON(e,p);d!==s&&(c=m),s=d;break}}catch{}let u=r.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,i):(s=u[0],c&&(yield s._set(a,c.toJSON())),yield Promise.all(t.map(d=>C(this,null,function*(){if(d!==s)try{yield d._remove(a)}catch{}}))),new n(s,e,i))})}};function xg(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(t_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Xg(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(i_(e))return"Blackberry";if(r_(e))return"Webos";if(Zg(e))return"Safari";if((e.includes("chrome/")||e_(e))&&!e.includes("edge/"))return"Chrome";if(n_(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function Xg(n=we()){return/firefox\//i.test(n)}function Zg(n=we()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function e_(n=we()){return/crios\//i.test(n)}function t_(n=we()){return/iemobile/i.test(n)}function n_(n=we()){return/android/i.test(n)}function i_(n=we()){return/blackberry/i.test(n)}function r_(n=we()){return/webos/i.test(n)}function rh(n=we()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function yA(n=we()){var e;return rh(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vA(){return ig()&&document.documentMode===10}function s_(n=we()){return rh(n)||n_(n)||r_(n)||i_(n)||/windows phone/i.test(n)||t_(n)}function o_(n,e=[]){let t;switch(n){case"Browser":t=xg(we());break;case"Worker":t=`${xg(we())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ze}/${i}`}var ju=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((a,c)=>{try{let u=e(s);a(u)}catch(u){c(u)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return C(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function IA(t){return C(this,arguments,function*(n,e={}){return Wi(n,"GET","/v2/passwordPolicy",eh(n,e))})}var wA=6,Bu=class{constructor(e){var t,i,r,s;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:wA,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,a,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var $u=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pa(this),this.idTokenSubscription=new Pa(this),this.beforeStateQueue=new ju(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Qt(t)),this._initializationPromise=this.queue(()=>C(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield Ra.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return C(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return C(this,null,function*(){try{let t=yield Yg(this,{idToken:e}),i=yield qi._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return C(this,null,function*(){var t;if(Dt(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=r?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!a||a===c)&&u?.user&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return U(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return C(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return C(this,null,function*(){try{yield Sa(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=cA()}_delete(){return C(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return C(this,null,function*(){if(Dt(this.app))return Promise.reject(Gn(this));let t=e?vt(e):null;return t&&U(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return C(this,null,function*(){if(!this._deleted)return e&&U(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>C(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return C(this,null,function*(){return Dt(this.app)?Promise.reject(Gn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Dt(this.app)?Promise.reject(Gn(this)):this.queue(()=>C(this,null,function*(){yield this.assertedPersistence.setPersistence(Qt(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return C(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return C(this,null,function*(){let e=yield IA(this),t=new Bu(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new rt("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return C(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield gA(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return C(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return C(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Qt(e)||this._popupRedirectResolver;U(t,this,"argument-error"),this.redirectPersistenceManager=yield Ra.create(this,[Qt(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return C(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>C(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return C(this,null,function*(){if(e===this.currentUser)return this.queue(()=>C(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),a=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(U(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,i,r);return()=>{a=!0,u()}}else{let u=e.addObserver(t);return()=>{a=!0,u()}}}directlySetCurrentUser(e){return C(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=o_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return C(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return C(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&sA(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function sh(n){return vt(n)}var Pa=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=ha(t=>this.observer=t)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var oh={loadJS(){return C(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EA(n){oh=n}function TA(n){return oh.loadJS(n)}function bA(){return oh.gapiScript}function a_(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function ah(n,e){let t=Wt(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(Bn(s,e??{}))return r;En(r,"already-initialized")}return t.initialize({options:e})}function AA(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Qt);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function ch(n,e,t){let i=sh(n);U(i._canInitEmulator,i,"emulator-config-failed"),U(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=c_(e),{host:a,port:c}=CA(e),u=c===null?"":`:${c}`;i.config.emulator={url:`${s}//${a}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||SA()}function c_(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function CA(n){let e=c_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:Og(i.substr(s.length+1))}}else{let[s,a]=i.split(":");return{host:s,port:Og(a)}}}function Og(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function SA(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Da=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Kt("not implemented")}_getIdTokenResponse(e){return Kt("not implemented")}_linkToIdToken(e,t){return Kt("not implemented")}_getReauthenticationResolver(e){return Kt("not implemented")}};function Ou(n,e){return C(this,null,function*(){return hA(n,"POST","/v1/accounts:signInWithIdp",eh(n,e))})}var Na=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var zu=class extends Na{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var As=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return C(this,null,function*(){let s=yield qi._fromIdTokenResponse(e,i,r),a=Mg(i);return new n({user:s,providerId:a,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return C(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=Mg(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function Mg(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var qu=class n extends je{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function l_(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?qu._fromErrorAndOperation(n,s,e,i):s})}function RA(n,e,t=!1){return C(this,null,function*(){let i=yield Ts(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return As._forOperation(n,"link",i)})}function PA(n,e,t=!1){return C(this,null,function*(){let{auth:i}=n;if(Dt(i.app))return Promise.reject(Gn(i));let r="reauthenticate";try{let s=yield Ts(n,l_(i,r,e,n),t);U(s.idToken,i,"internal-error");let a=nh(s.idToken);U(a,i,"internal-error");let{sub:c}=a;return U(n.uid===c,i,"user-mismatch"),As._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&En(i,"user-mismatch"),s}})}function DA(n,e,t=!1){return C(this,null,function*(){if(Dt(n.app))return Promise.reject(Gn(n));let i="signIn",r=yield l_(n,i,e),s=yield As._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})}function lh(n,e,t,i){return vt(n).onIdTokenChanged(e,t,i)}function uh(n,e,t){return vt(n).beforeAuthStateChanged(e,t)}var ka="__sak";var xa=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ka,"1"),this.storage.removeItem(ka),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var NA=1e3,kA=10,xA=(()=>{class n extends xa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=s_(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((c,u,d)=>{this.notifyListeners(c,d)});return}let r=t.key;i?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(r);!i&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);vA()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,kA):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},NA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return C(this,null,function*(){yield on(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return C(this,null,function*(){let i=yield on(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return C(this,null,function*(){yield on(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),u_=xA;var OA=(()=>{class n extends xa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),hh=OA;function MA(n){return Promise.all(n.map(e=>C(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var LA=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return C(this,null,function*(){let i=t,{eventId:r,eventType:s,data:a}=i.data,c=this.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let u=Array.from(c).map(p=>C(this,null,function*(){return p(i.origin,a)})),d=yield MA(u);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function h_(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var Wu=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return C(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((c,u)=>{let d=h_("",20);r.port1.start();let p=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(m){let b=m;if(b.data.eventId===d)switch(b.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(b.data.response);break;default:clearTimeout(p),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function Nt(){return window}function FA(n){Nt().location.href=n}function d_(){return typeof Nt().WorkerGlobalScope<"u"&&typeof Nt().importScripts=="function"}function VA(){return C(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function UA(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function jA(){return d_()?self:null}var f_="firebaseLocalStorageDb",BA=1,Oa="firebaseLocalStorage",p_="fbase_key",Qn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function La(n,e){return n.transaction([Oa],e?"readwrite":"readonly").objectStore(Oa)}function $A(){let n=indexedDB.deleteDatabase(f_);return new Qn(n).toPromise()}function Gu(){let n=indexedDB.open(f_,BA);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(Oa,{keyPath:p_})}catch(r){t(r)}}),n.addEventListener("success",()=>C(this,null,function*(){let i=n.result;i.objectStoreNames.contains(Oa)?e(i):(i.close(),yield $A(),e(yield Gu()))}))})}function Lg(n,e,t){return C(this,null,function*(){let i=La(n,!0).put({[p_]:e,value:t});return new Qn(i).toPromise()})}function zA(n,e){return C(this,null,function*(){let t=La(n,!1).get(e),i=yield new Qn(t).toPromise();return i===void 0?null:i.value})}function Fg(n,e){let t=La(n,!0).delete(e);return new Qn(t).toPromise()}var qA=800,WA=3,GA=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return C(this,null,function*(){return this.db?this.db:(this.db=yield Gu(),this.db)})}_withRetries(t){return C(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>WA)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return C(this,null,function*(){return d_()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return C(this,null,function*(){this.receiver=LA._getInstance(jA()),this.receiver._subscribe("keyChanged",(t,i)=>C(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>C(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return C(this,null,function*(){var t,i;if(this.activeServiceWorker=yield VA(),!this.activeServiceWorker)return;this.sender=new Wu(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return C(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||UA()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return C(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Gu();return yield Lg(t,ka,"1"),yield Fg(t,ka),!0}catch{}return!1})}_withPendingWrite(t){return C(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return C(this,null,function*(){return this._withPendingWrite(()=>C(this,null,function*(){return yield this._withRetries(r=>Lg(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return C(this,null,function*(){let i=yield this._withRetries(r=>zA(r,t));return this.localCache[t]=i,i})}_remove(t){return C(this,null,function*(){return this._withPendingWrite(()=>C(this,null,function*(){return yield this._withRetries(i=>Fg(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return C(this,null,function*(){let t=yield this._withRetries(s=>{let a=La(s,!1).getAll();return new Qn(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:a}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>C(this,null,function*(){return this._poll()}),qA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),m_=GA;var Kk=a_("rcb"),Qk=new Kn(3e4,6e4);function HA(n,e){return e?Qt(e):(U(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Cs=class extends Da{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ou(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ou(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ou(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function KA(n){return DA(n.auth,new Cs(n),n.bypassAuthState)}function QA(n){let{auth:e,user:t}=n;return U(t,e,"internal-error"),PA(t,new Cs(n),n.bypassAuthState)}function YA(n){return C(this,null,function*(){let{auth:e,user:t}=n;return U(t,e,"internal-error"),RA(t,new Cs(n),n.bypassAuthState)})}var Hu=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>C(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return C(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}let u={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KA;case"linkViaPopup":case"linkViaRedirect":return YA;case"reauthViaPopup":case"reauthViaRedirect":return QA;default:En(this.auth,"internal-error")}}resolve(e){Tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Yk=new Kn(2e3,1e4);var JA="pendingRedirect",Ta=new Map,Ku=class n extends Hu{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return C(this,null,function*(){let e=Ta.get(this.auth._key());if(!e){try{let i=(yield XA(this.resolver,this.auth))?yield on(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ta.set(this.auth._key(),e)}return this.bypassAuthState||Ta.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return C(this,null,function*(){if(e.type==="signInViaRedirect")return on(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,on(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return C(this,null,function*(){})}cleanUp(){}};function XA(n,e){return C(this,null,function*(){let t=tC(e),i=eC(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function ZA(n,e){Ta.set(n._key(),e)}function eC(n){return Qt(n._redirectPersistence)}function tC(n){return Ea(JA,n.config.apiKey,n.name)}function nC(n,e,t=!1){return C(this,null,function*(){if(Dt(n.app))return Promise.reject(Gn(n));let i=sh(n),r=HA(i,e),a=yield new Ku(i,r,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield i._persistUserIfCurrent(a.user),yield i._setRedirectUser(null,e)),a})}var iC=10*60*1e3,Qu=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!g_(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Hn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vg(e))}saveEventToCache(e){this.cachedEventUids.add(Vg(e)),this.lastProcessedEventTime=Date.now()}};function Vg(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function g_({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function rC(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return g_(n);default:return!1}}function sC(t){return C(this,arguments,function*(n,e={}){return Wi(n,"GET","/v1/projects",e)})}var oC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aC=/^https?/;function cC(n){return C(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield sC(n);for(let t of e)try{if(lC(t))return}catch{}En(n,"unauthorized-domain")})}function lC(n){let e=Lu(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===i}if(!aC.test(t))return!1;if(oC.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var uC=new Kn(3e4,6e4);function Ug(){let n=Nt().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function hC(n){return new Promise((e,t)=>{var i,r,s;function a(){Ug(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ug(),t(Hn(n,"network-request-failed"))},timeout:uC.get()})}if(!((r=(i=Nt().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Nt().gapi)===null||s===void 0)&&s.load)a();else{let c=a_("iframefcb");return Nt()[c]=()=>{gapi.load?a():t(Hn(n,"network-request-failed"))},TA(`${bA()}?onload=${c}`).catch(u=>t(u))}}).catch(e=>{throw ba=null,e})}var ba=null;function dC(n){return ba=ba||hC(n),ba}var fC=new Kn(5e3,15e3),pC="__/auth/iframe",mC="emulator/auth/iframe",gC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_C=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yC(n){let e=n.config;U(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Zu(e,mC):`https://${n.config.authDomain}/${pC}`,i={apiKey:e.apiKey,appName:n.name,v:Ze},r=_C.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${$n(i).slice(1)}`}function vC(n){return C(this,null,function*(){let e=yield dC(n),t=Nt().gapi;return U(t,n,"internal-error"),e.open({where:document.body,url:yC(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gC,dontclear:!0},i=>new Promise((r,s)=>C(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let a=Hn(n,"network-request-failed"),c=Nt().setTimeout(()=>{s(a)},fC.get());function u(){Nt().clearTimeout(c),r(i)}i.ping(u).then(u,()=>{s(a)})})))})}var IC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wC=500,EC=600,TC="_blank",bC="http://localhost",Ma=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function AC(n,e,t,i=wC,r=EC){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",u=Object.assign(Object.assign({},IC),{width:i.toString(),height:r.toString(),top:s,left:a}),d=we().toLowerCase();t&&(c=e_(d)?TC:t),Xg(d)&&(e=e||bC,u.scrollbars="yes");let p=Object.entries(u).reduce((b,[R,S])=>`${b}${R}=${S},`,"");if(yA(d)&&c!=="_self")return CC(e||"",c),new Ma(null);let m=window.open(e||"",c,p);U(m,n,"popup-blocked");try{m.focus()}catch{}return new Ma(m)}function CC(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var SC="__/auth/handler",RC="emulator/auth/handler",PC=encodeURIComponent("fac");function jg(n,e,t,i,r,s){return C(this,null,function*(){U(n.config.authDomain,n,"auth-domain-config-required"),U(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Ze,eventId:r};if(e instanceof Na){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",ms(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[p,m]of Object.entries(s||{}))a[p]=m}if(e instanceof zu){let p=e.getScopes().filter(m=>m!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);let c=a;for(let p of Object.keys(c))c[p]===void 0&&delete c[p];let u=yield n._getAppCheckToken(),d=u?`#${PC}=${encodeURIComponent(u)}`:"";return`${DC(n)}?${$n(c).slice(1)}${d}`})}function DC({config:n}){return n.emulator?Zu(n,RC):`https://${n.authDomain}/${SC}`}var Mu="webStorageSupport",Yu=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hh,this._completeRedirectFn=nC,this._overrideRedirectResult=ZA}_openPopup(e,t,i,r){return C(this,null,function*(){var s;Tn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let a=yield jg(e,t,i,Lu(),r);return AC(e,a,h_())})}_openRedirect(e,t,i,r){return C(this,null,function*(){yield this._originValidation(e);let s=yield jg(e,t,i,Lu(),r);return FA(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(Tn(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return C(this,null,function*(){let t=yield vC(e),i=new Qu(e);return t.register("authEvent",r=>(U(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Mu,{type:Mu},r=>{var s;let a=(s=r?.[0])===null||s===void 0?void 0:s[Mu];a!==void 0&&t(!!a),En(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=cC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return s_()||Zg()||rh()}},__=Yu;var Bg="@firebase/auth",$g="1.7.9";var Ju=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return C(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function NC(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kC(n){Xe(new Re("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=i.options;U(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});let u={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:o_(n)},d=new $u(i,r,s,u);return AA(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Xe(new Re("auth-internal",e=>{let t=sh(e.getProvider("auth").getImmediate());return(i=>new Ju(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),X(Bg,$g,NC(n)),X(Bg,$g,"esm2017")}var xC=5*60,OC=pu("authIdTokenMaxAge")||xC,zg=null,MC=n=>e=>C(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>OC)return;let r=t?.token;zg!==r&&(zg=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function dh(n=Gt()){let e=Wt(n,"auth");if(e.isInitialized())return e.getImmediate();let t=ah(n,{popupRedirectResolver:__,persistence:[m_,u_,hh]}),i=pu("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let a=MC(s.toString());uh(t,a,()=>a(t.currentUser)),lh(t,c=>a(c))}}let r=du("auth");return r&&ch(t,`http://${r}`),t}function LC(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}EA({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=Hn("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",LC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kC("Browser");var y_="auth",Ss=class{constructor(e){return e}},Yn=class{constructor(){return Wn(y_)}};var fh=new B("angularfire2.auth-instances");function DS(n,e){let t=zi(y_,n,e);return t&&new Ss(t)}function NS(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Ss(i)}}var kS={provide:Yn,deps:[[new le,fh]]},xS={provide:Ss,useFactory:DS,deps:[[new le,fh],It]};function v_(n,...e){return X("angularfire",at.full,"auth"),Me([xS,kS,{provide:fh,useFactory:NS(n),multi:!0,deps:[Z,gt,vn,Ht,[new le,yn],...e]}])}var I_=In(dh,!0);var w_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},E_={};var ph,T_;(function(){var n;function e(w,g){function y(){}y.prototype=g.prototype,w.D=g.prototype,w.prototype=new y,w.prototype.constructor=w,w.C=function(v,I,T){for(var _=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)_[Ot-2]=arguments[Ot];return g.prototype[I].apply(v,_)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(w,g,y){y||(y=0);var v=Array(16);if(typeof g=="string")for(var I=0;16>I;++I)v[I]=g.charCodeAt(y++)|g.charCodeAt(y++)<<8|g.charCodeAt(y++)<<16|g.charCodeAt(y++)<<24;else for(I=0;16>I;++I)v[I]=g[y++]|g[y++]<<8|g[y++]<<16|g[y++]<<24;g=w.g[0],y=w.g[1],I=w.g[2];var T=w.g[3],_=g+(T^y&(I^T))+v[0]+3614090360&4294967295;g=y+(_<<7&4294967295|_>>>25),_=T+(I^g&(y^I))+v[1]+3905402710&4294967295,T=g+(_<<12&4294967295|_>>>20),_=I+(y^T&(g^y))+v[2]+606105819&4294967295,I=T+(_<<17&4294967295|_>>>15),_=y+(g^I&(T^g))+v[3]+3250441966&4294967295,y=I+(_<<22&4294967295|_>>>10),_=g+(T^y&(I^T))+v[4]+4118548399&4294967295,g=y+(_<<7&4294967295|_>>>25),_=T+(I^g&(y^I))+v[5]+1200080426&4294967295,T=g+(_<<12&4294967295|_>>>20),_=I+(y^T&(g^y))+v[6]+2821735955&4294967295,I=T+(_<<17&4294967295|_>>>15),_=y+(g^I&(T^g))+v[7]+4249261313&4294967295,y=I+(_<<22&4294967295|_>>>10),_=g+(T^y&(I^T))+v[8]+1770035416&4294967295,g=y+(_<<7&4294967295|_>>>25),_=T+(I^g&(y^I))+v[9]+2336552879&4294967295,T=g+(_<<12&4294967295|_>>>20),_=I+(y^T&(g^y))+v[10]+4294925233&4294967295,I=T+(_<<17&4294967295|_>>>15),_=y+(g^I&(T^g))+v[11]+2304563134&4294967295,y=I+(_<<22&4294967295|_>>>10),_=g+(T^y&(I^T))+v[12]+1804603682&4294967295,g=y+(_<<7&4294967295|_>>>25),_=T+(I^g&(y^I))+v[13]+4254626195&4294967295,T=g+(_<<12&4294967295|_>>>20),_=I+(y^T&(g^y))+v[14]+2792965006&4294967295,I=T+(_<<17&4294967295|_>>>15),_=y+(g^I&(T^g))+v[15]+1236535329&4294967295,y=I+(_<<22&4294967295|_>>>10),_=g+(I^T&(y^I))+v[1]+4129170786&4294967295,g=y+(_<<5&4294967295|_>>>27),_=T+(y^I&(g^y))+v[6]+3225465664&4294967295,T=g+(_<<9&4294967295|_>>>23),_=I+(g^y&(T^g))+v[11]+643717713&4294967295,I=T+(_<<14&4294967295|_>>>18),_=y+(T^g&(I^T))+v[0]+3921069994&4294967295,y=I+(_<<20&4294967295|_>>>12),_=g+(I^T&(y^I))+v[5]+3593408605&4294967295,g=y+(_<<5&4294967295|_>>>27),_=T+(y^I&(g^y))+v[10]+38016083&4294967295,T=g+(_<<9&4294967295|_>>>23),_=I+(g^y&(T^g))+v[15]+3634488961&4294967295,I=T+(_<<14&4294967295|_>>>18),_=y+(T^g&(I^T))+v[4]+3889429448&4294967295,y=I+(_<<20&4294967295|_>>>12),_=g+(I^T&(y^I))+v[9]+568446438&4294967295,g=y+(_<<5&4294967295|_>>>27),_=T+(y^I&(g^y))+v[14]+3275163606&4294967295,T=g+(_<<9&4294967295|_>>>23),_=I+(g^y&(T^g))+v[3]+4107603335&4294967295,I=T+(_<<14&4294967295|_>>>18),_=y+(T^g&(I^T))+v[8]+1163531501&4294967295,y=I+(_<<20&4294967295|_>>>12),_=g+(I^T&(y^I))+v[13]+2850285829&4294967295,g=y+(_<<5&4294967295|_>>>27),_=T+(y^I&(g^y))+v[2]+4243563512&4294967295,T=g+(_<<9&4294967295|_>>>23),_=I+(g^y&(T^g))+v[7]+1735328473&4294967295,I=T+(_<<14&4294967295|_>>>18),_=y+(T^g&(I^T))+v[12]+2368359562&4294967295,y=I+(_<<20&4294967295|_>>>12),_=g+(y^I^T)+v[5]+4294588738&4294967295,g=y+(_<<4&4294967295|_>>>28),_=T+(g^y^I)+v[8]+2272392833&4294967295,T=g+(_<<11&4294967295|_>>>21),_=I+(T^g^y)+v[11]+1839030562&4294967295,I=T+(_<<16&4294967295|_>>>16),_=y+(I^T^g)+v[14]+4259657740&4294967295,y=I+(_<<23&4294967295|_>>>9),_=g+(y^I^T)+v[1]+2763975236&4294967295,g=y+(_<<4&4294967295|_>>>28),_=T+(g^y^I)+v[4]+1272893353&4294967295,T=g+(_<<11&4294967295|_>>>21),_=I+(T^g^y)+v[7]+4139469664&4294967295,I=T+(_<<16&4294967295|_>>>16),_=y+(I^T^g)+v[10]+3200236656&4294967295,y=I+(_<<23&4294967295|_>>>9),_=g+(y^I^T)+v[13]+681279174&4294967295,g=y+(_<<4&4294967295|_>>>28),_=T+(g^y^I)+v[0]+3936430074&4294967295,T=g+(_<<11&4294967295|_>>>21),_=I+(T^g^y)+v[3]+3572445317&4294967295,I=T+(_<<16&4294967295|_>>>16),_=y+(I^T^g)+v[6]+76029189&4294967295,y=I+(_<<23&4294967295|_>>>9),_=g+(y^I^T)+v[9]+3654602809&4294967295,g=y+(_<<4&4294967295|_>>>28),_=T+(g^y^I)+v[12]+3873151461&4294967295,T=g+(_<<11&4294967295|_>>>21),_=I+(T^g^y)+v[15]+530742520&4294967295,I=T+(_<<16&4294967295|_>>>16),_=y+(I^T^g)+v[2]+3299628645&4294967295,y=I+(_<<23&4294967295|_>>>9),_=g+(I^(y|~T))+v[0]+4096336452&4294967295,g=y+(_<<6&4294967295|_>>>26),_=T+(y^(g|~I))+v[7]+1126891415&4294967295,T=g+(_<<10&4294967295|_>>>22),_=I+(g^(T|~y))+v[14]+2878612391&4294967295,I=T+(_<<15&4294967295|_>>>17),_=y+(T^(I|~g))+v[5]+4237533241&4294967295,y=I+(_<<21&4294967295|_>>>11),_=g+(I^(y|~T))+v[12]+1700485571&4294967295,g=y+(_<<6&4294967295|_>>>26),_=T+(y^(g|~I))+v[3]+2399980690&4294967295,T=g+(_<<10&4294967295|_>>>22),_=I+(g^(T|~y))+v[10]+4293915773&4294967295,I=T+(_<<15&4294967295|_>>>17),_=y+(T^(I|~g))+v[1]+2240044497&4294967295,y=I+(_<<21&4294967295|_>>>11),_=g+(I^(y|~T))+v[8]+1873313359&4294967295,g=y+(_<<6&4294967295|_>>>26),_=T+(y^(g|~I))+v[15]+4264355552&4294967295,T=g+(_<<10&4294967295|_>>>22),_=I+(g^(T|~y))+v[6]+2734768916&4294967295,I=T+(_<<15&4294967295|_>>>17),_=y+(T^(I|~g))+v[13]+1309151649&4294967295,y=I+(_<<21&4294967295|_>>>11),_=g+(I^(y|~T))+v[4]+4149444226&4294967295,g=y+(_<<6&4294967295|_>>>26),_=T+(y^(g|~I))+v[11]+3174756917&4294967295,T=g+(_<<10&4294967295|_>>>22),_=I+(g^(T|~y))+v[2]+718787259&4294967295,I=T+(_<<15&4294967295|_>>>17),_=y+(T^(I|~g))+v[9]+3951481745&4294967295,w.g[0]=w.g[0]+g&4294967295,w.g[1]=w.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+I&4294967295,w.g[3]=w.g[3]+T&4294967295}i.prototype.u=function(w,g){g===void 0&&(g=w.length);for(var y=g-this.blockSize,v=this.B,I=this.h,T=0;T<g;){if(I==0)for(;T<=y;)r(this,w,T),T+=this.blockSize;if(typeof w=="string"){for(;T<g;)if(v[I++]=w.charCodeAt(T++),I==this.blockSize){r(this,v),I=0;break}}else for(;T<g;)if(v[I++]=w[T++],I==this.blockSize){r(this,v),I=0;break}}this.h=I,this.o+=g},i.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var g=1;g<w.length-8;++g)w[g]=0;var y=8*this.o;for(g=w.length-8;g<w.length;++g)w[g]=y&255,y/=256;for(this.u(w),w=Array(16),g=y=0;4>g;++g)for(var v=0;32>v;v+=8)w[y++]=this.g[g]>>>v&255;return w};function s(w,g){var y=c;return Object.prototype.hasOwnProperty.call(y,w)?y[w]:y[w]=g(w)}function a(w,g){this.h=g;for(var y=[],v=!0,I=w.length-1;0<=I;I--){var T=w[I]|0;v&&T==g||(y[I]=T,v=!1)}this.g=y}var c={};function u(w){return-128<=w&&128>w?s(w,function(g){return new a([g|0],0>g?-1:0)}):new a([w|0],0>w?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return m;if(0>w)return D(d(-w));for(var g=[],y=1,v=0;w>=y;v++)g[v]=w/y|0,y*=4294967296;return new a(g,0)}function p(w,g){if(w.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(w.charAt(0)=="-")return D(p(w.substring(1),g));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(g,8)),v=m,I=0;I<w.length;I+=8){var T=Math.min(8,w.length-I),_=parseInt(w.substring(I,I+T),g);8>T?(T=d(Math.pow(g,T)),v=v.j(T).add(d(_))):(v=v.j(y),v=v.add(d(_)))}return v}var m=u(0),b=u(1),R=u(16777216);n=a.prototype,n.m=function(){if(N(this))return-D(this).m();for(var w=0,g=1,y=0;y<this.g.length;y++){var v=this.i(y);w+=(0<=v?v:4294967296+v)*g,g*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(S(this))return"0";if(N(this))return"-"+D(this).toString(w);for(var g=d(Math.pow(w,6)),y=this,v="";;){var I=he(y,g).g;y=Q(y,I.j(g));var T=((0<y.g.length?y.g[0]:y.h)>>>0).toString(w);if(y=I,S(y))return T+v;for(;6>T.length;)T="0"+T;v=T+v}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function S(w){if(w.h!=0)return!1;for(var g=0;g<w.g.length;g++)if(w.g[g]!=0)return!1;return!0}function N(w){return w.h==-1}n.l=function(w){return w=Q(this,w),N(w)?-1:S(w)?0:1};function D(w){for(var g=w.g.length,y=[],v=0;v<g;v++)y[v]=~w.g[v];return new a(y,~w.h).add(b)}n.abs=function(){return N(this)?D(this):this},n.add=function(w){for(var g=Math.max(this.g.length,w.g.length),y=[],v=0,I=0;I<=g;I++){var T=v+(this.i(I)&65535)+(w.i(I)&65535),_=(T>>>16)+(this.i(I)>>>16)+(w.i(I)>>>16);v=_>>>16,T&=65535,_&=65535,y[I]=_<<16|T}return new a(y,y[y.length-1]&-2147483648?-1:0)};function Q(w,g){return w.add(D(g))}n.j=function(w){if(S(this)||S(w))return m;if(N(this))return N(w)?D(this).j(D(w)):D(D(this).j(w));if(N(w))return D(this.j(D(w)));if(0>this.l(R)&&0>w.l(R))return d(this.m()*w.m());for(var g=this.g.length+w.g.length,y=[],v=0;v<2*g;v++)y[v]=0;for(v=0;v<this.g.length;v++)for(var I=0;I<w.g.length;I++){var T=this.i(v)>>>16,_=this.i(v)&65535,Ot=w.i(I)>>>16,ur=w.i(I)&65535;y[2*v+2*I]+=_*ur,Y(y,2*v+2*I),y[2*v+2*I+1]+=T*ur,Y(y,2*v+2*I+1),y[2*v+2*I+1]+=_*Ot,Y(y,2*v+2*I+1),y[2*v+2*I+2]+=T*Ot,Y(y,2*v+2*I+2)}for(v=0;v<g;v++)y[v]=y[2*v+1]<<16|y[2*v];for(v=g;v<2*g;v++)y[v]=0;return new a(y,0)};function Y(w,g){for(;(w[g]&65535)!=w[g];)w[g+1]+=w[g]>>>16,w[g]&=65535,g++}function L(w,g){this.g=w,this.h=g}function he(w,g){if(S(g))throw Error("division by zero");if(S(w))return new L(m,m);if(N(w))return g=he(D(w),g),new L(D(g.g),D(g.h));if(N(g))return g=he(w,D(g)),new L(D(g.g),g.h);if(30<w.g.length){if(N(w)||N(g))throw Error("slowDivide_ only works with positive integers.");for(var y=b,v=g;0>=v.l(w);)y=ke(y),v=ke(v);var I=ue(y,1),T=ue(v,1);for(v=ue(v,2),y=ue(y,2);!S(v);){var _=T.add(v);0>=_.l(w)&&(I=I.add(y),T=_),v=ue(v,1),y=ue(y,1)}return g=Q(w,I.j(g)),new L(I,g)}for(I=m;0<=w.l(g);){for(y=Math.max(1,Math.floor(w.m()/g.m())),v=Math.ceil(Math.log(y)/Math.LN2),v=48>=v?1:Math.pow(2,v-48),T=d(y),_=T.j(g);N(_)||0<_.l(w);)y-=v,T=d(y),_=T.j(g);S(T)&&(T=b),I=I.add(T),w=Q(w,_)}return new L(I,w)}n.A=function(w){return he(this,w).h},n.and=function(w){for(var g=Math.max(this.g.length,w.g.length),y=[],v=0;v<g;v++)y[v]=this.i(v)&w.i(v);return new a(y,this.h&w.h)},n.or=function(w){for(var g=Math.max(this.g.length,w.g.length),y=[],v=0;v<g;v++)y[v]=this.i(v)|w.i(v);return new a(y,this.h|w.h)},n.xor=function(w){for(var g=Math.max(this.g.length,w.g.length),y=[],v=0;v<g;v++)y[v]=this.i(v)^w.i(v);return new a(y,this.h^w.h)};function ke(w){for(var g=w.g.length+1,y=[],v=0;v<g;v++)y[v]=w.i(v)<<1|w.i(v-1)>>>31;return new a(y,w.h)}function ue(w,g){var y=g>>5;g%=32;for(var v=w.g.length-y,I=[],T=0;T<v;T++)I[T]=0<g?w.i(T+y)>>>g|w.i(T+y+1)<<32-g:w.i(T+y);return new a(I,w.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,T_=E_.Md5=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,ph=E_.Integer=a}).apply(typeof w_<"u"?w_:typeof self<"u"?self:typeof window<"u"?window:{});var Fa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yt={};var b_,OS,A_,C_,S_,R_,P_,D_,N_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,l,h){return o==Array.prototype||o==Object.prototype||(o[l]=h.value),o};function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fa=="object"&&Fa];for(var l=0;l<o.length;++l){var h=o[l];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var i=t(this);function r(o,l){if(l)e:{var h=i;o=o.split(".");for(var f=0;f<o.length-1;f++){var E=o[f];if(!(E in h))break e;h=h[E]}o=o[o.length-1],f=h[o],l=l(f),l!=f&&l!=null&&e(h,o,{configurable:!0,writable:!0,value:l})}}function s(o,l){o instanceof String&&(o+="");var h=0,f=!1,E={next:function(){if(!f&&h<o.length){var A=h++;return{value:l(A,o[A]),done:!1}}return f=!0,{done:!0,value:void 0}}};return E[Symbol.iterator]=function(){return E},E}r("Array.prototype.values",function(o){return o||function(){return s(this,function(l,h){return h})}});var a=a||{},c=this||self;function u(o){var l=typeof o;return l=l!="object"?l:o?Array.isArray(o)?"array":l:"null",l=="array"||l=="object"&&typeof o.length=="number"}function d(o){var l=typeof o;return l=="object"&&o!=null||l=="function"}function p(o,l,h){return o.call.apply(o.bind,arguments)}function m(o,l,h){if(!o)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var E=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(E,f),o.apply(l,E)}}return function(){return o.apply(l,arguments)}}function b(o,l,h){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,b.apply(null,arguments)}function R(o,l){var h=Array.prototype.slice.call(arguments,1);return function(){var f=h.slice();return f.push.apply(f,arguments),o.apply(this,f)}}function S(o,l){function h(){}h.prototype=l.prototype,o.aa=l.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(f,E,A){for(var P=Array(arguments.length-2),te=2;te<arguments.length;te++)P[te-2]=arguments[te];return l.prototype[E].apply(f,P)}}function N(o){let l=o.length;if(0<l){let h=Array(l);for(let f=0;f<l;f++)h[f]=o[f];return h}return[]}function D(o,l){for(let h=1;h<arguments.length;h++){let f=arguments[h];if(u(f)){let E=o.length||0,A=f.length||0;o.length=E+A;for(let P=0;P<A;P++)o[E+P]=f[P]}else o.push(f)}}class Q{constructor(l,h){this.i=l,this.j=h,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function Y(o){return/^[\s\xa0]*$/.test(o)}function L(){var o=c.navigator;return o&&(o=o.userAgent)?o:""}function he(o){return he[" "](o),o}he[" "]=function(){};var ke=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function ue(o,l,h){for(let f in o)l.call(h,o[f],f,o)}function w(o,l){for(let h in o)l.call(void 0,o[h],h,o)}function g(o){let l={};for(let h in o)l[h]=o[h];return l}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v(o,l){let h,f;for(let E=1;E<arguments.length;E++){f=arguments[E];for(h in f)o[h]=f[h];for(let A=0;A<y.length;A++)h=y[A],Object.prototype.hasOwnProperty.call(f,h)&&(o[h]=f[h])}}function I(o){var l=1;o=o.split(":");let h=[];for(;0<l&&o.length;)h.push(o.shift()),l--;return o.length&&h.push(o.join(":")),h}function T(o){c.setTimeout(()=>{throw o},0)}function _(){var o=uc;let l=null;return o.g&&(l=o.g,o.g=o.g.next,o.g||(o.h=null),l.next=null),l}class Ot{constructor(){this.h=this.g=null}add(l,h){let f=ur.get();f.set(l,h),this.h?this.h.next=f:this.g=f,this.h=f}}var ur=new Q(()=>new fI,o=>o.reset());class fI{constructor(){this.next=this.g=this.h=null}set(l,h){this.h=l,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let hr,dr=!1,uc=new Ot,tf=()=>{let o=c.Promise.resolve(void 0);hr=()=>{o.then(pI)}};var pI=()=>{for(var o;o=_();){try{o.h.call(o.g)}catch(h){T(h)}var l=ur;l.j(o),100>l.h&&(l.h++,o.next=l.g,l.g=o)}dr=!1};function tn(){this.s=this.s,this.C=this.C}tn.prototype.s=!1,tn.prototype.ma=function(){this.s||(this.s=!0,this.N())},tn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function be(o,l){this.type=o,this.g=this.target=l,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var mI=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var o=!1,l=Object.defineProperty({},"passive",{get:function(){o=!0}});try{let h=()=>{};c.addEventListener("test",h,l),c.removeEventListener("test",h,l)}catch{}return o}();function fr(o,l){if(be.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,f=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=l,l=o.relatedTarget){if(ke){e:{try{he(l.nodeName);var E=!0;break e}catch{}E=!1}E||(l=null)}}else h=="mouseover"?l=o.fromElement:h=="mouseout"&&(l=o.toElement);this.relatedTarget=l,f?(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:gI[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&fr.aa.h.call(this)}}S(fr,be);var gI={2:"touch",3:"pen",4:"mouse"};fr.prototype.h=function(){fr.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var pr="closure_listenable_"+(1e6*Math.random()|0),_I=0;function yI(o,l,h,f,E){this.listener=o,this.proxy=null,this.src=l,this.type=h,this.capture=!!f,this.ha=E,this.key=++_I,this.da=this.fa=!1}function Ys(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Js(o){this.src=o,this.g={},this.h=0}Js.prototype.add=function(o,l,h,f,E){var A=o.toString();o=this.g[A],o||(o=this.g[A]=[],this.h++);var P=dc(o,l,f,E);return-1<P?(l=o[P],h||(l.fa=!1)):(l=new yI(l,this.src,A,!!f,E),l.fa=h,o.push(l)),l};function hc(o,l){var h=l.type;if(h in o.g){var f=o.g[h],E=Array.prototype.indexOf.call(f,l,void 0),A;(A=0<=E)&&Array.prototype.splice.call(f,E,1),A&&(Ys(l),o.g[h].length==0&&(delete o.g[h],o.h--))}}function dc(o,l,h,f){for(var E=0;E<o.length;++E){var A=o[E];if(!A.da&&A.listener==l&&A.capture==!!h&&A.ha==f)return E}return-1}var fc="closure_lm_"+(1e6*Math.random()|0),pc={};function nf(o,l,h,f,E){if(f&&f.once)return sf(o,l,h,f,E);if(Array.isArray(l)){for(var A=0;A<l.length;A++)nf(o,l[A],h,f,E);return null}return h=yc(h),o&&o[pr]?o.K(l,h,d(f)?!!f.capture:!!f,E):rf(o,l,h,!1,f,E)}function rf(o,l,h,f,E,A){if(!l)throw Error("Invalid event type");var P=d(E)?!!E.capture:!!E,te=gc(o);if(te||(o[fc]=te=new Js(o)),h=te.add(l,h,f,P,A),h.proxy)return h;if(f=vI(),h.proxy=f,f.src=o,f.listener=h,o.addEventListener)mI||(E=P),E===void 0&&(E=!1),o.addEventListener(l.toString(),f,E);else if(o.attachEvent)o.attachEvent(af(l.toString()),f);else if(o.addListener&&o.removeListener)o.addListener(f);else throw Error("addEventListener and attachEvent are unavailable.");return h}function vI(){function o(h){return l.call(o.src,o.listener,h)}let l=II;return o}function sf(o,l,h,f,E){if(Array.isArray(l)){for(var A=0;A<l.length;A++)sf(o,l[A],h,f,E);return null}return h=yc(h),o&&o[pr]?o.L(l,h,d(f)?!!f.capture:!!f,E):rf(o,l,h,!0,f,E)}function of(o,l,h,f,E){if(Array.isArray(l))for(var A=0;A<l.length;A++)of(o,l[A],h,f,E);else f=d(f)?!!f.capture:!!f,h=yc(h),o&&o[pr]?(o=o.i,l=String(l).toString(),l in o.g&&(A=o.g[l],h=dc(A,h,f,E),-1<h&&(Ys(A[h]),Array.prototype.splice.call(A,h,1),A.length==0&&(delete o.g[l],o.h--)))):o&&(o=gc(o))&&(l=o.g[l.toString()],o=-1,l&&(o=dc(l,h,f,E)),(h=-1<o?l[o]:null)&&mc(h))}function mc(o){if(typeof o!="number"&&o&&!o.da){var l=o.src;if(l&&l[pr])hc(l.i,o);else{var h=o.type,f=o.proxy;l.removeEventListener?l.removeEventListener(h,f,o.capture):l.detachEvent?l.detachEvent(af(h),f):l.addListener&&l.removeListener&&l.removeListener(f),(h=gc(l))?(hc(h,o),h.h==0&&(h.src=null,l[fc]=null)):Ys(o)}}}function af(o){return o in pc?pc[o]:pc[o]="on"+o}function II(o,l){if(o.da)o=!0;else{l=new fr(l,this);var h=o.listener,f=o.ha||o.src;o.fa&&mc(o),o=h.call(f,l)}return o}function gc(o){return o=o[fc],o instanceof Js?o:null}var _c="__closure_events_fn_"+(1e9*Math.random()>>>0);function yc(o){return typeof o=="function"?o:(o[_c]||(o[_c]=function(l){return o.handleEvent(l)}),o[_c])}function Ae(){tn.call(this),this.i=new Js(this),this.M=this,this.F=null}S(Ae,tn),Ae.prototype[pr]=!0,Ae.prototype.removeEventListener=function(o,l,h,f){of(this,o,l,h,f)};function xe(o,l){var h,f=o.F;if(f)for(h=[];f;f=f.F)h.push(f);if(o=o.M,f=l.type||l,typeof l=="string")l=new be(l,o);else if(l instanceof be)l.target=l.target||o;else{var E=l;l=new be(f,o),v(l,E)}if(E=!0,h)for(var A=h.length-1;0<=A;A--){var P=l.g=h[A];E=Xs(P,f,!0,l)&&E}if(P=l.g=o,E=Xs(P,f,!0,l)&&E,E=Xs(P,f,!1,l)&&E,h)for(A=0;A<h.length;A++)P=l.g=h[A],E=Xs(P,f,!1,l)&&E}Ae.prototype.N=function(){if(Ae.aa.N.call(this),this.i){var o=this.i,l;for(l in o.g){for(var h=o.g[l],f=0;f<h.length;f++)Ys(h[f]);delete o.g[l],o.h--}}this.F=null},Ae.prototype.K=function(o,l,h,f){return this.i.add(String(o),l,!1,h,f)},Ae.prototype.L=function(o,l,h,f){return this.i.add(String(o),l,!0,h,f)};function Xs(o,l,h,f){if(l=o.i.g[String(l)],!l)return!0;l=l.concat();for(var E=!0,A=0;A<l.length;++A){var P=l[A];if(P&&!P.da&&P.capture==h){var te=P.listener,ye=P.ha||P.src;P.fa&&hc(o.i,P),E=te.call(ye,f)!==!1&&E}}return E&&!f.defaultPrevented}function cf(o,l,h){if(typeof o=="function")h&&(o=b(o,h));else if(o&&typeof o.handleEvent=="function")o=b(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(o,l||0)}function lf(o){o.g=cf(()=>{o.g=null,o.i&&(o.i=!1,lf(o))},o.l);let l=o.h;o.h=null,o.m.apply(null,l)}class wI extends tn{constructor(l,h){super(),this.m=l,this.l=h,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:lf(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mr(o){tn.call(this),this.h=o,this.g={}}S(mr,tn);var uf=[];function hf(o){ue(o.g,function(l,h){this.g.hasOwnProperty(h)&&mc(l)},o),o.g={}}mr.prototype.N=function(){mr.aa.N.call(this),hf(this)},mr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vc=c.JSON.stringify,EI=c.JSON.parse,TI=class{stringify(o){return c.JSON.stringify(o,void 0)}parse(o){return c.JSON.parse(o,void 0)}};function Ic(){}Ic.prototype.h=null;function df(o){return o.h||(o.h=o.i())}function ff(){}var gr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wc(){be.call(this,"d")}S(wc,be);function Ec(){be.call(this,"c")}S(Ec,be);var Sn={},pf=null;function Zs(){return pf=pf||new Ae}Sn.La="serverreachability";function mf(o){be.call(this,Sn.La,o)}S(mf,be);function _r(o){let l=Zs();xe(l,new mf(l))}Sn.STAT_EVENT="statevent";function gf(o,l){be.call(this,Sn.STAT_EVENT,o),this.stat=l}S(gf,be);function Oe(o){let l=Zs();xe(l,new gf(l,o))}Sn.Ma="timingevent";function _f(o,l){be.call(this,Sn.Ma,o),this.size=l}S(_f,be);function yr(o,l){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){o()},l)}function vr(){this.g=!0}vr.prototype.xa=function(){this.g=!1};function bI(o,l,h,f,E,A){o.info(function(){if(o.g)if(A)for(var P="",te=A.split("&"),ye=0;ye<te.length;ye++){var K=te[ye].split("=");if(1<K.length){var Ce=K[0];K=K[1];var Se=Ce.split("_");P=2<=Se.length&&Se[1]=="type"?P+(Ce+"="+K+"&"):P+(Ce+"=redacted&")}}else P=null;else P=A;return"XMLHTTP REQ ("+f+") [attempt "+E+"]: "+l+`
`+h+`
`+P})}function AI(o,l,h,f,E,A,P){o.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+E+"]: "+l+`
`+h+`
`+A+" "+P})}function ui(o,l,h,f){o.info(function(){return"XMLHTTP TEXT ("+l+"): "+SI(o,h)+(f?" "+f:"")})}function CI(o,l){o.info(function(){return"TIMEOUT: "+l})}vr.prototype.info=function(){};function SI(o,l){if(!o.g)return l;if(!l)return null;try{var h=JSON.parse(l);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var f=h[o];if(!(2>f.length)){var E=f[1];if(Array.isArray(E)&&!(1>E.length)){var A=E[0];if(A!="noop"&&A!="stop"&&A!="close")for(var P=1;P<E.length;P++)E[P]=""}}}}return vc(h)}catch{return l}}var eo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tc;function to(){}S(to,Ic),to.prototype.g=function(){return new XMLHttpRequest},to.prototype.i=function(){return{}},Tc=new to;function nn(o,l,h,f){this.j=o,this.i=l,this.l=h,this.R=f||1,this.U=new mr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vf}function vf(){this.i=null,this.g="",this.h=!1}var If={},bc={};function Ac(o,l,h){o.L=1,o.v=so(Mt(l)),o.m=h,o.P=!0,wf(o,null)}function wf(o,l){o.F=Date.now(),no(o),o.A=Mt(o.v);var h=o.A,f=o.R;Array.isArray(f)||(f=[String(f)]),Mf(h.i,"t",f),o.C=0,h=o.j.J,o.h=new vf,o.g=Zf(o.j,h?l:null,!o.m),0<o.O&&(o.M=new wI(b(o.Y,o,o.g),o.O)),l=o.U,h=o.g,f=o.ca;var E="readystatechange";Array.isArray(E)||(E&&(uf[0]=E.toString()),E=uf);for(var A=0;A<E.length;A++){var P=nf(h,E[A],f||l.handleEvent,!1,l.h||l);if(!P)break;l.g[P.key]=P}l=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,l)):(o.u="GET",o.g.ea(o.A,o.u,null,l)),_r(),bI(o.i,o.u,o.A,o.l,o.R,o.m)}nn.prototype.ca=function(o){o=o.target;let l=this.M;l&&Lt(o)==3?l.j():this.Y(o)},nn.prototype.Y=function(o){try{if(o==this.g)e:{let Se=Lt(this.g);var l=this.g.Ba();let fi=this.g.Z();if(!(3>Se)&&(Se!=3||this.g&&(this.h.h||this.g.oa()||$f(this.g)))){this.J||Se!=4||l==7||(l==8||0>=fi?_r(3):_r(2)),Cc(this);var h=this.g.Z();this.X=h;t:if(Ef(this)){var f=$f(this.g);o="";var E=f.length,A=Lt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rn(this),Ir(this);var P="";break t}this.h.i=new c.TextDecoder}for(l=0;l<E;l++)this.h.h=!0,o+=this.h.i.decode(f[l],{stream:!(A&&l==E-1)});f.length=0,this.h.g+=o,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=h==200,AI(this.i,this.u,this.A,this.l,this.R,Se,h),this.o){if(this.T&&!this.K){t:{if(this.g){var te,ye=this.g;if((te=ye.g?ye.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(te)){var K=te;break t}}K=null}if(h=K)ui(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sc(this,h);else{this.o=!1,this.s=3,Oe(12),Rn(this),Ir(this);break e}}if(this.P){h=!0;let dt;for(;!this.J&&this.C<P.length;)if(dt=RI(this,P),dt==bc){Se==4&&(this.s=4,Oe(14),h=!1),ui(this.i,this.l,null,"[Incomplete Response]");break}else if(dt==If){this.s=4,Oe(15),ui(this.i,this.l,P,"[Invalid Chunk]"),h=!1;break}else ui(this.i,this.l,dt,null),Sc(this,dt);if(Ef(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Se!=4||P.length!=0||this.h.h||(this.s=1,Oe(16),h=!1),this.o=this.o&&h,!h)ui(this.i,this.l,P,"[Invalid Chunked Response]"),Rn(this),Ir(this);else if(0<P.length&&!this.W){this.W=!0;var Ce=this.j;Ce.g==this&&Ce.ba&&!Ce.M&&(Ce.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),xc(Ce),Ce.M=!0,Oe(11))}}else ui(this.i,this.l,P,null),Sc(this,P);Se==4&&Rn(this),this.o&&!this.J&&(Se==4?Qf(this.j,this):(this.o=!1,no(this)))}else WI(this.g),h==400&&0<P.indexOf("Unknown SID")?(this.s=3,Oe(12)):(this.s=0,Oe(13)),Rn(this),Ir(this)}}}catch{}finally{}};function Ef(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function RI(o,l){var h=o.C,f=l.indexOf(`
`,h);return f==-1?bc:(h=Number(l.substring(h,f)),isNaN(h)?If:(f+=1,f+h>l.length?bc:(l=l.slice(f,f+h),o.C=f+h,l)))}nn.prototype.cancel=function(){this.J=!0,Rn(this)};function no(o){o.S=Date.now()+o.I,Tf(o,o.I)}function Tf(o,l){if(o.B!=null)throw Error("WatchDog timer not null");o.B=yr(b(o.ba,o),l)}function Cc(o){o.B&&(c.clearTimeout(o.B),o.B=null)}nn.prototype.ba=function(){this.B=null;let o=Date.now();0<=o-this.S?(CI(this.i,this.A),this.L!=2&&(_r(),Oe(17)),Rn(this),this.s=2,Ir(this)):Tf(this,this.S-o)};function Ir(o){o.j.G==0||o.J||Qf(o.j,o)}function Rn(o){Cc(o);var l=o.M;l&&typeof l.ma=="function"&&l.ma(),o.M=null,hf(o.U),o.g&&(l=o.g,o.g=null,l.abort(),l.ma())}function Sc(o,l){try{var h=o.j;if(h.G!=0&&(h.g==o||Rc(h.h,o))){if(!o.K&&Rc(h.h,o)&&h.G==3){try{var f=h.Da.g.parse(l)}catch{f=null}if(Array.isArray(f)&&f.length==3){var E=f;if(E[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)uo(h),co(h);else break e;kc(h),Oe(18)}}else h.za=E[1],0<h.za-h.T&&37500>E[2]&&h.F&&h.v==0&&!h.C&&(h.C=yr(b(h.Za,h),6e3));if(1>=Cf(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Dn(h,11)}else if((o.K||h.g==o)&&uo(h),!Y(l))for(E=h.Da.g.parse(l),l=0;l<E.length;l++){let K=E[l];if(h.T=K[0],K=K[1],h.G==2)if(K[0]=="c"){h.K=K[1],h.ia=K[2];let Ce=K[3];Ce!=null&&(h.la=Ce,h.j.info("VER="+h.la));let Se=K[4];Se!=null&&(h.Aa=Se,h.j.info("SVER="+h.Aa));let fi=K[5];fi!=null&&typeof fi=="number"&&0<fi&&(f=1.5*fi,h.L=f,h.j.info("backChannelRequestTimeoutMs_="+f)),f=h;let dt=o.g;if(dt){let fo=dt.g?dt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fo){var A=f.h;A.g||fo.indexOf("spdy")==-1&&fo.indexOf("quic")==-1&&fo.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Pc(A,A.h),A.h=null))}if(f.D){let Oc=dt.g?dt.g.getResponseHeader("X-HTTP-Session-Id"):null;Oc&&(f.ya=Oc,ie(f.I,f.D,Oc))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),f=h;var P=o;if(f.qa=Xf(f,f.J?f.ia:null,f.W),P.K){Sf(f.h,P);var te=P,ye=f.L;ye&&(te.I=ye),te.B&&(Cc(te),no(te)),f.g=P}else Hf(f);0<h.i.length&&lo(h)}else K[0]!="stop"&&K[0]!="close"||Dn(h,7);else h.G==3&&(K[0]=="stop"||K[0]=="close"?K[0]=="stop"?Dn(h,7):Nc(h):K[0]!="noop"&&h.l&&h.l.ta(K),h.v=0)}}_r(4)}catch{}}var PI=class{constructor(o,l){this.g=o,this.map=l}};function bf(o){this.l=o||10,c.PerformanceNavigationTiming?(o=c.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Af(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Cf(o){return o.h?1:o.g?o.g.size:0}function Rc(o,l){return o.h?o.h==l:o.g?o.g.has(l):!1}function Pc(o,l){o.g?o.g.add(l):o.h=l}function Sf(o,l){o.h&&o.h==l?o.h=null:o.g&&o.g.has(l)&&o.g.delete(l)}bf.prototype.cancel=function(){if(this.i=Rf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let o of this.g.values())o.cancel();this.g.clear()}};function Rf(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let l=o.i;for(let h of o.g.values())l=l.concat(h.D);return l}return N(o.i)}function DI(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var l=[],h=o.length,f=0;f<h;f++)l.push(o[f]);return l}l=[],h=0;for(f in o)l[h++]=o[f];return l}function NI(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var l=[];o=o.length;for(var h=0;h<o;h++)l.push(h);return l}l=[],h=0;for(let f in o)l[h++]=f;return l}}}function Pf(o,l){if(o.forEach&&typeof o.forEach=="function")o.forEach(l,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,l,void 0);else for(var h=NI(o),f=DI(o),E=f.length,A=0;A<E;A++)l.call(void 0,f[A],h&&h[A],o)}var Df=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kI(o,l){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var f=o[h].indexOf("="),E=null;if(0<=f){var A=o[h].substring(0,f);E=o[h].substring(f+1)}else A=o[h];l(A,E?decodeURIComponent(E.replace(/\+/g," ")):"")}}}function Pn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Pn){this.h=o.h,io(this,o.j),this.o=o.o,this.g=o.g,ro(this,o.s),this.l=o.l;var l=o.i,h=new Tr;h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),Nf(this,h),this.m=o.m}else o&&(l=String(o).match(Df))?(this.h=!1,io(this,l[1]||"",!0),this.o=wr(l[2]||""),this.g=wr(l[3]||"",!0),ro(this,l[4]),this.l=wr(l[5]||"",!0),Nf(this,l[6]||"",!0),this.m=wr(l[7]||"")):(this.h=!1,this.i=new Tr(null,this.h))}Pn.prototype.toString=function(){var o=[],l=this.j;l&&o.push(Er(l,kf,!0),":");var h=this.g;return(h||l=="file")&&(o.push("//"),(l=this.o)&&o.push(Er(l,kf,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(Er(h,h.charAt(0)=="/"?MI:OI,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",Er(h,FI)),o.join("")};function Mt(o){return new Pn(o)}function io(o,l,h){o.j=h?wr(l,!0):l,o.j&&(o.j=o.j.replace(/:$/,""))}function ro(o,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);o.s=l}else o.s=null}function Nf(o,l,h){l instanceof Tr?(o.i=l,VI(o.i,o.h)):(h||(l=Er(l,LI)),o.i=new Tr(l,o.h))}function ie(o,l,h){o.i.set(l,h)}function so(o){return ie(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function wr(o,l){return o?l?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Er(o,l,h){return typeof o=="string"?(o=encodeURI(o).replace(l,xI),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function xI(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var kf=/[#\/\?@]/g,OI=/[#\?:]/g,MI=/[#\?]/g,LI=/[#\?@]/g,FI=/#/g;function Tr(o,l){this.h=this.g=null,this.i=o||null,this.j=!!l}function rn(o){o.g||(o.g=new Map,o.h=0,o.i&&kI(o.i,function(l,h){o.add(decodeURIComponent(l.replace(/\+/g," ")),h)}))}n=Tr.prototype,n.add=function(o,l){rn(this),this.i=null,o=hi(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(l),this.h+=1,this};function xf(o,l){rn(o),l=hi(o,l),o.g.has(l)&&(o.i=null,o.h-=o.g.get(l).length,o.g.delete(l))}function Of(o,l){return rn(o),l=hi(o,l),o.g.has(l)}n.forEach=function(o,l){rn(this),this.g.forEach(function(h,f){h.forEach(function(E){o.call(l,E,f,this)},this)},this)},n.na=function(){rn(this);let o=Array.from(this.g.values()),l=Array.from(this.g.keys()),h=[];for(let f=0;f<l.length;f++){let E=o[f];for(let A=0;A<E.length;A++)h.push(l[f])}return h},n.V=function(o){rn(this);let l=[];if(typeof o=="string")Of(this,o)&&(l=l.concat(this.g.get(hi(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)l=l.concat(o[h])}return l},n.set=function(o,l){return rn(this),this.i=null,o=hi(this,o),Of(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[l]),this.h+=1,this},n.get=function(o,l){return o?(o=this.V(o),0<o.length?String(o[0]):l):l};function Mf(o,l,h){xf(o,l),0<h.length&&(o.i=null,o.g.set(hi(o,l),N(h)),o.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let o=[],l=Array.from(this.g.keys());for(var h=0;h<l.length;h++){var f=l[h];let A=encodeURIComponent(String(f)),P=this.V(f);for(f=0;f<P.length;f++){var E=A;P[f]!==""&&(E+="="+encodeURIComponent(String(P[f]))),o.push(E)}}return this.i=o.join("&")};function hi(o,l){return l=String(l),o.j&&(l=l.toLowerCase()),l}function VI(o,l){l&&!o.j&&(rn(o),o.i=null,o.g.forEach(function(h,f){var E=f.toLowerCase();f!=E&&(xf(this,f),Mf(this,E,h))},o)),o.j=l}function UI(o,l){let h=new vr;if(c.Image){let f=new Image;f.onload=R(sn,h,"TestLoadImage: loaded",!0,l,f),f.onerror=R(sn,h,"TestLoadImage: error",!1,l,f),f.onabort=R(sn,h,"TestLoadImage: abort",!1,l,f),f.ontimeout=R(sn,h,"TestLoadImage: timeout",!1,l,f),c.setTimeout(function(){f.ontimeout&&f.ontimeout()},1e4),f.src=o}else l(!1)}function jI(o,l){let h=new vr,f=new AbortController,E=setTimeout(()=>{f.abort(),sn(h,"TestPingServer: timeout",!1,l)},1e4);fetch(o,{signal:f.signal}).then(A=>{clearTimeout(E),A.ok?sn(h,"TestPingServer: ok",!0,l):sn(h,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(E),sn(h,"TestPingServer: error",!1,l)})}function sn(o,l,h,f,E){try{E&&(E.onload=null,E.onerror=null,E.onabort=null,E.ontimeout=null),f(h)}catch{}}function BI(){this.g=new TI}function $I(o,l,h){let f=h||"";try{Pf(o,function(E,A){let P=E;d(E)&&(P=vc(E)),l.push(f+A+"="+encodeURIComponent(P))})}catch(E){throw l.push(f+"type="+encodeURIComponent("_badmap")),E}}function br(o){this.l=o.Ub||null,this.j=o.eb||!1}S(br,Ic),br.prototype.g=function(){return new oo(this.l,this.j)},br.prototype.i=function(o){return function(){return o}}({});function oo(o,l){Ae.call(this),this.D=o,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(oo,Ae),n=oo.prototype,n.open=function(o,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=l,this.readyState=1,Cr(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(l.body=o),(this.D||c).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ar(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Cr(this)),this.g&&(this.readyState=3,Cr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lf(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lf(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var l=o.value?o.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!o.done}))&&(this.response=this.responseText+=l)}o.done?Ar(this):Cr(this),this.readyState==3&&Lf(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,Ar(this))},n.Qa=function(o){this.g&&(this.response=o,Ar(this))},n.ga=function(){this.g&&Ar(this)};function Ar(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Cr(o)}n.setRequestHeader=function(o,l){this.u.append(o,l)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let o=[],l=this.h.entries();for(var h=l.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=l.next();return o.join(`\r
`)};function Cr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(oo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Ff(o){let l="";return ue(o,function(h,f){l+=f,l+=":",l+=h,l+=`\r
`}),l}function Dc(o,l,h){e:{for(f in h){var f=!1;break e}f=!0}f||(h=Ff(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):ie(o,l,h))}function oe(o){Ae.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(oe,Ae);var zI=/^https?$/i,qI=["POST","PUT"];n=oe.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,l,h,f){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);l=l?l.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tc.g(),this.v=this.o?df(this.o):df(Tc),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(l,String(o),!0),this.B=!1}catch(A){Vf(this,A);return}if(o=h||"",h=new Map(this.headers),f)if(Object.getPrototypeOf(f)===Object.prototype)for(var E in f)h.set(E,f[E]);else if(typeof f.keys=="function"&&typeof f.get=="function")for(let A of f.keys())h.set(A,f.get(A));else throw Error("Unknown input type for opt_headers: "+String(f));f=Array.from(h.keys()).find(A=>A.toLowerCase()=="content-type"),E=c.FormData&&o instanceof c.FormData,!(0<=Array.prototype.indexOf.call(qI,l,void 0))||f||E||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,P]of h)this.g.setRequestHeader(A,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bf(this),this.u=!0,this.g.send(o),this.u=!1}catch(A){Vf(this,A)}};function Vf(o,l){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=l,o.m=5,Uf(o),ao(o)}function Uf(o){o.A||(o.A=!0,xe(o,"complete"),xe(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,xe(this,"complete"),xe(this,"abort"),ao(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ao(this,!0)),oe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?jf(this):this.bb())},n.bb=function(){jf(this)};function jf(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Lt(o)!=4||o.Z()!=2)){if(o.u&&Lt(o)==4)cf(o.Ea,0,o);else if(xe(o,"readystatechange"),Lt(o)==4){o.h=!1;try{let P=o.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var h;if(!(h=l)){var f;if(f=P===0){var E=String(o.D).match(Df)[1]||null;!E&&c.self&&c.self.location&&(E=c.self.location.protocol.slice(0,-1)),f=!zI.test(E?E.toLowerCase():"")}h=f}if(h)xe(o,"complete"),xe(o,"success");else{o.m=6;try{var A=2<Lt(o)?o.g.statusText:""}catch{A=""}o.l=A+" ["+o.Z()+"]",Uf(o)}}finally{ao(o)}}}}function ao(o,l){if(o.g){Bf(o);let h=o.g,f=o.v[0]?()=>{}:null;o.g=null,o.v=null,l||xe(o,"ready");try{h.onreadystatechange=f}catch{}}}function Bf(o){o.I&&(c.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function Lt(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<Lt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var l=this.g.responseText;return o&&l.indexOf(o)==0&&(l=l.substring(o.length)),EI(l)}};function $f(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function WI(o){let l={};o=(o.g&&2<=Lt(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let f=0;f<o.length;f++){if(Y(o[f]))continue;var h=I(o[f]);let E=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let A=l[E]||[];l[E]=A,A.push(h)}w(l,function(f){return f.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sr(o,l,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||l}function zf(o){this.Aa=0,this.i=[],this.j=new vr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Sr("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Sr("baseRetryDelayMs",5e3,o),this.cb=Sr("retryDelaySeedMs",1e4,o),this.Wa=Sr("forwardChannelMaxRetries",2,o),this.wa=Sr("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new bf(o&&o.concurrentRequestLimit),this.Da=new BI,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=zf.prototype,n.la=8,n.G=1,n.connect=function(o,l,h,f){Oe(0),this.W=o,this.H=l||{},h&&f!==void 0&&(this.H.OSID=h,this.H.OAID=f),this.F=this.X,this.I=Xf(this,null,this.W),lo(this)};function Nc(o){if(qf(o),o.G==3){var l=o.U++,h=Mt(o.I);if(ie(h,"SID",o.K),ie(h,"RID",l),ie(h,"TYPE","terminate"),Rr(o,h),l=new nn(o,o.j,l),l.L=2,l.v=so(Mt(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(l.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=l.v,h=!0),h||(l.g=Zf(l.j,null),l.g.ea(l.v)),l.F=Date.now(),no(l)}Jf(o)}function co(o){o.g&&(xc(o),o.g.cancel(),o.g=null)}function qf(o){co(o),o.u&&(c.clearTimeout(o.u),o.u=null),uo(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&c.clearTimeout(o.s),o.s=null)}function lo(o){if(!Af(o.h)&&!o.s){o.s=!0;var l=o.Ga;hr||tf(),dr||(hr(),dr=!0),uc.add(l,o),o.B=0}}function GI(o,l){return Cf(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=l.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=yr(b(o.Ga,o,l),Yf(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;let E=new nn(this,this.j,o),A=this.o;if(this.S&&(A?(A=g(A),v(A,this.S)):A=this.S),this.m!==null||this.O||(E.H=A,A=null),this.P)e:{for(var l=0,h=0;h<this.i.length;h++){t:{var f=this.i[h];if("__data__"in f.map&&(f=f.map.__data__,typeof f=="string")){f=f.length;break t}f=void 0}if(f===void 0)break;if(l+=f,4096<l){l=h;break e}if(l===4096||h===this.i.length-1){l=h+1;break e}}l=1e3}else l=1e3;l=Gf(this,E,l),h=Mt(this.I),ie(h,"RID",o),ie(h,"CVER",22),this.D&&ie(h,"X-HTTP-Session-Id",this.D),Rr(this,h),A&&(this.O?l="headers="+encodeURIComponent(String(Ff(A)))+"&"+l:this.m&&Dc(h,this.m,A)),Pc(this.h,E),this.Ua&&ie(h,"TYPE","init"),this.P?(ie(h,"$req",l),ie(h,"SID","null"),E.T=!0,Ac(E,h,null)):Ac(E,h,l),this.G=2}}else this.G==3&&(o?Wf(this,o):this.i.length==0||Af(this.h)||Wf(this))};function Wf(o,l){var h;l?h=l.l:h=o.U++;let f=Mt(o.I);ie(f,"SID",o.K),ie(f,"RID",h),ie(f,"AID",o.T),Rr(o,f),o.m&&o.o&&Dc(f,o.m,o.o),h=new nn(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),l&&(o.i=l.D.concat(o.i)),l=Gf(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Pc(o.h,h),Ac(h,f,l)}function Rr(o,l){o.H&&ue(o.H,function(h,f){ie(l,f,h)}),o.l&&Pf({},function(h,f){ie(l,f,h)})}function Gf(o,l,h){h=Math.min(o.i.length,h);var f=o.l?b(o.l.Na,o.l,o):null;e:{var E=o.i;let A=-1;for(;;){let P=["count="+h];A==-1?0<h?(A=E[0].g,P.push("ofs="+A)):A=0:P.push("ofs="+A);let te=!0;for(let ye=0;ye<h;ye++){let K=E[ye].g,Ce=E[ye].map;if(K-=A,0>K)A=Math.max(0,E[ye].g-100),te=!1;else try{$I(Ce,P,"req"+K+"_")}catch{f&&f(Ce)}}if(te){f=P.join("&");break e}}}return o=o.i.splice(0,h),l.D=o,f}function Hf(o){if(!o.g&&!o.u){o.Y=1;var l=o.Fa;hr||tf(),dr||(hr(),dr=!0),uc.add(l,o),o.v=0}}function kc(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=yr(b(o.Fa,o),Yf(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,Kf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=yr(b(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Oe(10),co(this),Kf(this))};function xc(o){o.A!=null&&(c.clearTimeout(o.A),o.A=null)}function Kf(o){o.g=new nn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var l=Mt(o.qa);ie(l,"RID","rpc"),ie(l,"SID",o.K),ie(l,"AID",o.T),ie(l,"CI",o.F?"0":"1"),!o.F&&o.ja&&ie(l,"TO",o.ja),ie(l,"TYPE","xmlhttp"),Rr(o,l),o.m&&o.o&&Dc(l,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=so(Mt(l)),h.m=null,h.P=!0,wf(h,o)}n.Za=function(){this.C!=null&&(this.C=null,co(this),kc(this),Oe(19))};function uo(o){o.C!=null&&(c.clearTimeout(o.C),o.C=null)}function Qf(o,l){var h=null;if(o.g==l){uo(o),xc(o),o.g=null;var f=2}else if(Rc(o.h,l))h=l.D,Sf(o.h,l),f=1;else return;if(o.G!=0){if(l.o)if(f==1){h=l.m?l.m.length:0,l=Date.now()-l.F;var E=o.B;f=Zs(),xe(f,new _f(f,h)),lo(o)}else Hf(o);else if(E=l.s,E==3||E==0&&0<l.X||!(f==1&&GI(o,l)||f==2&&kc(o)))switch(h&&0<h.length&&(l=o.h,l.i=l.i.concat(h)),E){case 1:Dn(o,5);break;case 4:Dn(o,10);break;case 3:Dn(o,6);break;default:Dn(o,2)}}}function Yf(o,l){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*l}function Dn(o,l){if(o.j.info("Error code "+l),l==2){var h=b(o.fb,o),f=o.Xa;let E=!f;f=new Pn(f||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||io(f,"https"),so(f),E?UI(f.toString(),h):jI(f.toString(),h)}else Oe(2);o.G=0,o.l&&o.l.sa(l),Jf(o),qf(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))};function Jf(o){if(o.G=0,o.ka=[],o.l){let l=Rf(o.h);(l.length!=0||o.i.length!=0)&&(D(o.ka,l),D(o.ka,o.i),o.h.i.length=0,N(o.i),o.i.length=0),o.l.ra()}}function Xf(o,l,h){var f=h instanceof Pn?Mt(h):new Pn(h);if(f.g!="")l&&(f.g=l+"."+f.g),ro(f,f.s);else{var E=c.location;f=E.protocol,l=l?l+"."+E.hostname:E.hostname,E=+E.port;var A=new Pn(null);f&&io(A,f),l&&(A.g=l),E&&ro(A,E),h&&(A.l=h),f=A}return h=o.D,l=o.ya,h&&l&&ie(f,h,l),ie(f,"VER",o.la),Rr(o,f),f}function Zf(o,l,h){if(l&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=o.Ca&&!o.pa?new oe(new br({eb:h})):new oe(o.pa),l.Ha(o.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ep(){}n=ep.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ho(){}ho.prototype.g=function(o,l){return new ze(o,l)};function ze(o,l){Ae.call(this),this.g=new zf(l),this.l=o,this.h=l&&l.messageUrlParams||null,o=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(o?o["X-WebChannel-Content-Type"]=l.messageContentType:o={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(o?o["X-WebChannel-Client-Profile"]=l.va:o={"X-WebChannel-Client-Profile":l.va}),this.g.S=o,(o=l&&l.Sb)&&!Y(o)&&(this.g.m=o),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!Y(l)&&(this.g.D=l,o=this.h,o!==null&&l in o&&(o=this.h,l in o&&delete o[l])),this.j=new di(this)}S(ze,Ae),ze.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ze.prototype.close=function(){Nc(this.g)},ze.prototype.o=function(o){var l=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=vc(o),o=h);l.i.push(new PI(l.Ya++,o)),l.G==3&&lo(l)},ze.prototype.N=function(){this.g.l=null,delete this.j,Nc(this.g),delete this.g,ze.aa.N.call(this)};function tp(o){wc.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var l=o.__sm__;if(l){e:{for(let h in l){o=h;break e}o=void 0}(this.i=o)&&(o=this.i,l=l!==null&&o in l?l[o]:void 0),this.data=l}else this.data=o}S(tp,wc);function np(){Ec.call(this),this.status=1}S(np,Ec);function di(o){this.g=o}S(di,ep),di.prototype.ua=function(){xe(this.g,"a")},di.prototype.ta=function(o){xe(this.g,new tp(o))},di.prototype.sa=function(o){xe(this.g,new np)},di.prototype.ra=function(){xe(this.g,"b")},ho.prototype.createWebChannel=ho.prototype.g,ze.prototype.send=ze.prototype.o,ze.prototype.open=ze.prototype.m,ze.prototype.close=ze.prototype.close,N_=Yt.createWebChannelTransport=function(){return new ho},D_=Yt.getStatEventTarget=function(){return Zs()},P_=Yt.Event=Sn,R_=Yt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},eo.NO_ERROR=0,eo.TIMEOUT=8,eo.HTTP_ERROR=6,S_=Yt.ErrorCode=eo,yf.COMPLETE="complete",C_=Yt.EventType=yf,ff.EventType=gr,gr.OPEN="a",gr.CLOSE="b",gr.ERROR="c",gr.MESSAGE="d",Ae.prototype.listen=Ae.prototype.K,A_=Yt.WebChannel=ff,OS=Yt.FetchXmlHttpFactory=br,oe.prototype.listenOnce=oe.prototype.L,oe.prototype.getLastError=oe.prototype.Ka,oe.prototype.getLastErrorCode=oe.prototype.Ba,oe.prototype.getStatus=oe.prototype.Z,oe.prototype.getResponseJson=oe.prototype.Oa,oe.prototype.getResponseText=oe.prototype.oa,oe.prototype.send=oe.prototype.ea,oe.prototype.setWithCredentials=oe.prototype.Ha,b_=Yt.XhrIo=oe}).apply(typeof Fa<"u"?Fa:typeof self<"u"?self:typeof window<"u"?window:{});var k_="@firebase/firestore";var Ee=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ee.UNAUTHENTICATED=new Ee(null),Ee.GOOGLE_CREDENTIALS=new Ee("google-credentials-uid"),Ee.FIRST_PARTY=new Ee("first-party-uid"),Ee.MOCK_USER=new Ee("mock-user");var Ps="10.14.0";var Hi=new st("@firebase/firestore");function wt(n,...e){if(Hi.logLevel<=q.DEBUG){let t=e.map(Dh);Hi.debug(`Firestore (${Ps}): ${n}`,...t)}}function F_(n,...e){if(Hi.logLevel<=q.ERROR){let t=e.map(Dh);Hi.error(`Firestore (${Ps}): ${n}`,...t)}}function MS(n,...e){if(Hi.logLevel<=q.WARN){let t=e.map(Dh);Hi.warn(`Firestore (${Ps}): ${n}`,...t)}}function Dh(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Be(n="Unexpected state"){let e=`FIRESTORE (${Ps}) INTERNAL ASSERTION FAILED: `+n;throw F_(e),new Error(e)}function Jn(n,e){n||Be()}var Fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Te=class extends je{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Xn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Va=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},gh=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ee.UNAUTHENTICATED))}shutdown(){}},_h=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},yh=class{constructor(e){this.t=e,this.currentUser=Ee.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Jn(this.o===void 0);let i=this.i,r=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve(),s=new Xn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Xn,e.enqueueRetryable(()=>r(this.currentUser))};let a=()=>{let u=s;e.enqueueRetryable(()=>C(this,null,function*(){yield u.promise,yield r(this.currentUser)}))},c=u=>{wt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(wt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Xn)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(wt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Jn(typeof i.accessToken=="string"),new Va(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Jn(e===null||typeof e=="string"),new Ee(e)}},vh=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Ee.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Ih=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new vh(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ee.FIRST_PARTY))}shutdown(){}invalidateToken(){}},wh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Eh=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Jn(this.o===void 0);let i=s=>{s.error!=null&&wt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let a=s.token!==this.R;return this.R=s.token,wt("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{wt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):wt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Jn(typeof t.token=="string"),this.R=t.token,new wh(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function V_(n,e){return n<e?-1:n>e?1:0}var Th=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&Be(),i===void 0?i=e.length-t:i>e.length-t&&Be(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=e.get(r),a=t.get(r);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},bn=class n extends Th{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new Te(Fe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}};var Zn=class n{constructor(e){this.path=e}static fromPath(e){return new n(bn.fromString(e))}static fromName(e){return new n(bn.fromString(e).popFirst(5))}static empty(){return new n(bn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return bn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new bn(e.slice()))}};var bh=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};bh.UNKNOWN_ID=-1;function LS(n){return n.name==="IndexedDbTransactionError"}function FS(n){return n===0&&1/n==-1/0}var VS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Qx=[...VS,"documentOverlays"],US=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jS=US,BS=[...jS,"indexConfiguration","indexState","indexEntries"];var Yx=[...BS,"globals"];var Ki=class n{constructor(e,t){this.comparator=e,this.root=t||xt.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gi(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gi(this.root,e,this.comparator,!0)}},Gi=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},xt=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Be();let e=this.left.check();if(e!==this.right.check())throw Be();return e+(this.isRed()?0:1)}};xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Be()}get value(){throw Be()}get color(){throw Be()}get left(){throw Be()}get right(){throw Be()}copy(e,t,i,r,s){return this}insert(e,t,i){return new xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ua=class n{constructor(e){this.comparator=e,this.data=new Ki(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ja(this.data.getIterator())}getIteratorFrom(e){return new ja(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},ja=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ah=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Qi=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ah("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return V_(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Qi.EMPTY_BYTE_STRING=new Qi("");var $S=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zS(n){if(Jn(!!n),typeof n=="string"){let e=0,t=$S.exec(n);if(Jn(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Rs(n.seconds),nanos:Rs(n.nanos)}}function Rs(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function qS(n){return typeof n=="string"?Qi.fromBase64String(n):Qi.fromUint8Array(n)}var Ch=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};function WS(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function GS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Xx=new Ki(Zn.comparator);var Zx=new Ki(Zn.comparator);var eO=new Ki(Zn.comparator),tO=new Ua(Zn.comparator);var nO=new Ua(V_);var x_,W;(W=x_||(x_={}))[W.OK=0]="OK",W[W.CANCELLED=1]="CANCELLED",W[W.UNKNOWN=2]="UNKNOWN",W[W.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",W[W.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",W[W.NOT_FOUND=5]="NOT_FOUND",W[W.ALREADY_EXISTS=6]="ALREADY_EXISTS",W[W.PERMISSION_DENIED=7]="PERMISSION_DENIED",W[W.UNAUTHENTICATED=16]="UNAUTHENTICATED",W[W.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",W[W.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",W[W.ABORTED=10]="ABORTED",W[W.OUT_OF_RANGE=11]="OUT_OF_RANGE",W[W.UNIMPLEMENTED=12]="UNIMPLEMENTED",W[W.INTERNAL=13]="INTERNAL",W[W.UNAVAILABLE=14]="UNAVAILABLE",W[W.DATA_LOSS=15]="DATA_LOSS";var iO=new ph([4294967295,4294967295],0);var Ba=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Rs(e.integerValue));else if("doubleValue"in e){let i=Rs(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),FS(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),typeof i=="string"&&(i=zS(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(qS(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?GS(e)?this.dt(t,Number.MAX_SAFE_INTEGER):WS(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Be()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let i=e.fields||{};this.dt(t,55);for(let r of Object.keys(i))this.Vt(r,t),this.Tt(i[r],t)}wt(e,t){var i,r;let s=e.fields||{};this.dt(t,53);let a="value",c=((r=(i=s[a].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(t,15),t.At(Rs(c)),this.Vt(a,t),this.Tt(s[a],t)}bt(e,t){let i=e.values||[];this.dt(t,50);for(let r of i)this.Tt(r,t)}yt(e,t){this.dt(t,37),Zn.fromName(e).path.forEach(i=>{this.dt(t,60),this.Dt(i,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Ba.vt=new Ba;var rO=new Uint8Array(0);var kt=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};kt.DEFAULT_COLLECTION_PERCENTILE=10,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kt.DEFAULT=new kt(41943040,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kt.DISABLED=new kt(-1,0,0);function mh(){return typeof document<"u"?document:null}var Sh=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-i);r>0&&wt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Rh=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Xn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let a=Date.now()+i,c=new n(e,t,a,r,s);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(Fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var O_,M_;(M_=O_||(O_={})).ea="default",M_.Cache="cache";function HS(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var L_=new Map;function KS(n,e,t,i){if(e===!0&&i===!0)throw new Te(Fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function QS(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Be()}function YS(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(Fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=QS(n);throw new Te(Fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var $a=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(Fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Te(Fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HS((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Te(Fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Te(Fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Te(Fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},za=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $a({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(Fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(Fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $a(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new gh;switch(i.type){case"firstParty":return new Ih(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Te(Fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return C(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=L_.get(t);i&&(wt("ComponentProvider","Removing Datastore"),L_.delete(t),i.terminate())}(this),Promise.resolve()}};function U_(n,e,t,i={}){var r;let s=(n=YS(n,za))._getSettings(),a=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&MS("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),i.mockUserToken){let c,u;if(typeof i.mockUserToken=="string")c=i.mockUserToken,u=Ee.MOCK_USER;else{c=la(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let d=i.mockUserToken.sub||i.mockUserToken.user_id;if(!d)throw new Te(Fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ee(d)}n._authCredentials=new _h(new Va(c,u))}}var qa=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Sh(this,"async_queue_retry"),this.Vu=()=>{let i=mh();i&&wt("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;let t=mh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=mh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Xn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return C(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!LS(e))throw e;wt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;let r=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(i);throw F_("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let r=Rh.createAndSchedule(this,e,t,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&Be()}verifyOperationInProgress(){}wu(){return C(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var Ph=class extends za{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new qa,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return C(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new qa(e),this._firestoreClient=void 0,yield e}})}};function j_(n,e){let t=typeof n=="object"?n:Gt(),i=typeof n=="string"?n:e||"(default)",r=Wt(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=ca("firestore");s&&U_(r,...s)}return r}var sO=new RegExp("[~\\*/\\[\\]]");(function(e,t=!0){(function(r){Ps=r})(Ze),Xe(new Re("firestore",(i,{instanceIdentifier:r,options:s})=>{let a=i.getProvider("app").getImmediate(),c=new Ph(new yh(i.getProvider("auth-internal")),new Eh(i.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Te(Fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ch(d.options.projectId,p)}(a,r),a);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),X(k_,"4.7.3",e),X(k_,"4.7.3","esm2017")})();var Ds=class{constructor(e){return e}},B_="firestore",Nh=class{constructor(){return Wn(B_)}};var kh=new B("angularfire2.firestore-instances");function JS(n,e){let t=zi(B_,n,e);return t&&new Ds(t)}function XS(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Ds(i)}}var ZS={provide:Nh,deps:[[new le,kh]]},e0={provide:Ds,useFactory:JS,deps:[[new le,kh],It]};function $_(n,...e){return X("angularfire",at.full,"fst"),Me([e0,ZS,{provide:kh,useFactory:XS(n),multi:!0,deps:[Z,gt,vn,Ht,[new le,Yn],[new le,yn],...e]}])}var z_=In(j_,!0);var q_="@firebase/database",W_="1.0.8";var Dd="";function t0(n){Dd=n}var jh=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ge(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Mi(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Bh=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Je(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var Ty=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new jh(e)}}catch{}return new Bh},ti=Ty("localStorage"),$h=Ty("sessionStorage");var Zi=new st("@firebase/database"),n0=function(){let n=1;return function(){return n++}}(),by=function(n){let e=lg(n),t=new oa;t.update(e);let i=t.digest();return aa.encodeByteArray(i)},zs=function(...n){let e="";for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=zs.apply(null,i):typeof i=="object"?e+=ge(i):e+=i,e+=" "}return e},ni=null,G_=!0,i0=function(n,e){k(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(Zi.logLevel=q.VERBOSE,ni=Zi.log.bind(Zi),e&&$h.set("logging_enabled",!0)):typeof n=="function"?ni=n:(ni=null,$h.remove("logging_enabled"))},Pe=function(...n){if(G_===!0&&(G_=!1,ni===null&&$h.get("logging_enabled")===!0&&i0(!0)),ni){let e=zs.apply(null,n);ni(e)}},qs=function(n){return function(...e){Pe(n,...e)}},zh=function(...n){let e="FIREBASE INTERNAL ERROR: "+zs(...n);Zi.error(e)},Xt=function(...n){let e=`FIREBASE FATAL ERROR: ${zs(...n)}`;throw Zi.error(e),new Error(e)},et=function(...n){let e="FIREBASE WARNING: "+zs(...n);Zi.warn(e)},r0=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&et("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ay=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},s0=function(n){if(St()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},tr="[MIN_NAME]",ii="[MAX_NAME]",cr=function(n,e){if(n===e)return 0;if(n===tr||e===ii)return-1;if(e===tr||n===ii)return 1;{let t=H_(n),i=H_(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},o0=function(n,e){return n===e?0:n<e?-1:1},Ns=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+ge(e))},Nd=function(n){if(typeof n!="object"||n===null)return ge(n);let e=[];for(let i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=ge(e[i]),t+=":",t+=Nd(n[e[i]]);return t+="}",t},Cy=function(n,e){let t=n.length;if(t<=e)return[n];let i=[];for(let r=0;r<t;r+=e)r+e>t?i.push(n.substring(r,t)):i.push(n.substring(r,r+e));return i};function ut(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var Sy=function(n){k(!Ay(n),"Invalid JSON number");let e=11,t=52,i=(1<<e-1)-1,r,s,a,c,u;n===0?(s=0,a=0,r=1/n===-1/0?1:0):(r=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(c=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=c+i,a=Math.round(n*Math.pow(2,t-c)-Math.pow(2,t))):(s=0,a=Math.round(n/Math.pow(2,1-i-t))));let d=[];for(u=t;u;u-=1)d.push(a%2?1:0),a=Math.floor(a/2);for(u=e;u;u-=1)d.push(s%2?1:0),s=Math.floor(s/2);d.push(r?1:0),d.reverse();let p=d.join(""),m="";for(u=0;u<64;u+=8){let b=parseInt(p.substr(u,8),2).toString(16);b.length===1&&(b="0"+b),m=m+b}return m.toLowerCase()},a0=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},c0=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var l0=new RegExp("^-?(0*)\\d{1,10}$"),u0=-2147483648,h0=2147483647,H_=function(n){if(l0.test(n)){let e=Number(n);if(e>=u0&&e<=h0)return e}return null},Ws=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw et("Exception was thrown by user callback.",t),e},Math.floor(0))}},d0=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ls=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var qh=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){et(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Wh=class{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Pe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',et(e)}},Fs=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),Ga="5",Ry="v",Py="s",Dy="r",Ny="f",ky=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,xy="ls",Oy="p",Gh="ac",My="websocket",Ly="long_polling";var Ha=class{constructor(e,t,i,r,s=!1,a="",c=!1,u=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=a,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ti.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ti.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function f0(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function Fy(n,e,t){k(typeof e=="string","typeof type must == string"),k(typeof t=="object","typeof params must == object");let i;if(e===My)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===Ly)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);f0(n)&&(t.ns=n.namespace);let r=[];return ut(t,(s,a)=>{r.push(s+"="+a)}),i+r.join("&")}var Hh=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Je(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Zm(this.counters_)}};var xh={},Oh={};function kd(n){let e=n.toString();return xh[e]||(xh[e]=new Hh),xh[e]}function p0(n,e){let t=n.toString();return Oh[t]||(Oh[t]=e()),Oh[t]}var Kh=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Ws(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var K_="start",m0="close",g0="pLPCommand",_0="pRTLPCB",Vy="id",Uy="pw",jy="ser",y0="cb",v0="seg",I0="ts",w0="d",E0="dframe",By=1870,$y=30,T0=By-$y,b0=25e3,A0=3e4,Qh=class n{constructor(e,t,i,r,s,a,c){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=a,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=qs(e),this.stats_=kd(t),this.urlFn=u=>(this.appCheckToken&&(u[Gh]=this.appCheckToken),Fy(t,Ly,u))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Kh(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(A0)),s0(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Yh((...s)=>{let[a,c,u,d,p]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===K_)this.id=c,this.password=u;else if(a===m0)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...s)=>{let[a,c]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(a,c)},()=>{this.onClosed_()},this.urlFn);let i={};i[K_]="t",i[jy]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[y0]=this.scriptTagHolder.uniqueCallbackIdentifier),i[Ry]=Ga,this.transportSessionId&&(i[Py]=this.transportSessionId),this.lastSessionId&&(i[xy]=this.lastSessionId),this.applicationId&&(i[Oy]=this.applicationId),this.appCheckToken&&(i[Gh]=this.appCheckToken),typeof location<"u"&&location.hostname&&ky.test(location.hostname)&&(i[Dy]=Ny);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return St()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!a0()&&!c0()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=ge(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let i=lu(t),r=Cy(i,T0);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(St())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[E0]="t",i[Vy]=e,i[Uy]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=ge(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},Yh=class n{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,St())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=n0(),window[g0+this.uniqueCallbackIdentifier]=e,window[_0+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(c){Pe("frame writing exception"),c.stack&&Pe(c.stack),Pe(c)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Pe("No IE domain setting required")}catch{let i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Vy]=this.myID,e[Uy]=this.myPW,e[jy]=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+$y+i.length<=By;){let a=this.pendingSegs.shift();i=i+"&"+v0+r+"="+a.seg+"&"+I0+r+"="+a.ts+"&"+w0+r+"="+a.d,r++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(b0)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,t){St()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Pe("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var C0=16384,S0=45e3,Ka=null;typeof MozWebSocket<"u"?Ka=MozWebSocket:typeof WebSocket<"u"&&(Ka=WebSocket);var ks=(()=>{class n{constructor(t,i,r,s,a,c,u){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=qs(this.connId),this.stats_=kd(i),this.connURL=n.connectionURL_(i,c,u,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,a){let c={};return c[Ry]=Ga,!St()&&typeof location<"u"&&location.hostname&&ky.test(location.hostname)&&(c[Dy]=Ny),i&&(c[Py]=i),r&&(c[xy]=r),s&&(c[Gh]=s),a&&(c[Oy]=a),Fy(t,My,c)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ti.set("previous_websocket_failure",!0);try{let r;if(St()){let s=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${Ga}/${Dd}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let a=process.env,c=this.connURL.indexOf("wss://")===0?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;c&&(r.proxy={origin:c})}this.mySock=new Ka(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&Ka!==null&&!n.forceDisallow_}static previouslyFailed(){return ti.isInMemoryStorage||ti.get("previous_websocket_failure")===!0}markConnectionHealthy(){ti.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=Mi(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(k(this.frames===null,"We already have a frame buffer"),t.length<=6){let i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();let i=ge(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=Cy(i,C0);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(S0))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),R0=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Qh,ks]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let i=ks&&ks.isAvailable(),r=i&&!ks.previouslyFailed();if(t.webSocketOnly&&(i||et("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ks];else{let s=this.transports_=[];for(let a of n.ALL_TRANSPORTS)a&&a.isAvailable()&&s.push(a);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),P0=6e4,D0=5e3,N0=10*1024,k0=100*1024,Mh="t",Q_="d",x0="s",Y_="r",O0="e",J_="o",X_="a",Z_="n",ey="p",M0="h",Jh=class{constructor(e,t,i,r,s,a,c,u,d,p){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=a,this.onReady_=c,this.onDisconnect_=u,this.onKill_=d,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=qs("c:"+this.id+":"),this.transportManager_=new R0(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));let r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Ls(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>k0?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>N0?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Mh in e){let t=e[Mh];t===X_?this.upgradeIfSecondaryHealthy_():t===Y_?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===J_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Ns("t",e),i=Ns("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ey,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:X_,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Z_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Ns("t",e),i=Ns("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Ns(Mh,e);if(Q_ in e){let i=e[Q_];if(t===M0){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(t===Z_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===x0?this.onConnectionShutdown_(i):t===Y_?this.onReset_(i):t===O0?zh("Server Error: "+i):t===J_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):zh("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Ga!==i&&et("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Ls(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(P0))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ls(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(D0))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ey,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ti.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Qa=class{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}};var Ya=class{constructor(e){this.allowedEvents_=e,this.listeners_={},k(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});let r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);let r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){k(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var Ja=class n extends Ya{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ps()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return k(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var ty=32,ny=768,ne=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function ee(){return new ne("")}function G(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Cn(n){return n.pieces_.length-n.pieceNum_}function re(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ne(n.pieces_,e)}function zy(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function L0(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function qy(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Wy(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ne(e,0)}function _e(n,e){let t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof ne)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{let i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new ne(t,0)}function $(n){return n.pieceNum_>=n.pieces_.length}function ct(n,e){let t=G(n),i=G(e);if(t===null)return e;if(t===i)return ct(re(n),re(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Gy(n,e){if(Cn(n)!==Cn(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Tt(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Cn(n)>Cn(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}var Xh=class{constructor(e,t){this.errorPrefix_=t,this.parts_=qy(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=_s(this.parts_[i]);Hy(this)}};function F0(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=_s(e),Hy(n)}function V0(n){let e=n.parts_.pop();n.byteLength_-=_s(e),n.parts_.length>0&&(n.byteLength_-=1)}function Hy(n){if(n.byteLength_>ny)throw new Error(n.errorPrefix_+"has a key path longer than "+ny+" bytes ("+n.byteLength_+").");if(n.parts_.length>ty)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ty+") or object contains a cycle "+ei(n))}function ei(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var Zh=class n extends Ya{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new n}getInitialEvent(e){return k(e==="visible","Unknown event type: "+e),[this.visible_]}};var xs=1e3,U0=60*5*1e3,iy=30*1e3,j0=1.3,B0=3e4,$0="server_kill",ry=3,xd=(()=>{class n extends Qa{constructor(t,i,r,s,a,c,u,d){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=u,this.authOverride_=d,this.id=n.nextPersistentConnectionId_++,this.log_=qs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=xs,this.maxReconnectDelay_=U0,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d&&!St())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Zh.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Ja.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){let s=++this.requestNumber_,a={r:s,a:t,b:i};this.log_(ge(a)),k(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();let i=new Vn,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:c=>{let u=c.d;c.s==="ok"?i.resolve(u):i.reject(u)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),i.promise}listen(t,i,r,s){this.initConnection_();let a=t._queryIdentifier,c=t._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),k(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),k(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");let u={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(c).set(a,u),this.connected_&&this.sendListen_(u)}sendGet_(t){let i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){let i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);let a={p:r},c="q";t.tag&&(a.q=i._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest(c,a,u=>{let d=u.d,p=u.s;n.warnOnListenWarnings_(d,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",u),p!=="ok"&&this.removeListen_(r,s),t.onComplete&&t.onComplete(p,d))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&Je(t,"w")){let r=jn(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',a=i._path.toString();et(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||ag(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=iy)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,i=og(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{let a=s.s,c=s.d||"error";this.authToken_===t&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let i=t.s,r=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){let r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),k(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);let a={p:t},c="n";s&&(a.q=r,a.t=s),this.sendRequest(c,a)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){let a={p:i,d:r};this.log_("onDisconnect "+t,a),this.sendRequest(t,a,c=>{s&&setTimeout(()=>{s(c.s,c.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,a){this.initConnection_();let c={p:i,d:r};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:t,request:c,onComplete:s}),this.outstandingPutCount_++;let u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+i)}sendPut_(t){let i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,a=>{this.log_(i+" response",a),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(a.s,a.d)})}reportStats(t){if(this.connected_){let i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let a=r.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+ge(t));let i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):zh("Unrecognized action received from server: "+ge(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){k(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=xs,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=xs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>B0&&(this.reconnectDelay_=xs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*j0)}this.onConnectStatus_(!1)}establishConnection_(){return C(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,a=this.lastSessionId,c=!1,u=null,d=function(){u?u.close():(c=!0,r())},p=function(b){k(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(b)};this.realtime_={close:d,sendRequest:p};let m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[b,R]=yield Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);c?Pe("getToken() completed but was canceled"):(Pe("getToken() completed. Creating connection."),this.authToken_=b&&b.accessToken,this.appCheckToken_=R&&R.token,u=new Jh(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,r,S=>{et(S+" ("+this.repoInfo_.toString()+")"),this.interrupt($0)},a))}catch(b){this.log_("Failed to get token: "+b),c||(this.repoInfo_.nodeAdmin&&et(b),d())}}})}interrupt(t){Pe("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Pe("Resuming connection for reason: "+t),delete this.interruptReasons_[t],ms(this.interruptReasons_)&&(this.reconnectDelay_=xs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;i?r=i.map(a=>Nd(a)).join("$"):r="default";let s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){let r=new ne(t).toString(),s;if(this.listens.has(r)){let a=this.listens.get(r);s=a.get(i),a.delete(i),a.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){Pe("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=ry&&(this.reconnectDelay_=iy,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){Pe("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=ry&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},i="js";St()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),t["sdk."+i+"."+Dd.replace(/\./g,"-")]=1,ps()?t["framework.cordova"]=1:ua()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=Ja.getInstance().currentlyOnline();return ms(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),H=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var nr=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let i=new H(tr,e),r=new H(tr,t);return this.compare(i,r)!==0}minPost(){return H.MIN}};var Wa,Xa=class extends nr{static get __EMPTY_NODE(){return Wa}static set __EMPTY_NODE(e){Wa=e}compare(e,t){return cr(e.name,t.name)}isDefinedOn(e){throw Un("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return H.MIN}maxPost(){return new H(ii,Wa)}makePost(e,t){return k(typeof e=="string","KeyIndex indexValue must always be a string."),new H(e,Wa)}toString(){return".key"}},er=new Xa;var Ji=class{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=t?i(e.key,t):1,r&&(a*=-1),a<0)this.isReverse_?e=e.left:e=e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Et=(()=>{class n{constructor(t,i,r,s,a){this.key=t,this.value=i,this.color=r??n.RED,this.left=s??lt.EMPTY_NODE,this.right=a??lt.EMPTY_NODE}copy(t,i,r,s,a){return new n(t??this.key,i??this.value,r??this.color,s??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this,a=r(t,s.key);return a<0?s=s.copy(null,null,null,s.left.insert(t,i,r),null):a===0?s=s.copy(null,i,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return lt.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(t,r.key)===0){if(r.right.isEmpty())return lt.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),ed=class{copy(e,t,i,r,s){return this}insert(e,t,i){return new Et(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},lt=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Et.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Et.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ji(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Ji(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Ji(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Ji(this.root_,null,this.comparator_,!0,e)}};lt.EMPTY_NODE=new ed;function z0(n,e){return cr(n.name,e.name)}function Od(n,e){return cr(n,e)}var td;function q0(n){td=n}var Ky=function(n){return typeof n=="number"?"number:"+Sy(n):"string:"+n},Qy=function(n){if(n.isLeafNode()){let e=n.val();k(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Je(e,".sv"),"Priority must be a string or number.")}else k(n===td||n.isEmpty(),"priority of unexpected type.");k(n===td||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var sy,ir=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,k(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Qy(this.priorityNode_)}static set __childrenNodeConstructor(t){sy=t}static get __childrenNodeConstructor(){return sy}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return $(t)?this:G(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){let r=G(t);return r===null?i:i.isEmpty()&&r!==".priority"?this:(k(r!==".priority"||Cn(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(re(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Ky(this.priorityNode_.val())+":");let i=typeof this.value_;t+=i+":",i==="number"?t+=Sy(this.value_):t+=this.value_,this.lazyHash_=by(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(k(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),a=n.VALUE_TYPE_ORDER.indexOf(r);return k(s>=0,"Unknown leaf type: "+i),k(a>=0,"Unknown leaf type: "+r),s===a?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),Yy,Jy;function W0(n){Yy=n}function G0(n){Jy=n}var nd=class extends nr{compare(e,t){let i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return s===0?cr(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return H.MIN}maxPost(){return new H(ii,new ir("[PRIORITY-POST]",Jy))}makePost(e,t){let i=Yy(e);return new H(t,new ir("[PRIORITY-POST]",i))}toString(){return".priority"}},Ne=new nd;var H0=Math.log(2),id=class{constructor(e){let t=s=>parseInt(Math.log(s)/H0,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Za=function(n,e,t,i){n.sort(e);let r=function(u,d){let p=d-u,m,b;if(p===0)return null;if(p===1)return m=n[u],b=t?t(m):m,new Et(b,m.node,Et.BLACK,null,null);{let R=parseInt(p/2,10)+u,S=r(u,R),N=r(R+1,d);return m=n[R],b=t?t(m):m,new Et(b,m.node,Et.BLACK,S,N)}},s=function(u){let d=null,p=null,m=n.length,b=function(S,N){let D=m-S,Q=m;m-=S;let Y=r(D+1,Q),L=n[D],he=t?t(L):L;R(new Et(he,L.node,N,null,Y))},R=function(S){d?(d.left=S,d=S):(p=S,d=S)};for(let S=0;S<u.count;++S){let N=u.nextBitIsOne(),D=Math.pow(2,u.count-(S+1));N?b(D,Et.BLACK):(b(D,Et.BLACK),b(D,Et.RED))}return p},a=new id(n.length),c=s(a);return new lt(i||e,c)};var Lh,Yi={},rr=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return k(Yi&&Ne,"ChildrenNode.ts has not been loaded"),Lh=Lh||new n({".priority":Yi},{".priority":Ne}),Lh}get(e){let t=jn(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof lt?t:null}hasIndex(e){return Je(this.indexSet_,e.toString())}addIndex(e,t){k(e!==er,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,s=t.getIterator(H.Wrap),a=s.getNext();for(;a;)r=r||e.isDefinedOn(a.node),i.push(a),a=s.getNext();let c;r?c=Za(i,e.getCompare()):c=Yi;let u=e.toString(),d=Object.assign({},this.indexSet_);d[u]=e;let p=Object.assign({},this.indexes_);return p[u]=c,new n(p,d)}addToIndexes(e,t){let i=gs(this.indexes_,(r,s)=>{let a=jn(this.indexSet_,s);if(k(a,"Missing index implementation for "+s),r===Yi)if(a.isDefinedOn(e.node)){let c=[],u=t.getIterator(H.Wrap),d=u.getNext();for(;d;)d.name!==e.name&&c.push(d),d=u.getNext();return c.push(e),Za(c,a.getCompare())}else return Yi;else{let c=t.get(e.name),u=r;return c&&(u=u.remove(new H(e.name,c))),u.insert(e,e.node)}});return new n(i,this.indexSet_)}removeFromIndexes(e,t){let i=gs(this.indexes_,r=>{if(r===Yi)return r;{let s=t.get(e.name);return s?r.remove(new H(e.name,s)):r}});return new n(i,this.indexSet_)}};var Os,se=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Qy(this.priorityNode_),this.children_.isEmpty()&&k(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Os||(Os=new n(new lt(Od),null,rr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Os}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let i=this.children_.get(t);return i===null?Os:i}}getChild(t){let i=G(t);return i===null?this:this.getImmediateChild(i).getChild(re(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(k(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{let r=new H(t,i),s,a;i.isEmpty()?(s=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),a=this.indexMap_.addToIndexes(r,this.children_));let c=s.isEmpty()?Os:this.priorityNode_;return new n(s,c,a)}}updateChild(t,i){let r=G(t);if(r===null)return i;{k(G(t)!==".priority"||Cn(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(r).updateChild(re(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let i={},r=0,s=0,a=!0;if(this.forEachChild(Ne,(c,u)=>{i[c]=u.val(t),r++,a&&n.INTEGER_REGEXP_.test(c)?s=Math.max(s,Number(c)):a=!1}),!t&&a&&s<2*r){let c=[];for(let u in i)c[u]=i[u];return c}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Ky(this.getPriority().val())+":"),this.forEachChild(Ne,(i,r)=>{let s=r.hash();s!==""&&(t+=":"+i+":"+s)}),this.lazyHash_=t===""?"":by(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){let s=this.resolveIndex_(r);if(s){let a=s.getPredecessorKey(new H(t,i));return a?a.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let i=this.resolveIndex_(t);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){let i=this.getFirstChildName(t);return i?new H(i,this.children_.get(i)):null}getLastChildName(t){let i=this.resolveIndex_(t);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){let i=this.getLastChildName(t);return i?new H(i,this.children_.get(i)):null}forEachChild(t,i){let r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,H.Wrap),a=s.peek();for(;a!=null&&i.compare(a,t)<0;)s.getNext(),a=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,H.Wrap),a=s.peek();for(;a!=null&&i.compare(a,t)>0;)s.getNext(),a=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Gs?-1:0}withIndex(t){if(t===er||this.indexMap_.hasIndex(t))return this;{let i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===er||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(Ne),s=i.getIterator(Ne),a=r.getNext(),c=s.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=r.getNext(),c=s.getNext()}return a===null&&c===null}else return!1;else return!1}}resolveIndex_(t){return t===er?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),rd=class extends se{constructor(){super(new lt(Od),se.EMPTY_NODE,rr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return se.EMPTY_NODE}isEmpty(){return!1}},Gs=new rd;Object.defineProperties(H,{MIN:{value:new H(tr,se.EMPTY_NODE)},MAX:{value:new H(ii,Gs)}});Xa.__EMPTY_NODE=se.EMPTY_NODE;ir.__childrenNodeConstructor=se;q0(Gs);G0(Gs);var K0=!0;function De(n,e=null){if(n===null)return se.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),k(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new ir(t,De(e))}if(!(n instanceof Array)&&K0){let t=[],i=!1;if(ut(n,(a,c)=>{if(a.substring(0,1)!=="."){let u=De(c);u.isEmpty()||(i=i||!u.getPriority().isEmpty(),t.push(new H(a,u)))}}),t.length===0)return se.EMPTY_NODE;let s=Za(t,z0,a=>a.name,Od);if(i){let a=Za(t,Ne.getCompare());return new se(s,De(e),new rr({".priority":a},{".priority":Ne}))}else return new se(s,De(e),rr.Default)}else{let t=se.EMPTY_NODE;return ut(n,(i,r)=>{if(Je(n,i)&&i.substring(0,1)!=="."){let s=De(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(De(e))}}W0(De);var sd=class extends nr{constructor(e){super(),this.indexPath_=e,k(!$(e)&&G(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return s===0?cr(e.name,t.name):s}makePost(e,t){let i=De(e),r=se.EMPTY_NODE.updateChild(this.indexPath_,i);return new H(t,r)}maxPost(){let e=se.EMPTY_NODE.updateChild(this.indexPath_,Gs);return new H(ii,e)}toString(){return qy(this.indexPath_,0).join("/")}};var od=class extends nr{compare(e,t){let i=e.node.compareTo(t.node);return i===0?cr(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return H.MIN}maxPost(){return H.MAX}makePost(e,t){let i=De(e);return new H(t,i)}toString(){return".value"}},Q0=new od;function Y0(n){return{type:"value",snapshotNode:n}}function J0(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function X0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function oy(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function Z0(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var ad=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ne}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return k(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return k(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:tr}hasEnd(){return this.endSet_}getIndexEndValue(){return k(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return k(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ii}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return k(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ne}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function ay(n){let e={};if(n.isDefault())return e;let t;if(n.index_===Ne?t="$priority":n.index_===Q0?t="$value":n.index_===er?t="$key":(k(n.index_ instanceof sd,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=ge(t),n.startSet_){let i=n.startAfterSet_?"startAfter":"startAt";e[i]=ge(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+ge(n.indexStartName_))}if(n.endSet_){let i=n.endBeforeSet_?"endBefore":"endAt";e[i]=ge(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+ge(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function cy(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Ne&&(e.i=n.index_.toString()),e}var cd=class n extends Qa{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=qs("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(k(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let a=n.getListenId_(e,i),c={};this.listens_[a]=c;let u=ay(e._queryParams);this.restRequest_(s+".json",u,(d,p)=>{let m=p;if(d===404&&(m=null,d=null),d===null&&this.onDataUpdate_(s,m,!1,i),jn(this.listens_,a)===c){let b;d?d===401?b="permission_denied":b="rest_error:"+d:b="ok",r(b,null)}})}unlisten(e,t){let i=n.getListenId_(e,t);delete this.listens_[i]}get(e){let t=ay(e._queryParams),i=e._path.toString(),r=new Vn;return this.restRequest_(i+".json",t,(s,a)=>{let c=a;s===404&&(c=null,s=null),s===null?(this.onDataUpdate_(i,c,!1,null),r.resolve(c)):r.reject(new Error(c))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);let a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+$n(t);this.log_("Sending REST request for "+a);let c=new XMLHttpRequest;c.onreadystatechange=()=>{if(i&&c.readyState===4){this.log_("REST Response for "+a+" received. status:",c.status,"response:",c.responseText);let u=null;if(c.status>=200&&c.status<300){try{u=Mi(c.responseText)}catch{et("Failed to parse JSON response for "+a+": "+c.responseText)}i(null,u)}else c.status!==401&&c.status!==404&&et("Got unsuccessful REST response for "+a+" Status: "+c.status),i(c.status);i=null}},c.open("GET",a,!0),c.send()})}};var ld=class{constructor(){this.rootNode_=se.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function ec(){return{value:null,children:new Map}}function Xy(n,e,t){if($(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let i=G(e);n.children.has(i)||n.children.set(i,ec());let r=n.children.get(i);e=re(e),Xy(r,e,t)}}function ud(n,e,t){n.value!==null?t(e,n.value):eR(n,(i,r)=>{let s=new ne(e.toString()+"/"+i);ud(r,s,t)})}function eR(n,e){n.children.forEach((t,i)=>{e(i,t)})}var hd=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ut(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}};var ly=10*1e3,tR=30*1e3,nR=5*60*1e3,dd=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new hd(e);let i=ly+(tR-ly)*Math.random();Ls(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let e=this.statsListener_.get(),t={},i=!1;ut(e,(r,s)=>{s>0&&Je(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),Ls(this.reportStats_.bind(this),Math.floor(Math.random()*2*nR))}};var Jt=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Jt||{});function Zy(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ev(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function tv(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var fd=class n{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Jt.ACK_USER_WRITE,this.source=Zy()}operationForChild(e){if($(this.path)){if(this.affectedTree.value!=null)return k(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new ne(e));return new n(ee(),t,this.revert)}}else return k(G(this.path)===e,"operationForChild called for unrelated child."),new n(re(this.path),this.affectedTree,this.revert)}};var sr=class n{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Jt.OVERWRITE}operationForChild(e){return $(this.path)?new n(this.source,ee(),this.snap.getImmediateChild(e)):new n(this.source,re(this.path),this.snap)}};var tc=class n{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Jt.MERGE}operationForChild(e){if($(this.path)){let t=this.children.subtree(new ne(e));return t.isEmpty()?null:t.value?new sr(this.source,ee(),t.value):new n(this.source,ee(),t)}else return k(G(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,re(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var js=class{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($(e))return this.isFullyInitialized()&&!this.filtered_;let t=G(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function iR(n,e,t,i){let r=[],s=[];return e.forEach(a=>{a.type==="child_changed"&&n.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&s.push(Z0(a.childName,a.snapshotNode))}),Ms(n,r,"child_removed",e,i,t),Ms(n,r,"child_added",e,i,t),Ms(n,r,"child_moved",s,i,t),Ms(n,r,"child_changed",e,i,t),Ms(n,r,"value",e,i,t),r}function Ms(n,e,t,i,r,s){let a=i.filter(c=>c.type===t);a.sort((c,u)=>sR(n,c,u)),a.forEach(c=>{let u=rR(n,c,s);r.forEach(d=>{d.respondsTo(c.type)&&e.push(d.createEvent(u,n.query_))})})}function rR(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function sR(n,e,t){if(e.childName==null||t.childName==null)throw Un("Should only compare child_ events.");let i=new H(e.childName,e.snapshotNode),r=new H(t.childName,t.snapshotNode);return n.index_.compare(i,r)}function nv(n,e){return{eventCache:n,serverCache:e}}function Vs(n,e,t,i){return nv(new js(e,t,i),n.serverCache)}function iv(n,e,t,i){return nv(n.eventCache,new js(e,t,i))}function pd(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ri(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var Fh,oR=()=>(Fh||(Fh=new lt(o0)),Fh),$e=class n{constructor(e,t=oR()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return ut(e,(i,r)=>{t=t.set(new ne(i),r)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:ee(),value:this.value};if($(e))return null;{let i=G(e),r=this.children.get(i);if(r!==null){let s=r.findRootMostMatchingPathAndValue(re(e),t);return s!=null?{path:_e(new ne(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($(e))return this;{let t=G(e),i=this.children.get(t);return i!==null?i.subtree(re(e)):new n(null)}}set(e,t){if($(e))return new n(t,this.children);{let i=G(e),s=(this.children.get(i)||new n(null)).set(re(e),t),a=this.children.insert(i,s);return new n(this.value,a)}}remove(e){if($(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=G(e),i=this.children.get(t);if(i){let r=i.remove(re(e)),s;return r.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,r),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if($(e))return this.value;{let t=G(e),i=this.children.get(t);return i?i.get(re(e)):null}}setTree(e,t){if($(e))return t;{let i=G(e),s=(this.children.get(i)||new n(null)).setTree(re(e),t),a;return s.isEmpty()?a=this.children.remove(i):a=this.children.insert(i,s),new n(this.value,a)}}fold(e){return this.fold_(ee(),e)}fold_(e,t){let i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(_e(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,ee(),t)}findOnPath_(e,t,i){let r=this.value?i(t,this.value):!1;if(r)return r;if($(e))return null;{let s=G(e),a=this.children.get(s);return a?a.findOnPath_(re(e),_e(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ee(),t)}foreachOnPath_(e,t,i){if($(e))return this;{this.value&&i(t,this.value);let r=G(e),s=this.children.get(r);return s?s.foreachOnPath_(re(e),_e(t,r),i):new n(null)}}foreach(e){this.foreach_(ee(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(_e(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}};var bt=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new $e(null))}};function Us(n,e,t){if($(e))return new bt(new $e(t));{let i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){let r=i.path,s=i.value,a=ct(r,e);return s=s.updateChild(a,t),new bt(n.writeTree_.set(r,s))}else{let r=new $e(t),s=n.writeTree_.setTree(e,r);return new bt(s)}}}function uy(n,e,t){let i=n;return ut(t,(r,s)=>{i=Us(i,_e(e,r),s)}),i}function hy(n,e){if($(e))return bt.empty();{let t=n.writeTree_.setTree(e,new $e(null));return new bt(t)}}function md(n,e){return si(n,e)!=null}function si(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(ct(t.path,e)):null}function dy(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Ne,(i,r)=>{e.push(new H(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new H(i,r.value))}),e}function An(n,e){if($(e))return n;{let t=si(n,e);return t!=null?new bt(new $e(t)):new bt(n.writeTree_.subtree(e))}}function gd(n){return n.writeTree_.isEmpty()}function or(n,e){return rv(ee(),n.writeTree_,e)}function rv(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(k(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):t=rv(_e(n,r),s,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(_e(n,".priority"),i)),t}}function sv(n,e){return uv(e,n)}function aR(n,e,t,i,r){k(i>n.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=Us(n.visibleWrites,e,t)),n.lastWriteId=i}function cR(n,e){for(let t=0;t<n.allWrites.length;t++){let i=n.allWrites[t];if(i.writeId===e)return i}return null}function lR(n,e){let t=n.allWrites.findIndex(c=>c.writeId===e);k(t>=0,"removeWrite called with nonexistent writeId.");let i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,a=n.allWrites.length-1;for(;r&&a>=0;){let c=n.allWrites[a];c.visible&&(a>=t&&uR(c,i.path)?r=!1:Tt(i.path,c.path)&&(s=!0)),a--}if(r){if(s)return hR(n),!0;if(i.snap)n.visibleWrites=hy(n.visibleWrites,i.path);else{let c=i.children;ut(c,u=>{n.visibleWrites=hy(n.visibleWrites,_e(i.path,u))})}return!0}else return!1}function uR(n,e){if(n.snap)return Tt(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&Tt(_e(n.path,t),e))return!0;return!1}function hR(n){n.visibleWrites=ov(n.allWrites,dR,ee()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function dR(n){return n.visible}function ov(n,e,t){let i=bt.empty();for(let r=0;r<n.length;++r){let s=n[r];if(e(s)){let a=s.path,c;if(s.snap)Tt(t,a)?(c=ct(t,a),i=Us(i,c,s.snap)):Tt(a,t)&&(c=ct(a,t),i=Us(i,ee(),s.snap.getChild(c)));else if(s.children){if(Tt(t,a))c=ct(t,a),i=uy(i,c,s.children);else if(Tt(a,t))if(c=ct(a,t),$(c))i=uy(i,ee(),s.children);else{let u=jn(s.children,G(c));if(u){let d=u.getChild(re(c));i=Us(i,ee(),d)}}}else throw Un("WriteRecord should have .snap or .children")}}return i}function av(n,e,t,i,r){if(!i&&!r){let s=si(n.visibleWrites,e);if(s!=null)return s;{let a=An(n.visibleWrites,e);if(gd(a))return t;if(t==null&&!md(a,ee()))return null;{let c=t||se.EMPTY_NODE;return or(a,c)}}}else{let s=An(n.visibleWrites,e);if(!r&&gd(s))return t;if(!r&&t==null&&!md(s,ee()))return null;{let a=function(d){return(d.visible||r)&&(!i||!~i.indexOf(d.writeId))&&(Tt(d.path,e)||Tt(e,d.path))},c=ov(n.allWrites,a,e),u=t||se.EMPTY_NODE;return or(c,u)}}}function fR(n,e,t){let i=se.EMPTY_NODE,r=si(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Ne,(s,a)=>{i=i.updateImmediateChild(s,a)}),i;if(t){let s=An(n.visibleWrites,e);return t.forEachChild(Ne,(a,c)=>{let u=or(An(s,new ne(a)),c);i=i.updateImmediateChild(a,u)}),dy(s).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}else{let s=An(n.visibleWrites,e);return dy(s).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}}function pR(n,e,t,i,r){k(i||r,"Either existingEventSnap or existingServerSnap must exist");let s=_e(e,t);if(md(n.visibleWrites,s))return null;{let a=An(n.visibleWrites,s);return gd(a)?r.getChild(t):or(a,r.getChild(t))}}function mR(n,e,t,i){let r=_e(e,t),s=si(n.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(t)){let a=An(n.visibleWrites,r);return or(a,i.getNode().getImmediateChild(t))}else return null}function gR(n,e){return si(n.visibleWrites,e)}function _R(n,e,t,i,r,s,a){let c,u=An(n.visibleWrites,e),d=si(u,ee());if(d!=null)c=d;else if(t!=null)c=or(u,t);else return[];if(c=c.withIndex(a),!c.isEmpty()&&!c.isLeafNode()){let p=[],m=a.getCompare(),b=s?c.getReverseIteratorFrom(i,a):c.getIteratorFrom(i,a),R=b.getNext();for(;R&&p.length<r;)m(R,i)!==0&&p.push(R),R=b.getNext();return p}else return[]}function yR(){return{visibleWrites:bt.empty(),allWrites:[],lastWriteId:-1}}function _d(n,e,t,i){return av(n.writeTree,n.treePath,e,t,i)}function cv(n,e){return fR(n.writeTree,n.treePath,e)}function fy(n,e,t,i){return pR(n.writeTree,n.treePath,e,t,i)}function nc(n,e){return gR(n.writeTree,_e(n.treePath,e))}function vR(n,e,t,i,r,s){return _R(n.writeTree,n.treePath,e,t,i,r,s)}function Md(n,e,t){return mR(n.writeTree,n.treePath,e,t)}function lv(n,e){return uv(_e(n.treePath,e),n.writeTree)}function uv(n,e){return{treePath:n,writeTree:e}}var yd=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,i=e.childName;k(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),k(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let s=r.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(i,oy(i,e.snapshotNode,r.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(i,X0(i,r.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(i,J0(i,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(i,oy(i,e.snapshotNode,r.oldSnap));else throw Un("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}};var vd=class{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}},hv=new vd,Bs=class{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let i=this.optCompleteServerCache_!=null?new js(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Md(this.writes_,e,i)}}getChildAfterChild(e,t,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ri(this.viewCache_),s=vR(this.writes_,r,t,1,i,e);return s.length===0?null:s[0]}};function IR(n,e){k(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),k(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function wR(n,e,t,i,r){let s=new yd,a,c;if(t.type===Jt.OVERWRITE){let d=t;d.source.fromUser?a=Id(n,e,d.path,d.snap,i,r,s):(k(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered()&&!$(d.path),a=ic(n,e,d.path,d.snap,i,r,c,s))}else if(t.type===Jt.MERGE){let d=t;d.source.fromUser?a=TR(n,e,d.path,d.children,i,r,s):(k(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered(),a=wd(n,e,d.path,d.children,i,r,c,s))}else if(t.type===Jt.ACK_USER_WRITE){let d=t;d.revert?a=CR(n,e,d.path,i,r,s):a=bR(n,e,d.path,d.affectedTree,i,r,s)}else if(t.type===Jt.LISTEN_COMPLETE)a=AR(n,e,t.path,i,s);else throw Un("Unknown operation type: "+t.type);let u=s.getChanges();return ER(e,a,u),{viewCache:a,changes:u}}function ER(n,e,t){let i=e.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=pd(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(Y0(pd(e)))}}function dv(n,e,t,i,r,s){let a=e.eventCache;if(nc(i,t)!=null)return e;{let c,u;if($(t))if(k(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let d=ri(e),p=d instanceof se?d:se.EMPTY_NODE,m=cv(i,p);c=n.filter.updateFullNode(e.eventCache.getNode(),m,s)}else{let d=_d(i,ri(e));c=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let d=G(t);if(d===".priority"){k(Cn(t)===1,"Can't have a priority with additional path components");let p=a.getNode();u=e.serverCache.getNode();let m=fy(i,t,p,u);m!=null?c=n.filter.updatePriority(p,m):c=a.getNode()}else{let p=re(t),m;if(a.isCompleteForChild(d)){u=e.serverCache.getNode();let b=fy(i,t,a.getNode(),u);b!=null?m=a.getNode().getImmediateChild(d).updateChild(p,b):m=a.getNode().getImmediateChild(d)}else m=Md(i,d,e.serverCache);m!=null?c=n.filter.updateChild(a.getNode(),d,m,p,r,s):c=a.getNode()}}return Vs(e,c,a.isFullyInitialized()||$(t),n.filter.filtersNodes())}}function ic(n,e,t,i,r,s,a,c){let u=e.serverCache,d,p=a?n.filter:n.filter.getIndexedFilter();if($(t))d=p.updateFullNode(u.getNode(),i,null);else if(p.filtersNodes()&&!u.isFiltered()){let R=u.getNode().updateChild(t,i);d=p.updateFullNode(u.getNode(),R,null)}else{let R=G(t);if(!u.isCompleteForPath(t)&&Cn(t)>1)return e;let S=re(t),D=u.getNode().getImmediateChild(R).updateChild(S,i);R===".priority"?d=p.updatePriority(u.getNode(),D):d=p.updateChild(u.getNode(),R,D,S,hv,null)}let m=iv(e,d,u.isFullyInitialized()||$(t),p.filtersNodes()),b=new Bs(r,m,s);return dv(n,m,t,r,b,c)}function Id(n,e,t,i,r,s,a){let c=e.eventCache,u,d,p=new Bs(r,e,s);if($(t))d=n.filter.updateFullNode(e.eventCache.getNode(),i,a),u=Vs(e,d,!0,n.filter.filtersNodes());else{let m=G(t);if(m===".priority")d=n.filter.updatePriority(e.eventCache.getNode(),i),u=Vs(e,d,c.isFullyInitialized(),c.isFiltered());else{let b=re(t),R=c.getNode().getImmediateChild(m),S;if($(b))S=i;else{let N=p.getCompleteChild(m);N!=null?zy(b)===".priority"&&N.getChild(Wy(b)).isEmpty()?S=N:S=N.updateChild(b,i):S=se.EMPTY_NODE}if(R.equals(S))u=e;else{let N=n.filter.updateChild(c.getNode(),m,S,b,p,a);u=Vs(e,N,c.isFullyInitialized(),n.filter.filtersNodes())}}}return u}function py(n,e){return n.eventCache.isCompleteForChild(e)}function TR(n,e,t,i,r,s,a){let c=e;return i.foreach((u,d)=>{let p=_e(t,u);py(e,G(p))&&(c=Id(n,c,p,d,r,s,a))}),i.foreach((u,d)=>{let p=_e(t,u);py(e,G(p))||(c=Id(n,c,p,d,r,s,a))}),c}function my(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function wd(n,e,t,i,r,s,a,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,d;$(t)?d=i:d=new $e(null).setTree(t,i);let p=e.serverCache.getNode();return d.children.inorderTraversal((m,b)=>{if(p.hasChild(m)){let R=e.serverCache.getNode().getImmediateChild(m),S=my(n,R,b);u=ic(n,u,new ne(m),S,r,s,a,c)}}),d.children.inorderTraversal((m,b)=>{let R=!e.serverCache.isCompleteForChild(m)&&b.value===null;if(!p.hasChild(m)&&!R){let S=e.serverCache.getNode().getImmediateChild(m),N=my(n,S,b);u=ic(n,u,new ne(m),N,r,s,a,c)}}),u}function bR(n,e,t,i,r,s,a){if(nc(r,t)!=null)return e;let c=e.serverCache.isFiltered(),u=e.serverCache;if(i.value!=null){if($(t)&&u.isFullyInitialized()||u.isCompleteForPath(t))return ic(n,e,t,u.getNode().getChild(t),r,s,c,a);if($(t)){let d=new $e(null);return u.getNode().forEachChild(er,(p,m)=>{d=d.set(new ne(p),m)}),wd(n,e,t,d,r,s,c,a)}else return e}else{let d=new $e(null);return i.foreach((p,m)=>{let b=_e(t,p);u.isCompleteForPath(b)&&(d=d.set(p,u.getNode().getChild(b)))}),wd(n,e,t,d,r,s,c,a)}}function AR(n,e,t,i,r){let s=e.serverCache,a=iv(e,s.getNode(),s.isFullyInitialized()||$(t),s.isFiltered());return dv(n,a,t,i,hv,r)}function CR(n,e,t,i,r,s){let a;if(nc(i,t)!=null)return e;{let c=new Bs(i,e,r),u=e.eventCache.getNode(),d;if($(t)||G(t)===".priority"){let p;if(e.serverCache.isFullyInitialized())p=_d(i,ri(e));else{let m=e.serverCache.getNode();k(m instanceof se,"serverChildren would be complete if leaf node"),p=cv(i,m)}p=p,d=n.filter.updateFullNode(u,p,s)}else{let p=G(t),m=Md(i,p,e.serverCache);m==null&&e.serverCache.isCompleteForChild(p)&&(m=u.getImmediateChild(p)),m!=null?d=n.filter.updateChild(u,p,m,re(t),c,s):e.eventCache.getNode().hasChild(p)?d=n.filter.updateChild(u,p,se.EMPTY_NODE,re(t),c,s):d=u,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=_d(i,ri(e)),a.isLeafNode()&&(d=n.filter.updateFullNode(d,a,s)))}return a=e.serverCache.isFullyInitialized()||nc(i,ee())!=null,Vs(e,d,a,n.filter.filtersNodes())}}function SR(n,e){let t=ri(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!$(e)&&!t.getImmediateChild(G(e)).isEmpty())?t.getChild(e):null}function gy(n,e,t,i){e.type===Jt.MERGE&&e.source.queryId!==null&&(k(ri(n.viewCache_),"We should always have a full cache before handling merges"),k(pd(n.viewCache_),"Missing event cache, even though we have a server cache"));let r=n.viewCache_,s=wR(n.processor_,r,e,t,i);return IR(n.processor_,s.viewCache),k(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,RR(n,s.changes,s.viewCache.eventCache.getNode(),null)}function RR(n,e,t,i){let r=i?[i]:n.eventRegistrations_;return iR(n.eventGenerator_,e,t,r)}var _y;function PR(n){k(!_y,"__referenceConstructor has already been defined"),_y=n}function Ld(n,e,t,i){let r=e.source.queryId;if(r!==null){let s=n.views.get(r);return k(s!=null,"SyncTree gave us an op for an invalid query."),gy(s,e,t,i)}else{let s=[];for(let a of n.views.values())s=s.concat(gy(a,e,t,i));return s}}function Fd(n,e){let t=null;for(let i of n.views.values())t=t||SR(i,e);return t}var yy;function DR(n){k(!yy,"__referenceConstructor has already been defined"),yy=n}var rc=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new $e(null),this.pendingWriteTree_=yR(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function NR(n,e,t,i,r){return aR(n.pendingWriteTree_,e,t,i,r),r?oc(n,new sr(Zy(),e,t)):[]}function Xi(n,e,t=!1){let i=cR(n.pendingWriteTree_,e);if(lR(n.pendingWriteTree_,e)){let s=new $e(null);return i.snap!=null?s=s.set(ee(),!0):ut(i.children,a=>{s=s.set(new ne(a),!0)}),oc(n,new fd(i.path,s,t))}else return[]}function sc(n,e,t){return oc(n,new sr(ev(),e,t))}function kR(n,e,t){let i=$e.fromObject(t);return oc(n,new tc(ev(),e,i))}function xR(n,e,t,i){let r=gv(n,i);if(r!=null){let s=_v(r),a=s.path,c=s.queryId,u=ct(a,e),d=new sr(tv(c),u,t);return yv(n,a,d)}else return[]}function OR(n,e,t,i){let r=gv(n,i);if(r){let s=_v(r),a=s.path,c=s.queryId,u=ct(a,e),d=$e.fromObject(t),p=new tc(tv(c),u,d);return yv(n,a,p)}else return[]}function fv(n,e,t){let r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(a,c)=>{let u=ct(a,e),d=Fd(c,u);if(d)return d});return av(r,e,s,t,!0)}function oc(n,e){return pv(e,n.syncPointTree_,null,sv(n.pendingWriteTree_,ee()))}function pv(n,e,t,i){if($(n.path))return mv(n,e,t,i);{let r=e.get(ee());t==null&&r!=null&&(t=Fd(r,ee()));let s=[],a=G(n.path),c=n.operationForChild(a),u=e.children.get(a);if(u&&c){let d=t?t.getImmediateChild(a):null,p=lv(i,a);s=s.concat(pv(c,u,d,p))}return r&&(s=s.concat(Ld(r,n,i,t))),s}}function mv(n,e,t,i){let r=e.get(ee());t==null&&r!=null&&(t=Fd(r,ee()));let s=[];return e.children.inorderTraversal((a,c)=>{let u=t?t.getImmediateChild(a):null,d=lv(i,a),p=n.operationForChild(a);p&&(s=s.concat(mv(p,c,u,d)))}),r&&(s=s.concat(Ld(r,n,i,t))),s}function gv(n,e){return n.tagToQueryMap.get(e)}function _v(n){let e=n.indexOf("$");return k(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ne(n.substr(0,e))}}function yv(n,e,t){let i=n.syncPointTree_.get(e);k(i,"Missing sync point for query tag that we're tracking");let r=sv(n.pendingWriteTree_,e);return Ld(i,t,r,null)}var Ed=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},Td=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=_e(this.path_,e);return new n(this.syncTree_,t)}node(){return fv(this.syncTree_,this.path_)}},MR=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},vy=function(n,e,t){if(!n||typeof n!="object")return n;if(k(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return LR(n[".sv"],e,t);if(typeof n[".sv"]=="object")return FR(n[".sv"],e);k(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},LR=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:k(!1,"Unexpected server value: "+n)}},FR=function(n,e,t){n.hasOwnProperty("increment")||k(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let i=n.increment;typeof i!="number"&&k(!1,"Unexpected increment value: "+i);let r=e.node();if(k(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let a=r.getValue();return typeof a!="number"?i:a+i},VR=function(n,e,t,i){return Vd(e,new Td(t,n),i)},UR=function(n,e,t){return Vd(n,new Ed(e),t)};function Vd(n,e,t){let i=n.getPriority().val(),r=vy(i,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let a=n,c=vy(a.getValue(),e,t);return c!==a.getValue()||r!==a.getPriority().val()?new ir(c,De(r)):n}else{let a=n;return s=a,r!==a.getPriority().val()&&(s=s.updatePriority(new ir(r))),a.forEachChild(Ne,(c,u)=>{let d=Vd(u,e.getImmediateChild(c),t);d!==u&&(s=s.updateImmediateChild(c,d))}),s}}var $s=class{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}};function Ud(n,e){let t=e instanceof ne?e:new ne(e),i=n,r=G(t);for(;r!==null;){let s=jn(i.node.children,r)||{children:{},childCount:0};i=new $s(r,i,s),t=re(t),r=G(t)}return i}function lr(n){return n.node.value}function vv(n,e){n.node.value=e,bd(n)}function Iv(n){return n.node.childCount>0}function jR(n){return lr(n)===void 0&&!Iv(n)}function ac(n,e){ut(n.node.children,(t,i)=>{e(new $s(t,n,i))})}function wv(n,e,t,i){t&&!i&&e(n),ac(n,r=>{wv(r,e,!0,i)}),t&&i&&e(n)}function BR(n,e,t){let i=t?n:n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Hs(n){return new ne(n.parent===null?n.name:Hs(n.parent)+"/"+n.name)}function bd(n){n.parent!==null&&$R(n.parent,n.name,n)}function $R(n,e,t){let i=jR(t),r=Je(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,bd(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,bd(n))}var zR=/[\[\].#$\/\u0000-\u001F\u007F]/,qR=/[\[\].#$\u0000-\u001F\u007F]/,Vh=10*1024*1024,Ev=function(n){return typeof n=="string"&&n.length!==0&&!zR.test(n)},WR=function(n){return typeof n=="string"&&n.length!==0&&!qR.test(n)},GR=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),WR(n)};var Tv=function(n,e,t){let i=t instanceof ne?new Xh(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+ei(i));if(typeof e=="function")throw new Error(n+"contains a function "+ei(i)+" with contents = "+e.toString());if(Ay(e))throw new Error(n+"contains "+e.toString()+" "+ei(i));if(typeof e=="string"&&e.length>Vh/3&&_s(e)>Vh)throw new Error(n+"contains a string greater than "+Vh+" utf8 bytes "+ei(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(ut(e,(a,c)=>{if(a===".value")r=!0;else if(a!==".priority"&&a!==".sv"&&(s=!0,!Ev(a)))throw new Error(n+" contains an invalid key ("+a+") "+ei(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);F0(i,a),Tv(n,c,i),V0(i)}),r&&s)throw new Error(n+' contains ".value" child '+ei(i)+" in addition to actual children.")}};var HR=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Ev(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!GR(t))throw new Error(cg(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Ad=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function KR(n,e){let t=null;for(let i=0;i<e.length;i++){let r=e[i],s=r.getPath();t!==null&&!Gy(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function oi(n,e,t){KR(n,t),QR(n,i=>Tt(i,e)||Tt(e,i))}function QR(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){let r=n.eventLists_[i];if(r){let s=r.path;e(s)?(YR(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function YR(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let i=t.getEventRunner();ni&&Pe("event: "+t.toString()),Ws(i)}}}var JR="repo_interrupt",XR=25,Cd=class{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ad,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ec(),this.transactionQueueTree_=new $s,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function ZR(n,e,t){if(n.stats_=kd(n.repoInfo_),n.forceRestClient_||d0())n.server_=new cd(n.repoInfo_,(i,r,s,a)=>{Iy(n,i,r,s,a)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>wy(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ge(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new xd(n.repoInfo_,e,(i,r,s,a)=>{Iy(n,i,r,s,a)},i=>{wy(n,i)},i=>{tP(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=p0(n.repoInfo_,()=>new dd(n.stats_,n.server_)),n.infoData_=new ld,n.infoSyncTree_=new rc({startListening:(i,r,s,a)=>{let c=[],u=n.infoData_.getNode(i._path);return u.isEmpty()||(c=sc(n.infoSyncTree_,i._path,u),setTimeout(()=>{a("ok")},0)),c},stopListening:()=>{}}),jd(n,"connected",!1),n.serverSyncTree_=new rc({startListening:(i,r,s,a)=>(n.server_.listen(i,s,r,(c,u)=>{let d=a(c,u);oi(n.eventQueue_,i._path,d)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}function eP(n){let t=n.infoData_.getNode(new ne(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function bv(n){return MR({timestamp:eP(n)})}function Iy(n,e,t,i,r){n.dataUpdateCount++;let s=new ne(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let a=[];if(r)if(i){let u=gs(t,d=>De(d));a=OR(n.serverSyncTree_,s,u,r)}else{let u=De(t);a=xR(n.serverSyncTree_,s,u,r)}else if(i){let u=gs(t,d=>De(d));a=kR(n.serverSyncTree_,s,u)}else{let u=De(t);a=sc(n.serverSyncTree_,s,u)}let c=s;a.length>0&&(c=$d(n,s)),oi(n.eventQueue_,c,a)}function wy(n,e){jd(n,"connected",e),e===!1&&iP(n)}function tP(n,e){ut(e,(t,i)=>{jd(n,t,i)})}function jd(n,e,t){let i=new ne("/.info/"+e),r=De(t);n.infoData_.updateSnapshot(i,r);let s=sc(n.infoSyncTree_,i,r);oi(n.eventQueue_,i,s)}function nP(n){return n.nextWriteId_++}function iP(n){Av(n,"onDisconnectEvents");let e=bv(n),t=ec();ud(n.onDisconnect_,ee(),(r,s)=>{let a=VR(r,s,n.serverSyncTree_,e);Xy(t,r,a)});let i=[];ud(t,ee(),(r,s)=>{i=i.concat(sc(n.serverSyncTree_,r,s));let a=aP(n,r);$d(n,a)}),n.onDisconnect_=ec(),oi(n.eventQueue_,ee(),i)}function rP(n){n.persistentConnection_&&n.persistentConnection_.interrupt(JR)}function Av(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Pe(t,...e)}function Cv(n,e,t){return fv(n.serverSyncTree_,e,t)||se.EMPTY_NODE}function Bd(n,e=n.transactionQueueTree_){if(e||cc(n,e),lr(e)){let t=Rv(n,e);k(t.length>0,"Sending zero length transaction queue"),t.every(r=>r.status===0)&&sP(n,Hs(e),t)}else Iv(e)&&ac(e,t=>{Bd(n,t)})}function sP(n,e,t){let i=t.map(d=>d.currentWriteId),r=Cv(n,e,i),s=r,a=r.hash();for(let d=0;d<t.length;d++){let p=t[d];k(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;let m=ct(e,p.path);s=s.updateChild(m,p.currentOutputSnapshotRaw)}let c=s.val(!0),u=e;n.server_.put(u.toString(),c,d=>{Av(n,"transaction put response",{path:u.toString(),status:d});let p=[];if(d==="ok"){let m=[];for(let b=0;b<t.length;b++)t[b].status=2,p=p.concat(Xi(n.serverSyncTree_,t[b].currentWriteId)),t[b].onComplete&&m.push(()=>t[b].onComplete(null,!0,t[b].currentOutputSnapshotResolved)),t[b].unwatcher();cc(n,Ud(n.transactionQueueTree_,e)),Bd(n,n.transactionQueueTree_),oi(n.eventQueue_,e,p);for(let b=0;b<m.length;b++)Ws(m[b])}else{if(d==="datastale")for(let m=0;m<t.length;m++)t[m].status===3?t[m].status=4:t[m].status=0;else{et("transaction at "+u.toString()+" failed: "+d);for(let m=0;m<t.length;m++)t[m].status=4,t[m].abortReason=d}$d(n,e)}},a)}function $d(n,e){let t=Sv(n,e),i=Hs(t),r=Rv(n,t);return oP(n,r,i),i}function oP(n,e,t){if(e.length===0)return;let i=[],r=[],a=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){let u=e[c],d=ct(t,u.path),p=!1,m;if(k(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)p=!0,m=u.abortReason,r=r.concat(Xi(n.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=XR)p=!0,m="maxretry",r=r.concat(Xi(n.serverSyncTree_,u.currentWriteId,!0));else{let b=Cv(n,u.path,a);u.currentInputSnapshot=b;let R=e[c].update(b.val());if(R!==void 0){Tv("transaction failed: Data returned ",R,u.path);let S=De(R);typeof R=="object"&&R!=null&&Je(R,".priority")||(S=S.updatePriority(b.getPriority()));let D=u.currentWriteId,Q=bv(n),Y=UR(S,b,Q);u.currentOutputSnapshotRaw=S,u.currentOutputSnapshotResolved=Y,u.currentWriteId=nP(n),a.splice(a.indexOf(D),1),r=r.concat(NR(n.serverSyncTree_,u.path,Y,u.currentWriteId,u.applyLocally)),r=r.concat(Xi(n.serverSyncTree_,D,!0))}else p=!0,m="nodata",r=r.concat(Xi(n.serverSyncTree_,u.currentWriteId,!0))}oi(n.eventQueue_,t,r),r=[],p&&(e[c].status=2,function(b){setTimeout(b,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(m==="nodata"?i.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):i.push(()=>e[c].onComplete(new Error(m),!1,null))))}cc(n,n.transactionQueueTree_);for(let c=0;c<i.length;c++)Ws(i[c]);Bd(n,n.transactionQueueTree_)}function Sv(n,e){let t,i=n.transactionQueueTree_;for(t=G(e);t!==null&&lr(i)===void 0;)i=Ud(i,t),e=re(e),t=G(e);return i}function Rv(n,e){let t=[];return Pv(n,e,t),t.sort((i,r)=>i.order-r.order),t}function Pv(n,e,t){let i=lr(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);ac(e,r=>{Pv(n,r,t)})}function cc(n,e){let t=lr(e);if(t){let i=0;for(let r=0;r<t.length;r++)t[r].status!==2&&(t[i]=t[r],i++);t.length=i,vv(e,t.length>0?t:void 0)}ac(e,i=>{cc(n,i)})}function aP(n,e){let t=Hs(Sv(n,e)),i=Ud(n.transactionQueueTree_,e);return BR(i,r=>{Uh(n,r)}),Uh(n,i),wv(i,r=>{Uh(n,r)}),t}function Uh(n,e){let t=lr(e);if(t){let i=[],r=[],s=-1;for(let a=0;a<t.length;a++)t[a].status===3||(t[a].status===1?(k(s===a-1,"All SENT items should be at beginning of queue."),s=a,t[a].status=3,t[a].abortReason="set"):(k(t[a].status===0,"Unexpected transaction status in abort"),t[a].unwatcher(),r=r.concat(Xi(n.serverSyncTree_,t[a].currentWriteId,!0)),t[a].onComplete&&i.push(t[a].onComplete.bind(null,new Error("set"),!1,null))));s===-1?vv(e,void 0):t.length=s+1,oi(n.eventQueue_,Hs(e),r);for(let a=0;a<i.length;a++)Ws(i[a])}}function cP(n){let e="",t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function lP(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):et(`Invalid query segment '${t}' in query '${n}'`)}return e}var Ey=function(n,e){let t=uP(n),i=t.namespace;t.domain==="firebase.com"&&Xt(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&Xt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||r0();let r=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Ha(t.host,t.secure,i,r,e,"",i!==t.subdomain),path:new ne(t.pathString)}},uP=function(n){let e="",t="",i="",r="",s="",a=!0,c="https",u=443;if(typeof n=="string"){let d=n.indexOf("//");d>=0&&(c=n.substring(0,d-1),n=n.substring(d+2));let p=n.indexOf("/");p===-1&&(p=n.length);let m=n.indexOf("?");m===-1&&(m=n.length),e=n.substring(0,Math.min(p,m)),p<m&&(r=cP(n.substring(p,m)));let b=lP(n.substring(Math.min(n.length,m)));d=e.indexOf(":"),d>=0?(a=c==="https"||c==="wss",u=parseInt(e.substring(d+1),10)):d=e.length;let R=e.slice(0,d);if(R.toLowerCase()==="localhost")t="localhost";else if(R.split(".").length<=2)t=R;else{let S=e.indexOf(".");i=e.substring(0,S).toLowerCase(),t=e.substring(S+1),s=i}"ns"in b&&(s=b.ns)}return{host:e,port:u,domain:t,subdomain:i,secure:a,scheme:c,pathString:r,namespace:s}};var Sd=class n{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return $(this._path)?null:zy(this._path)}get ref(){return new ar(this._repo,this._path)}get _queryIdentifier(){let e=cy(this._queryParams),t=Nd(e);return t==="{}"?"default":t}get _queryObject(){return cy(this._queryParams)}isEqual(e){if(e=vt(e),!(e instanceof n))return!1;let t=this._repo===e._repo,i=Gy(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+L0(this._path)}};var ar=class n extends Sd{constructor(e,t){super(e,t,new ad,!1)}get parent(){let e=Wy(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};PR(ar);DR(ar);var hP="FIREBASE_DATABASE_EMULATOR_HOST",Rd={},dP=!1;function fP(n,e,t,i){n.repoInfo_=new Ha(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}function pP(n,e,t,i,r){let s=i||n.options.databaseURL;s===void 0&&(n.options.projectId||Xt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Pe("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let a=Ey(s,r),c=a.repoInfo,u,d;typeof process<"u"&&process.env&&(d=process.env[hP]),d?(u=!0,s=`http://${d}?ns=${c.namespace}`,a=Ey(s,r),c=a.repoInfo):u=!a.repoInfo.secure;let p=r&&u?new Fs(Fs.OWNER):new Wh(n.name,n.options,e);HR("Invalid Firebase Database URL",a),$(a.path)||Xt("Database URL must point to the root of a Firebase Database (not including a child path).");let m=gP(c,n,p,new qh(n.name,t));return new Pd(m,n)}function mP(n,e){let t=Rd[e];(!t||t[n.key]!==n)&&Xt(`Database ${e}(${n.repoInfo_}) has already been deleted.`),rP(n),delete t[n.key]}function gP(n,e,t,i){let r=Rd[e.name];r||(r={},Rd[e.name]=r);let s=r[n.toURLString()];return s&&Xt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Cd(n,dP,t,i),r[n.toURLString()]=s,s}var Pd=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(ZR(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ar(this._repo,ee())),this._rootInternal}_delete(){return this._rootInternal!==null&&(mP(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Xt("Cannot call "+e+" on a deleted database.")}};function Dv(n=Gt(),e){let t=Wt(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let i=ca("database");i&&Nv(t,...i)}return t}function Nv(n,e,t,i={}){n=vt(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&Xt("Cannot call useEmulator() after instance has already been initialized.");let r=n._repoInternal,s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Xt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Fs(Fs.OWNER);else if(i.mockUserToken){let a=typeof i.mockUserToken=="string"?i.mockUserToken:la(i.mockUserToken,n.app.options.projectId);s=new Fs(a)}fP(r,e,t,s)}function _P(n){t0(Ze),Xe(new Re("database",(e,{instanceIdentifier:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return pP(i,r,s,t)},"PUBLIC").setMultipleInstances(!0)),X(q_,W_,n),X(q_,W_,"esm2017")}xd.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};xd.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};_P();var Ks=class{constructor(e){return e}},kv="database",zd=class{constructor(){return Wn(kv)}};var qd=new B("angularfire2.database-instances");function yP(n,e){let t=zi(kv,n,e);return t&&new Ks(t)}function vP(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Ks(i)}}var IP={provide:zd,deps:[[new le,qd]]},wP={provide:Ks,useFactory:yP,deps:[[new le,qd],It]};function xv(n,...e){return X("angularfire",at.full,"rtdb"),Me([wP,IP,{provide:qd,useFactory:vP(n),multi:!0,deps:[Z,gt,vn,Ht,[new le,Yn],[new le,yn],...e]}])}var Ov=In(Dv,!0);var Mv={providers:[bp({eventCoalescing:!0}),Bm(zm,$m()),Hp(Kp()),{provide:iu,useValue:Wm.apiRoot},Hm(),Ym(),Rg(()=>Pg({projectId:"fir-demo-9327e",appId:"1:560572989170:web:476a7e61b14503a1c61a6b",storageBucket:"fir-demo-9327e.firebasestorage.app",apiKey:"AIzaSyBj7JNt2Mv68ItGqnQXgK5I0RFvcklzteI",authDomain:"fir-demo-9327e.firebaseapp.com",messagingSenderId:"560572989170",measurementId:"G-MP9JS8CWPG"})),v_(()=>I_()),$_(()=>z_()),xv(()=>Ov())]};console.log(`Based on Angular18 Template v${{version:Km}} [${Qm}]`);var Wd;try{Wd=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Wd=!1}var ai=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Np(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Wd)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(i){return new(i||n)(M(Ge))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Qs;function EP(){if(Qs==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Qs=!0}))}finally{Qs=Qs||!1}return Qs}function Gd(n){return EP()?n:!!n.capture}function Lv(n){return n.composedPath?n.composedPath()[0]:n.target}function Fv(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Kd(n){return Array.isArray(n)?n:[n]}function Qd(n){return n instanceof Ut?n.nativeElement:n}var Vv=new Set,ci,TP=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):AP}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&bP(t,this._nonce),this._matchMedia(t)}static{this.\u0275fac=function(i){return new(i||n)(M(ai),M(kr,8))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function bP(n,e){if(!Vv.has(n))try{ci||(ci=document.createElement("style"),e&&ci.setAttribute("nonce",e),ci.setAttribute("type","text/css"),document.head.appendChild(ci)),ci.sheet&&(ci.sheet.insertRule(`@media ${n} {body{ }}`,0),Vv.add(n))}catch(t){console.error(t)}}function AP(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var jv=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new Ft}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return Uv(Kd(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let r=Uv(Kd(t)).map(a=>this._registerQuery(a).observable),s=pi(r);return s=po(s.pipe(un(1)),s.pipe(fp(1),lp(0))),s.pipe(z(a=>{let c={matches:!1,breakpoints:{}};return a.forEach(({matches:u,query:d})=>{c.matches=c.matches||u,c.breakpoints[d]=u}),c}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let i=this._mediaMatcher.matchMedia(t),s={observable:new an(a=>{let c=u=>this._zone.run(()=>a.next(u));return i.addListener(c),()=>{i.removeListener(c)}}).pipe(mo(i),z(({matches:a})=>({query:t,matches:a})),go(this._destroySubject)),mql:i};return this._queries.set(t,s),s}static{this.\u0275fac=function(i){return new(i||n)(M(TP),M(Z))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Uv(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function zv(n){return n.buttons===0||n.detail===0}function qv(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var li=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(li||{}),Bv="cdk-high-contrast-black-on-white",$v="cdk-high-contrast-white-on-black",Yd="cdk-high-contrast-active",Wv=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=O(jv).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return li.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return li.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return li.BLACK_ON_WHITE}return li.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(Yd,Bv,$v),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===li.BLACK_ON_WHITE?t.add(Yd,Bv):i===li.WHITE_ON_BLACK&&t.add(Yd,$v)}}static{this.\u0275fac=function(i){return new(i||n)(M(ai),M(ce))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Jd=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=pe({type:n})}static{this.\u0275inj=fe({})}}return n})();function RP(){return!0}var PP=new B("mat-sanity-checks",{providedIn:"root",factory:RP}),Zt=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return Fv()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[t]}static{this.\u0275fac=function(i){return new(i||n)(M(Wv),M(PP,8),M(ce))}}static{this.\u0275mod=pe({type:n})}static{this.\u0275inj=fe({imports:[Jd,Jd]})}}return n})();var ht=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(ht||{}),Xd=class{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=ht.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},Gv=Gd({passive:!0,capture:!0}),Zd=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let t=Lv(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){let s=this._events.get(t);if(s){let a=s.get(i);a?a.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,Gv)})}removeHandler(e,t,i){let r=this._events.get(e);if(!r)return;let s=r.get(t);s&&(s.delete(i),s.size===0&&r.delete(t),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,Gv)))}},Hv={enterDuration:225,exitDuration:150},DP=800,Kv=Gd({passive:!0,capture:!0}),Qv=["mousedown","touchstart"],Yv=["mouseup","mouseleave","touchend","touchcancel"],Jv=class n{static{this._eventManager=new Zd}constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Qd(i))}fadeInRipple(e,t,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=x(x({},Hv),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);let a=i.radius||NP(e,t,r),c=e-r.left,u=t-r.top,d=s.enterDuration,p=document.createElement("div");p.classList.add("mat-ripple-element"),p.style.left=`${c-a}px`,p.style.top=`${u-a}px`,p.style.height=`${a*2}px`,p.style.width=`${a*2}px`,i.color!=null&&(p.style.backgroundColor=i.color),p.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(p);let m=window.getComputedStyle(p),b=m.transitionProperty,R=m.transitionDuration,S=b==="none"||R==="0s"||R==="0s, 0s"||r.width===0&&r.height===0,N=new Xd(this,p,i,S);p.style.transform="scale3d(1, 1, 1)",N.state=ht.FADING_IN,i.persistent||(this._mostRecentTransientRipple=N);let D=null;return!S&&(d||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let Q=()=>{D&&(D.fallbackTimer=null),clearTimeout(L),this._finishRippleTransition(N)},Y=()=>this._destroyRipple(N),L=setTimeout(Y,d+100);p.addEventListener("transitionend",Q),p.addEventListener("transitioncancel",Y),D={onTransitionEnd:Q,onTransitionCancel:Y,fallbackTimer:L}}),this._activeRipples.set(N,D),(S||!d)&&this._finishRippleTransition(N),N}fadeOutRipple(e){if(e.state===ht.FADING_OUT||e.state===ht.HIDDEN)return;let t=e.element,i=x(x({},Hv),e.config.animation);t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=ht.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=Qd(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,Qv.forEach(i=>{n._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Yv.forEach(t=>{this._triggerElement.addEventListener(t,this,Kv)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===ht.FADING_IN?this._startFadeOutTransition(e):e.state===ht.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=ht.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=ht.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=zv(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+DP;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!qv(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===ht.VISIBLE||e.config.terminateOnPointerUp&&e.state===ht.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(Qv.forEach(t=>n._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(Yv.forEach(t=>e.removeEventListener(t,this,Kv)),this._pointerUpEventsRegistered=!1))}};function NP(n,e,t){let i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}var kP=["*",[["mat-toolbar-row"]]],xP=["*","mat-toolbar-row"],OP=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Vt({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0})}}return n})(),Xv=(()=>{class n{constructor(t,i,r){this._elementRef=t,this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static{this.\u0275fac=function(i){return new(i||n)(At(Ut),At(ai),At(ce))}}static{this.\u0275cmp=Ve({type:n,selectors:[["mat-toolbar"]],contentQueries:function(i,r,s){if(i&1&&Jc(s,OP,5),i&2){let a;bo(a=Ao())&&(r._toolbarRows=a)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(i,r){i&2&&(Qc(r.color?"mat-"+r.color:""),wi("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",r._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[Ue],ngContentSelectors:xP,decls:2,vars:0,template:function(i,r){i&1&&(Ti(kP),xn(0),xn(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-app-surface));color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-app-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-app-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-app-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-app-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-app-title-large-tracking));margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface));--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0})}}return n})();var Zv=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=pe({type:n})}static{this.\u0275inj=fe({imports:[Zt,Zt]})}}return n})();var eI=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=pe({type:n})}static{this.\u0275inj=fe({imports:[Zt,Zt]})}}return n})();var ef=class{constructor(e,t){this._delegate=e,this.firebase=t,ji(e,new Re("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Is(this._delegate)))}_getService(e,t=Pt){var i;this._delegate.checkDestroyed();let r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=Pt){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){ji(this._delegate,e)}_addOrOverwriteComponent(e){Pu(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}};var LP={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},tI=new rt("app-compat","Firebase",LP);function FP(n){let e={},t={__esModule:!0,initializeApp:s,app:r,registerVersion:X,setLogLevel:_a,onLog:ga,apps:null,SDK_VERSION:Ze,INTERNAL:{registerComponent:c,removeApp:i,useAsService:u,modularAPIs:Du}};t.default=t,Object.defineProperty(t,"apps",{get:a});function i(d){delete e[d]}function r(d){if(d=d||Pt,!Je(e,d))throw tI.create("no-app",{appName:d});return e[d]}r.App=n;function s(d,p={}){let m=Bi(d,p);if(Je(e,m.name))return e[m.name];let b=new n(m,t);return e[m.name]=b,b}function a(){return Object.keys(e).map(d=>e[d])}function c(d){let p=d.name,m=p.replace("-compat","");if(Xe(d)&&d.type==="PUBLIC"){let b=(R=r())=>{if(typeof R[m]!="function")throw tI.create("invalid-app-argument",{appName:p});return R[m]()};d.serviceProps!==void 0&&Li(b,d.serviceProps),t[m]=b,n.prototype[m]=function(...R){return this._getService.bind(this,p).apply(this,d.multipleInstances?R:[])}}return d.type==="PUBLIC"?t[m]:null}function u(d,p){return p==="serverAuth"?null:p}return t}function iI(){let n=FP(ef);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:iI,extendNamespace:e,createSubscribe:ha,ErrorFactory:rt,deepExtend:Li});function e(t){Li(n,t)}return n}var VP=iI();var nI=new st("@firebase/app-compat"),UP="@firebase/app-compat",jP="0.2.43";function BP(n){X(UP,jP,n)}try{let n=uu();if(n.firebase!==void 0){nI.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);let e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&nI.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}var en=VP;BP();var $P="firebase",zP="10.14.1";en.registerVersion($P,zP,"app-compat");var lc=class{constructor(e){return e}},rI=new B("angularfire2.app.options"),sI=new B("angularfire2.app.name");function qP(n,e,t){let i=typeof t=="string"&&t||"[DEFAULT]",r=typeof t=="object"&&t||{};r.name=r.name||i;let a=en.apps.filter(c=>c&&c.name===r.name)[0]||e.runOutsideAngular(()=>en.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(a.options)){let c=!!module.hot;WP("error",`${a.name} Firebase App already initialized with different options${c?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new lc(a)}var WP=(n,...e)=>{Ap()&&typeof console<"u"&&console[n](...e)},GP={provide:lc,useFactory:qP,deps:[rI,Z,[new le,sI]]},oI=(()=>{class n{static initializeApp(t,i){return{ngModule:n,providers:[{provide:rI,useValue:t},{provide:sI,useValue:i}]}}constructor(t){en.registerVersion("angularfire",at.full,"core"),en.registerVersion("angularfire",at.full,"app-compat"),en.registerVersion("angular",So.full,t.toString())}static \u0275fac=function(i){return new(i||n)(M(Ge))};static \u0275mod=pe({type:n});static \u0275inj=fe({providers:[GP]})}return n})();var cF=typeof module<"u"&&!!module.hot;globalThis.\u0275AngularfireInstanceCache||=[];var HP=["*"];var KP=new B("MAT_CARD_CONFIG"),aI=(()=>{class n{constructor(t){this.appearance=t?.appearance||"raised"}static{this.\u0275fac=function(i){return new(i||n)(At(KP,8))}}static{this.\u0275cmp=Ve({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(i,r){i&2&&wi("mat-mdc-card-outlined",r.appearance==="outlined")("mdc-card--outlined",r.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],standalone:!0,features:[Ue],ngContentSelectors:HP,decls:1,vars:0,template:function(i,r){i&1&&(Ti(),xn(0))},styles:['.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mdc-elevated-card-container-color, var(--mat-app-surface));border-color:var(--mdc-elevated-card-container-color, var(--mat-app-surface));border-radius:var(--mdc-elevated-card-container-shape, var(--mat-app-corner-medium));box-shadow:var(--mdc-elevated-card-container-elevation, var(--mat-app-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mdc-elevated-card-container-shape, var(--mat-app-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mdc-outlined-card-container-color, var(--mat-app-surface));border-radius:var(--mdc-outlined-card-container-shape, var(--mat-app-corner-medium));border-width:var(--mdc-outlined-card-outline-width);border-color:var(--mdc-outlined-card-outline-color, var(--mat-app-outline-variant));box-shadow:var(--mdc-outlined-card-container-elevation, var(--mat-app-level0))}.mat-mdc-card-outlined::after{border:none}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-app-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-app-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-app-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-app-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-app-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-app-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-app-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-app-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-app-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-app-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-app-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}}return n})();var cI=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Vt({type:n,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"],standalone:!0})}}return n})();var lI=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=pe({type:n})}static{this.\u0275inj=fe({imports:[Zt,rl,Zt]})}}return n})();function YP(n,e){if(n&1){let t=Ei();Le(0,"mat-card",1),jt("dblclick",function(){pt(t);let r=Ke();return mt(r.edit.emit(r.task()))}),Le(1,"h2",2),dn(2),He(),Le(3,"mat-card-content",3),dn(4),He()()}if(n&2){let t=Ke();_t(2),Co(t.task().title),_t(2),Xc(" ",t.task().description," ")}}var uI=(()=>{class n{constructor(){this.task=Nr.required(),this.edit=vo(),this.taskDragged=vo(),this.taskDropped=vo()}dragged(t){console.log(`task --> dragged: ${t.title}`),this.taskDragged.emit(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Ve({type:n,selectors:[["app-task"]],inputs:{task:[1,"task"]},outputs:{edit:"edit",taskDragged:"taskDragged",taskDropped:"taskDropped"},standalone:!0,features:[Ue],decls:1,vars:1,consts:[["appearance","outlined",1,"item"],["appearance","outlined",1,"item",3,"dblclick"],[1,"title"],[1,"description"]],template:function(i,r){i&1&&Kc(0,YP,5,2,"mat-card",0),i&2&&Yc(r.task()?0:-1)},dependencies:[lI,aI,cI],styles:[".item[_ngcontent-%COMP%]{background-color:#d2d0dd;padding:20%}"]})}}return n})();function JP(n,e){if(n&1){let t=Ei();Le(0,"div",1),jt("mousedown",function(){let r=pt(t).$implicit,s=Ke();return mt(s.startDragging(r))}),Le(1,"app-task",2),jt("edit",function(r){pt(t);let s=Ke();return mt(s.onEditTask(r))}),He()(),Lr(2,"div",3)}if(n&2){let t=e.$implicit;Ii("id",t.id),_t(),Ii("task",t)}}var hI=(()=>{class n{constructor(){this.tasks=Hc([]),this.title=Nr.required(),this.draggedElement=Hc(void 0),this.lane=Nr.required()}startDragging(t){console.log(`dragging element: ${t.title}`),this.draggedElement.set(t)}onEditTask(t){throw new Error("Method not implemented.")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Ve({type:n,selectors:[["app-lane"]],inputs:{tasks:[1,"tasks"],title:[1,"title"],draggedElement:[1,"draggedElement"],lane:[1,"lane"]},outputs:{tasks:"tasksChange",draggedElement:"draggedElementChange"},standalone:!0,features:[Ue],decls:5,vars:1,consts:[[1,"lane"],["draggable","false",3,"mousedown","id"],[3,"edit","task"],[2,"height","30px"]],template:function(i,r){i&1&&(Le(0,"div",0)(1,"h2"),dn(2),He(),Eo(3,JP,3,2,null,null,wo),He()),i&2&&(_t(2),Co(r.title()),_t(),To(r.tasks()))},dependencies:[uI],styles:[".lane[_ngcontent-%COMP%]{gap:16px}"]})}}return n})();function XP(n,e){if(n&1){let t=Ei();Le(0,"div",3),jt("mouseover",function(){let r=pt(t).$implicit,s=Ke();return mt(s.overLane(r))})("mouseleave",function(){pt(t);let r=Ke();return mt(r.resetLane())})("mouseup",function(){pt(t);let r=Ke();return mt(r.drop())}),Le(1,"app-lane",4),Ep("tasksChange",function(r){let s=pt(t).$implicit;return el(s.tasks,r)||(s.tasks=r),mt(r)})("draggedElementChange",function(r){pt(t);let s=Ke();return el(s.draggedElement,r)||(s.draggedElement=r),mt(r)}),He()()}if(n&2){let t=e.$implicit,i=Ke();_t(),Zc("tasks",t.tasks),Ii("title",t.title)("lane",t),Zc("draggedElement",i.draggedElement)}}var dI=(()=>{class n{ngOnInit(){this.tasks.set([{id:"1",title:"Task 1",description:"Description for Task 1"},{id:"2",title:"Task 2",description:"Description for Task 2"},{id:"3",title:"Task 3",description:"Description for Task 3"},{id:"4",title:"Task 4",description:"Description for Task 4"},{id:"5",title:"Task 5",description:"Description for Task 5"}]),this.lanes.set([{id:0,title:"Lane 1",tasks:[this.tasks()[0],this.tasks()[1]]},{id:1,title:"Lane 2",tasks:[this.tasks()[2],this.tasks()[3]]},{id:2,title:"Lane 3",tasks:[this.tasks()[4]]}])}constructor(){this.tasks=Mr([]),this.lanes=Mr([]),this.currentLane=Mr(void 0),this.draggedElement=Mr(void 0),No(()=>console.log(this.tasks())),No(()=>console.log(`appComponent: ${this.draggedElement()?.title}`))}taskEdited(t){console.log(t)}overLane(t){console.log(`lane over: ${t.title}`),this.currentLane.set(t)}resetLane(){console.log("resetLane"),this.currentLane.set(void 0)}startDragging(){}drop(){this.currentLane()!==void 0&&this.draggedElement()!==void 0&&(this.lanes.update(t=>{let i=t.where(r=>r.id===this.currentLane()?.id).first();return t.forEach(r=>{r.tasks=r.tasks.filter(s=>s.id!==this.draggedElement()?.id)}),t[i.id].tasks.push(this.draggedElement()),t}),this.draggedElement.set(void 0))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Ve({type:n,selectors:[["app-root"]],standalone:!0,features:[Ue],decls:6,vars:0,consts:[["color","primary"],[1,"container"],[1,"item"],[1,"item",3,"mouseover","mouseleave","mouseup"],[3,"tasksChange","draggedElementChange","tasks","title","lane","draggedElement"]],template:function(i,r){i&1&&(Le(0,"mat-toolbar",0)(1,"span"),dn(2,"Kanban Fire"),He()(),Le(3,"div",1),Eo(4,XP,2,4,"div",2,wo),He()),i&2&&(_t(4),To(r.lanes()))},dependencies:[Zv,Xv,eI,hI,oI],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;gap:40px;width:100%}.item[_ngcontent-%COMP%]{flex:1;margin:0 5px}"]})}}return n})();tm(dI,Mv).catch(n=>console.error(n));
